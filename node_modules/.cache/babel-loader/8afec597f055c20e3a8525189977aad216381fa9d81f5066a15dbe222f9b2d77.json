{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Datepicker from 'vuejs-datepicker';\n// import Timepicker from 'vue2-timepicker';\nexport default {\n  name: 'ServiceList',\n  data() {\n    return {\n      showPage: 'ServicePage',\n      // Initialize showPage to ServicePage\n      newServiceData: {},\n      updateServiceData: {},\n      services: [],\n      disabledDates: {},\n      selectedDate: null,\n      selectedStartTime: null,\n      selectedEndTime: null,\n      // state: {\n      //   disabledDates: {\n      //     customPredictor: this.disableDatesOutsideRange,\n      //   }\n      // },\n      selectedDates: []\n    };\n  },\n  components: {\n    Datepicker\n    // Timepicker,\n  },\n\n  props: {\n    new_service: {\n      type: Object,\n      validator: function (value) {\n        if (value.id) console.log('this is from servicePage to serviceList, the new service is: ', value);\n        // Return true to disable type checking\n        return true;\n      }\n    },\n    update_service: {\n      type: Object,\n      validator: function (value) {\n        if (value.service_details) console.log('this is from servicePage to serviceList, the update service is: ', value);\n        // Return true to disable type checking\n        return true;\n      }\n    }\n  },\n  methods: {\n    getDisabledDates(index, item) {\n      // Implement your logic to generate disabled dates for each item\n      // You can use selectedDates[index] to customize the disabled dates for each item\n      return this.disableDatesOutsideRange(index, item.timeSlot);\n    },\n    disableDatesOutsideRange(index, dates) {\n      console.log(\"for index: \", index, 'the dates are: ', dates);\n      let datesDisabled = [];\n      for (const date of dates) {\n        console.log('the dates for index: ', index, ' are: ', dates);\n        datesDisabled.push({\n          from: this.formatDate(date.startDate),\n          to: this.formatDate(date.endDate)\n        });\n      }\n      console.log('the list of dates to disable is now: ', datesDisabled);\n    },\n    formatDate(dateToParse) {\n      const dateParts = dateToParse.split(' '); // Split the string into parts\n      const day = parseInt(dateParts[1], 10); // Parse the day part\n      const monthName = dateParts[2]; // Get the month name\n      const year = parseInt(dateParts[3], 10); // Parse the year part\n\n      // Define a map to convert month names to numerical values (0-based)\n      const monthMap = {\n        Jan: 0,\n        Feb: 1,\n        Mar: 2,\n        Apr: 3,\n        May: 4,\n        Jun: 5,\n        Jul: 6,\n        Aug: 7,\n        Sep: 8,\n        Oct: 9,\n        Nov: 10,\n        Dec: 11\n      };\n\n      // Get the numerical month value from the map\n      const month = monthMap[monthName];\n\n      // Create a new Date object in the desired format\n      return new Date(year, month, day);\n    },\n    // disableDatesOutsideRange(date) {\n    //    // Define an array of date ranges you want to enable\n    //     let time_slots = [\n    //       {\n    //         from: this.formatDate(\"Mon, 25 Sep 2023\"),\n    //         to: this.formatDate(\"Tue, 26 Sep 2023\"),\n    //       },\n    //       {\n    //         from: this.formatDate(\"Wed, 27 Sep 2023\"),\n    //         to: this.formatDate(\"Thu, 28 Sep 2023\"),\n    //       },\n    //       { \n    //         from: this.formatDate(\"Mon, 25 Sep 2023\"),\n    //         to: this.formatDate(\"Fri, 29 Sep 2023\")\n    //       }\n    //     ]\n\n    //   // Check if the date falls within any of the defined ranges\n    //   for (const range of time_slots) {\n    //     if (date >= range.from && date <= range.to) {\n    //       return false; // Enable dates within the range\n    //     }\n    //   }\n\n    //   // Disable all other dates\n    //   return true;\n    // },\n    async get_services() {\n      try {\n        const response = await this.$apollo.query({\n          query: require('@/graphql/AdminService.gql')\n        });\n        this.services = response.data.serviceAdmin;\n        console.log(response);\n        if (this.newServiceData.id) {\n          this.merge_new_service_to_services(this.services);\n        }\n        if (this.updateServiceData.service_details) {\n          this.update_service_list(this.services);\n        }\n      } catch (error) {\n        console.log('Error from get_services: ', error);\n      }\n    },\n    update_service_list(service) {\n      let service_one = service[this.updateServiceData.index_to_edit];\n      console.log('servicelist: the edited service is: ', service_one);\n      service_one['image'] = this.updateServiceData.service_details.image;\n      service_one['name'] = this.updateServiceData.service_details.name;\n      service_one['price'] = this.updateServiceData.service_details.price;\n    },\n    merge_new_service_to_services(all_service) {\n      // const category = this.newServiceData.service_categories.find(\n      //   (category) => category.id === this.newServiceData.service_category\n      // );\n      let newservice = {\n        description: this.newServiceData.description,\n        id: this.newServiceData.id,\n        image: this.newServiceData.image,\n        name: this.newServiceData.name,\n        serviceCategoryId: {\n          id: this.newServiceData.service_category,\n          name: this.newServiceData.service_categories[0].name\n        },\n        timeSlot: []\n      };\n      all_service.push(newservice);\n    },\n    showEditService(params) {\n      console.log('serviceList: the service id to edit is: ', params['id']);\n      this.$emit('showEditService', params);\n    },\n    showServiceNew() {\n      this.$emit('showServiceNew'); // Emit a custom event\n    }\n  },\n\n  mounted() {\n    this.get_services();\n    // Assign the prop value to the data property\n    if (this.new_service) {\n      this.newServiceData = this.new_service;\n      console.log('this is from servicepage to servicelist, new service data is: ', this.newServiceData);\n    }\n    if (this.update_service.service_details) {\n      this.updateServiceData = this.update_service;\n      console.log('this is from servicepage to servicelist, update service data is: ', this.updateServiceData);\n    }\n  }\n};","map":{"version":3,"names":["Datepicker","name","data","showPage","newServiceData","updateServiceData","services","disabledDates","selectedDate","selectedStartTime","selectedEndTime","selectedDates","components","props","new_service","type","Object","validator","value","id","console","log","update_service","service_details","methods","getDisabledDates","index","item","disableDatesOutsideRange","timeSlot","dates","datesDisabled","date","push","from","formatDate","startDate","to","endDate","dateToParse","dateParts","split","day","parseInt","monthName","year","monthMap","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","month","Date","get_services","response","$apollo","query","require","serviceAdmin","merge_new_service_to_services","update_service_list","error","service","service_one","index_to_edit","image","price","all_service","newservice","description","serviceCategoryId","service_category","service_categories","showEditService","params","$emit","showServiceNew","mounted"],"sources":["src/components/ServiceList.vue"],"sourcesContent":["<template>\n  <div>\n    <h2>Services</h2>\n    <button @click=\"showServiceNew\">Show ServiceNew</button>\n      <table class=\"table\">\n        <thead>\n          <tr>\n            <th>No.</th>\n            <th>Service Name</th>\n            <th>Category Name</th>\n            <th>Price</th>\n            <th>Description</th>\n            <th>Time Slots</th>\n            <th>Image</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(item, index) in services\" :key=\"item.id\">\n            <td>{{ index + 1 }}</td>\n            <td>{{ item.name }}</td>\n            <td>{{ item.serviceCategoryId.name }}</td>\n            <td>PHP {{ item.price.toFixed(2) }}</td>\n            <td>{{ item.description }}</td>\n            <td>\n              <template>\n                <div class=\"time\">\n                  <datepicker \n                  v-model=\"selectedDate\" \n                  :disabled-dates=\"getDisabledDates(index, item)\"\n                  :inline=\"true\"\n                  ></datepicker>\n                  <!-- :disabled-dates=\"state.disabledDates\"  -->\n                  <!-- <timepicker v-model=\"selectedStartTime\"></timepicker>\n                  <timepicker v-model=\"selectedEndTime\"></timepicker> -->\n                </div>\n              </template>\n              <!-- <table>\n                <tr>\n                  <th>date</th>\n                  <th>start time</th>\n                  <th>end time</th>\n                </tr>\n                <tr v-for=\"time in item.timeSlot\" :key=\"time.id\">\n                  <td>{{ time.date }}</td>\n                  <td>{{ time.startTime }}</td>\n                  <td>{{ time.endTime }}</td>\n                </tr>\n              </table> -->\n            </td>\n            <td><img :src=\"item.image\" :alt=item.category_name style=\"width: 200px; height: 150px;\"></td>\n            <td>\n              <span class=\"btn btn-warning\" @click=\"showEditService({id: item.id, index: index})\">Edit</span>\n              <!-- <router-link :to=\"{ path: '/services/' + item.id + '/edit' }\" class=\"btn btn-warning\"> Edit </router-link> -->\n            </td>\n          </tr>\n        </tbody>\n      </table>\n  </div>\n</template>\n\n<script>\nimport Datepicker from 'vuejs-datepicker';\n// import Timepicker from 'vue2-timepicker';\nexport default {\n  name: 'ServiceList',\n  data(){\n    return {\n      showPage: 'ServicePage', // Initialize showPage to ServicePage\n      newServiceData: {},\n      updateServiceData: {},\n      services: [],\n      disabledDates: {},\n      selectedDate: null,\n      selectedStartTime: null,\n      selectedEndTime: null,\n      // state: {\n      //   disabledDates: {\n      //     customPredictor: this.disableDatesOutsideRange,\n      //   }\n      // },\n      selectedDates: [],\n    };\n  },\n  components: {\n    Datepicker,\n    // Timepicker,\n  },\n  props: {\n    new_service: {\n      type: Object,\n      validator: function(value) {\n        if (value.id) console.log('this is from servicePage to serviceList, the new service is: ', value);\n        // Return true to disable type checking\n        return true;\n      },\n    },\n    update_service: {\n      type: Object,\n      validator: function(value) {\n        if (value.service_details) console.log('this is from servicePage to serviceList, the update service is: ', value);\n        // Return true to disable type checking\n        return true;\n      },\n    },\n  },\n  methods: {\n    getDisabledDates(index, item) {\n      // Implement your logic to generate disabled dates for each item\n      // You can use selectedDates[index] to customize the disabled dates for each item\n      return this.disableDatesOutsideRange(index, item.timeSlot);\n    },\n    disableDatesOutsideRange(index, dates) {\n      console.log(\"for index: \", index, 'the dates are: ', dates);\n      let datesDisabled = [];\n      for (const date of dates) {\n        console.log('the dates for index: ', index, ' are: ', dates)\n        datesDisabled.push({from: this.formatDate(date.startDate), to: this.formatDate(date.endDate)});\n      }\n      console.log('the list of dates to disable is now: ', datesDisabled)\n    },\n    formatDate(dateToParse) {\n      const dateParts = dateToParse.split(' '); // Split the string into parts\n      const day = parseInt(dateParts[1], 10); // Parse the day part\n      const monthName = dateParts[2]; // Get the month name\n      const year = parseInt(dateParts[3], 10); // Parse the year part\n\n      // Define a map to convert month names to numerical values (0-based)\n      const monthMap = {\n        Jan: 0, Feb: 1, Mar: 2, Apr: 3, May: 4, Jun: 5,\n        Jul: 6, Aug: 7, Sep: 8, Oct: 9, Nov: 10, Dec: 11\n      };\n\n      // Get the numerical month value from the map\n      const month = monthMap[monthName];\n\n      // Create a new Date object in the desired format\n      return new Date(year, month, day);\n    },\n    // disableDatesOutsideRange(date) {\n    //    // Define an array of date ranges you want to enable\n    //     let time_slots = [\n    //       {\n    //         from: this.formatDate(\"Mon, 25 Sep 2023\"),\n    //         to: this.formatDate(\"Tue, 26 Sep 2023\"),\n    //       },\n    //       {\n    //         from: this.formatDate(\"Wed, 27 Sep 2023\"),\n    //         to: this.formatDate(\"Thu, 28 Sep 2023\"),\n    //       },\n    //       { \n    //         from: this.formatDate(\"Mon, 25 Sep 2023\"),\n    //         to: this.formatDate(\"Fri, 29 Sep 2023\")\n    //       }\n    //     ]\n\n    //   // Check if the date falls within any of the defined ranges\n    //   for (const range of time_slots) {\n    //     if (date >= range.from && date <= range.to) {\n    //       return false; // Enable dates within the range\n    //     }\n    //   }\n\n    //   // Disable all other dates\n    //   return true;\n    // },\n    async get_services() {\n      try {\n        const response = await this.$apollo.query({\n          query: require('@/graphql/AdminService.gql'),\n        });\n        this.services = response.data.serviceAdmin\n        console.log(response);\n\n        if (this.newServiceData.id) { this.merge_new_service_to_services(this.services) }\n        if (this.updateServiceData.service_details) { this.update_service_list(this.services) }\n      } catch (error) {\n        console.log('Error from get_services: ', error);\n      }\n    },\n    update_service_list(service) {\n      let service_one = service[this.updateServiceData.index_to_edit];\n      console.log('servicelist: the edited service is: ', service_one);\n      service_one['image'] = this.updateServiceData.service_details.image;\n      service_one['name'] = this.updateServiceData.service_details.name;\n      service_one['price'] = this.updateServiceData.service_details.price;\n    },\n    merge_new_service_to_services(all_service) {\n      // const category = this.newServiceData.service_categories.find(\n      //   (category) => category.id === this.newServiceData.service_category\n      // );\n      let newservice = {\n        description: this.newServiceData.description,\n        id: this.newServiceData.id,\n        image: this.newServiceData.image,\n        name: this.newServiceData.name,\n        serviceCategoryId: {\n          id: this.newServiceData.service_category,\n          name: this.newServiceData.service_categories[0].name\n        },\n        timeSlot: [],\n      }\n      all_service.push(newservice)\n    },\n    showEditService(params) {\n      console.log('serviceList: the service id to edit is: ', params['id'])\n      this.$emit('showEditService', params);\n    },\n    showServiceNew() {\n      this.$emit('showServiceNew'); // Emit a custom event\n    },\n  },\n  mounted(){\n    this.get_services();\n    // Assign the prop value to the data property\n    if (this.new_service) {\n      this.newServiceData = this.new_service;\n      console.log('this is from servicepage to servicelist, new service data is: ', this.newServiceData);\n    } \n    if (this.update_service.service_details) {\n      this.updateServiceData = this.update_service;\n      console.log('this is from servicepage to servicelist, update service data is: ', this.updateServiceData);\n    }\n  }\n}\n</script>\n\n<style>\n/* @import 'vuejs-datepicker/dist/vuejs-datepicker.css'; */\n@import 'vue2-timepicker/dist/VueTimepicker.css';\n.time {\n  display: inline-block;\n}\n.error, .error:focus, .error input[type=\"radio\"] {\n    border-color: red;\n    color: red;\n}\n.input-errors {\n    color: red;\n}\n.err-card {\n    position: relative;\n}\n.error-msg {\n    position: absolute;\n    font-size: 10px;\n    bottom: -8px;\n    left: 17px;\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}