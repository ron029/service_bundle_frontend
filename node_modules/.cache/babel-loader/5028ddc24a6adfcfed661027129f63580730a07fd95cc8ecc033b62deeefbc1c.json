{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport BookingPage from '@/views/BookingPage.vue';\nimport ServicePage from '@/views/ServicePage.vue';\nimport ServiceCategoryPage from '@/views/ServiceCategoryPage.vue';\nimport ServiceNew from '@/views/ServiceNew.vue';\nimport ServiceEdit from '@/views/ServiceEdit.vue';\nimport { mapState, mapMutations } from 'vuex';\nimport { createProvider, onLogout } from '@/vue-apollo';\nimport logout from '@/graphql/Logout.gql';\nimport store from '@/store';\nexport default {\n  name: 'AppNavbar',\n  data() {\n    return {\n      currentPage: 'bookings',\n      // Initial page\n      showNew: false,\n      showedit: false,\n      serviceId: 1,\n      indexToEdit: 0,\n      newService: [],\n      updateService: {}\n    };\n  },\n  components: {\n    ServicePage,\n    BookingPage,\n    ServiceCategoryPage,\n    ServiceNew,\n    ServiceEdit\n  },\n  computed: {\n    ...mapState(['isAuthenticated', 'userRole'])\n  },\n  methods: {\n    updateService(data) {\n      console.log('appnavbar: update service details: ', data);\n    },\n    getLatestService(data) {\n      this.newService = data;\n      console.log('this is from appnavbar, the new service is: ', this.newService);\n    },\n    currentShowPage(page) {\n      this.showNew = false;\n      // this.showEdit = false;\n      this.currentPage = page;\n    },\n    showServiceEdit(params) {\n      this.serviceId = parseInt(params.id);\n      // this.showEdit = true;\n      this.indexToEdit = params.index;\n      this.showNew = false;\n      this.currentPage = '';\n      console.log('appnavbar: this is app nav, the service id to edit is: ', params.id, ' with index: ', params.index);\n      console.log(typeof this.serviceId);\n    },\n    showServiceNewPage() {\n      this.showNew = true;\n      this.currentPage = '';\n      // this.showEdit = false;\n    },\n\n    get_role() {\n      const userRole = localStorage.getItem('userRole');\n      return userRole;\n    },\n    ...mapMutations(['clearAuthentication', 'setAuthenticated']),\n    async logout() {\n      try {\n        await this.$apollo.mutate({\n          mutation: logout\n        });\n        await onLogout(createProvider);\n        this.setAuthenticated(false);\n        this.clearAuthentication();\n        this.updateUserRole(null);\n        // store.commit('clearUserRole');\n\n        if (this.$route.path !== '/login') this.$router.push('/login');\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    },\n    updateUserRole(role) {\n      // Call the mutation 'setUserRole' with a payload (userRole)\n      store.commit('setUserRole', role); // Replace 'admin' with your actual user role data\n    }\n  },\n\n  mounted() {\n    console.log('the role in navbar is now', this.get_role());\n    console.log('the role is now', this.userRole);\n  }\n};","map":{"version":3,"names":["BookingPage","ServicePage","ServiceCategoryPage","ServiceNew","ServiceEdit","mapState","mapMutations","createProvider","onLogout","logout","store","name","data","currentPage","showNew","showedit","serviceId","indexToEdit","newService","updateService","components","computed","methods","console","log","getLatestService","currentShowPage","page","showServiceEdit","params","parseInt","id","index","showServiceNewPage","get_role","userRole","localStorage","getItem","$apollo","mutate","mutation","setAuthenticated","clearAuthentication","updateUserRole","$route","path","$router","push","error","role","commit","mounted"],"sources":["src/components/AppNavbar.vue"],"sourcesContent":["<template>\n    <div>\n        <nav class=\"navbar navbar-expand-lg bg-body-tertiary\">\n            <div class=\"container-fluid\">\n                <router-link to=\"/merchant\" v-if=\"isAuthenticated && this.get_role() == 'admin'\" class=\"navbar-brand\">ServiceBundle</router-link>\n                <router-link to=\"/\" v-else class=\"navbar-brand\">ServiceBundle</router-link>\n                <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                <span class=\"navbar-toggler-icon\"></span>\n                </button>\n                <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n                <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'admin'\">\n                        <span @click=\"currentShowPage('bookings')\">Bookings &nbsp;&nbsp;</span>\n                    </li>\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'admin'\">\n                        <span @click=\"currentShowPage('services')\">Services &nbsp;&nbsp;</span>\n                    </li>\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'admin'\">\n                        <span @click=\"currentShowPage('serviceCategories')\">Service Categories &nbsp;&nbsp;</span>\n                    </li>\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'customer'\">\n                        <router-link class=\"nav-link\" to=\"/cart\">Cart</router-link>\n                    </li>\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'customer'\">\n                        <a class=\"nav-link\" href=\"/customer/booking\">Bookings</a>\n                    </li>\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'manager'\">\n                        <router-link class=\"nav-link\" to=\"/registered\">Registered</router-link>\n                    </li>\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'manager'\">\n                        <a href=\"/services\" class=\"nav-link\">Services</a>\n                    </li>\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'manager'\">\n                        <router-link class=\"nav-link\" to=\"/service_categories\">Service_Categories</router-link>\n                    </li>\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'manager'\">\n                        <router-link class=\"nav-link\" to=\"/booking\">Bookings1</router-link>\n                    </li>\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'manager'\">\n                        <router-link class=\"nav-link\" to=\"/booking_manager\">Bookings2</router-link>\n                    </li>\n                    <!-- <li class=\"nav-item dropdown\"> -->\n                        <!-- <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\"> Dropdown </a>\n                        <ul class=\"dropdown-menu\">\n                            <li><a class=\"dropdown-item\" href=\"#\">Action</a></li>\n                            <li><a class=\"dropdown-item\" href=\"#\">Another action</a></li>\n                            <li><hr class=\"dropdown-divider\"></li>\n                            <li><a class=\"dropdown-item\" href=\"#\">Something else here</a></li>\n                        </ul> -->\n                    <!-- </li> -->\n                        <!-- <li class=\"nav-item d-flex\"> -->\n                        <!-- <a class=\"nav-link disabled \" aria-disabled=\"true\">Disabled</a> -->\n                    <!-- </li> -->\n                </ul>\n                <ul class=\"navbar-nav\" v-if=\"!isAuthenticated\">\n                    <li class=\"nav-item\"><router-link class=\"nav-link\" to=\"/login\">Log in</router-link></li>\n                    <li class=\"nav-item\"><router-link class=\"nav-link\" to=\"/signup\">Sign up</router-link></li>\n                </ul>\n                <ul class=\"navbar-nav\" v-else>\n                    <li class=\"nav-item\"><span @click=\"logout\" class=\"nav-link logout\" to=\"logout\">Log out</span></li>\n                </ul>\n                </div>\n            </div>\n        </nav>\n        <div v-if=\"this.get_role()=='admin'\">\n            <ServicePage\n            v-if=\"currentPage === 'services'\"\n            v-on:showServiceNew=\"showServiceNewPage()\"\n            v-on:showEditPage=\"showServiceEdit($event)\"\n            :new_service_data=\"newService\"\n\n            />\n            <BookingPage v-else-if=\"currentPage === 'bookings'\" />\n            <ServiceCategoryPage v-else-if=\"currentPage === 'serviceCategories'\" />\n            <ServiceNew \n            v-else-if=\"showNew\"\n            v-on:newServiceAdded=\"getLatestService($event)\"\n            />\n            <ServiceEdit \n            v-else\n            :id_to_edit=\"serviceId\"\n            :index_to_edit=\"indexToEdit\"\n            v-on:updateServiceList=\"updateService\"\n            />\n        </div>\n    </div>\n</template>\n\n<script>\nimport BookingPage from '@/views/BookingPage.vue';\nimport ServicePage from '@/views/ServicePage.vue';\nimport ServiceCategoryPage from '@/views/ServiceCategoryPage.vue';\nimport ServiceNew from '@/views/ServiceNew.vue';\nimport ServiceEdit from '@/views/ServiceEdit.vue';\n\nimport { mapState, mapMutations } from 'vuex';\nimport { createProvider, onLogout } from '@/vue-apollo';\nimport logout from '@/graphql/Logout.gql';\nimport store from '@/store';\n\nexport default {\n    name: 'AppNavbar',\n    data(){\n        return {\n            currentPage: 'bookings', // Initial page\n            showNew: false,\n            showedit: false,\n            serviceId: 1,\n            indexToEdit: 0,\n            newService: [],\n            updateService: {},\n        }\n    },\n    components: {\n        ServicePage,\n        BookingPage,\n        ServiceCategoryPage,\n        ServiceNew,\n        ServiceEdit\n    },\n    computed: {\n        ...mapState(['isAuthenticated', 'userRole']),\n    },\n    methods: {\n        updateService(data) {\n            console.log('appnavbar: update service details: ', data);\n        },\n        getLatestService(data) {\n            this.newService = data;\n            console.log('this is from appnavbar, the new service is: ', this.newService);\n        },\n        currentShowPage(page) {\n            this.showNew = false;\n            // this.showEdit = false;\n            this.currentPage = page\n        },\n        showServiceEdit(params) {\n            this.serviceId = parseInt(params.id);\n            // this.showEdit = true;\n            this.indexToEdit = params.index;\n            this.showNew = false;\n            this.currentPage = '';\n            console.log('appnavbar: this is app nav, the service id to edit is: ', params.id, ' with index: ', params.index)\n            console.log(typeof this.serviceId)\n        },\n        showServiceNewPage() {\n            this.showNew = true; \n            this.currentPage = '';\n            // this.showEdit = false;\n        },\n        get_role() {\n            const userRole = localStorage.getItem('userRole');\n            return userRole;\n        },\n        ...mapMutations(['clearAuthentication', 'setAuthenticated']),\n        async logout() {\n            try {\n                await this.$apollo.mutate({\n                    mutation: logout,\n                });\n                await onLogout(createProvider);\n                this.setAuthenticated(false);\n                this.clearAuthentication();\n                this.updateUserRole(null);\n                // store.commit('clearUserRole');\n\n                if (this.$route.path !== '/login') this.$router.push('/login');\n            } catch (error) {\n                console.error('Error logging out:', error);\n            }\n        },\n        updateUserRole(role) {\n            // Call the mutation 'setUserRole' with a payload (userRole)\n            store.commit('setUserRole', role); // Replace 'admin' with your actual user role data\n        },\n    },\n    mounted(){\n        console.log('the role in navbar is now', this.get_role())\n        console.log('the role is now', this.userRole)\n    }\n}\n</script>\n\n<style>\n.logout {\n    cursor: pointer;\n}\n</style>"],"mappings":";AAyFA,OAAAA,WAAA;AACA,OAAAC,WAAA;AACA,OAAAC,mBAAA;AACA,OAAAC,UAAA;AACA,OAAAC,WAAA;AAEA,SAAAC,QAAA,EAAAC,YAAA;AACA,SAAAC,cAAA,EAAAC,QAAA;AACA,OAAAC,MAAA;AACA,OAAAC,KAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,WAAA;MAAA;MACAC,OAAA;MACAC,QAAA;MACAC,SAAA;MACAC,WAAA;MACAC,UAAA;MACAC,aAAA;IACA;EACA;EACAC,UAAA;IACAnB,WAAA;IACAD,WAAA;IACAE,mBAAA;IACAC,UAAA;IACAC;EACA;EACAiB,QAAA;IACA,GAAAhB,QAAA;EACA;EACAiB,OAAA;IACAH,cAAAP,IAAA;MACAW,OAAA,CAAAC,GAAA,wCAAAZ,IAAA;IACA;IACAa,iBAAAb,IAAA;MACA,KAAAM,UAAA,GAAAN,IAAA;MACAW,OAAA,CAAAC,GAAA,sDAAAN,UAAA;IACA;IACAQ,gBAAAC,IAAA;MACA,KAAAb,OAAA;MACA;MACA,KAAAD,WAAA,GAAAc,IAAA;IACA;IACAC,gBAAAC,MAAA;MACA,KAAAb,SAAA,GAAAc,QAAA,CAAAD,MAAA,CAAAE,EAAA;MACA;MACA,KAAAd,WAAA,GAAAY,MAAA,CAAAG,KAAA;MACA,KAAAlB,OAAA;MACA,KAAAD,WAAA;MACAU,OAAA,CAAAC,GAAA,4DAAAK,MAAA,CAAAE,EAAA,mBAAAF,MAAA,CAAAG,KAAA;MACAT,OAAA,CAAAC,GAAA,aAAAR,SAAA;IACA;IACAiB,mBAAA;MACA,KAAAnB,OAAA;MACA,KAAAD,WAAA;MACA;IACA;;IACAqB,SAAA;MACA,MAAAC,QAAA,GAAAC,YAAA,CAAAC,OAAA;MACA,OAAAF,QAAA;IACA;IACA,GAAA7B,YAAA;IACA,MAAAG,OAAA;MACA;QACA,WAAA6B,OAAA,CAAAC,MAAA;UACAC,QAAA,EAAA/B;QACA;QACA,MAAAD,QAAA,CAAAD,cAAA;QACA,KAAAkC,gBAAA;QACA,KAAAC,mBAAA;QACA,KAAAC,cAAA;QACA;;QAEA,SAAAC,MAAA,CAAAC,IAAA,oBAAAC,OAAA,CAAAC,IAAA;MACA,SAAAC,KAAA;QACAzB,OAAA,CAAAyB,KAAA,uBAAAA,KAAA;MACA;IACA;IACAL,eAAAM,IAAA;MACA;MACAvC,KAAA,CAAAwC,MAAA,gBAAAD,IAAA;IACA;EACA;;EACAE,QAAA;IACA5B,OAAA,CAAAC,GAAA,mCAAAU,QAAA;IACAX,OAAA,CAAAC,GAAA,yBAAAW,QAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}