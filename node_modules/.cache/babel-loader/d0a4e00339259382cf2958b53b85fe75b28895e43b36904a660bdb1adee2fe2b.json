{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'ServiceList',\n  data() {\n    return {\n      showPage: 'ServicePage',\n      // Initialize showPage to ServicePage\n      newServiceData: {},\n      services: []\n    };\n  },\n  props: {\n    new_service: {\n      type: Object,\n      validator: function (value) {\n        console.log('this is from appnavbar to service page, the new service is: ', value);\n        // Return true to disable type checking\n        return true;\n      }\n    }\n  },\n  methods: {\n    async get_services() {\n      try {\n        const response = await this.$apollo.query({\n          query: require('@/graphql/AdminService.gql')\n        });\n        this.services = response.data.serviceAdmin;\n        console.log(response);\n        if (this.newServiceData) {\n          this.merge_new_service_to_services(this.services);\n        }\n      } catch (error) {\n        console.log('Error from get_services: ', error);\n      }\n    },\n    merge_new_service_to_services(all_service) {\n      const category = this.newServiceData.service_categories.find(category => category.id === this.newServiceData.service_category);\n      let newservice = {\n        description: this.newServiceData.description,\n        id: this.newServiceData.id,\n        image: this.newServiceData.image,\n        name: this.newServiceData.name,\n        serviceCategoryId: {\n          id: this.newServiceData.service_category,\n          name: category.name\n        },\n        timeSlot: []\n      };\n      all_service.push(newservice);\n    },\n    showEditService(id) {\n      console.log('the service id to edit is: ', id);\n      this.$emit('showEditService', id);\n    },\n    showServiceNew() {\n      this.$emit('showServiceNew'); // Emit a custom event\n    }\n  },\n\n  mounted() {\n    this.get_services();\n    if (this.newServiceData) {\n      this.merge_new_service_to_services();\n    }\n    // Assign the prop value to the data property\n    if (this.new_service) this.newServiceData = this.new_service;\n    console.log('this is from servicepage to servicelist, new service data is: ', this.newServiceData);\n  }\n};","map":{"version":3,"names":["name","data","showPage","newServiceData","services","props","new_service","type","Object","validator","value","console","log","methods","get_services","response","$apollo","query","require","serviceAdmin","merge_new_service_to_services","error","all_service","category","service_categories","find","id","service_category","newservice","description","image","serviceCategoryId","timeSlot","push","showEditService","$emit","showServiceNew","mounted"],"sources":["src/components/ServiceList.vue"],"sourcesContent":["<template>\n  <div>\n    <h2>Services</h2>\n    <button @click=\"showServiceNew\">Show ServiceNew</button>\n      <table class=\"table\">\n        <thead>\n          <tr>\n            <th>Service Name</th>\n            <th>Category Name</th>\n            <th>Description</th>\n            <th>Time Slots</th>\n            <th>Image</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"item in services\" :key=\"item.id\">\n            <td>{{ item.name }}</td>\n            <td>{{ item.serviceCategoryId.name }}</td>\n            <td>{{ item.description }}</td>\n            <td>\n              <table>\n                <tr>\n                  <th>date</th>\n                  <th>start time</th>\n                  <th>end time</th>\n                </tr>\n                <tr v-for=\"time in item.timeSlot\" :key=\"time.id\">\n                  <td>{{ time.date }}</td>\n                  <td>{{ time.startTime }}</td>\n                  <td>{{ time.endTime }}</td>\n                </tr>\n              </table>\n            </td>\n            <td><img :src=\"item.image\" :alt=item.category_name style=\"width: 200px; height: 150px;\"></td>\n            <td>\n              <span class=\"btn btn-warning\" @click=\"showEditService(item.id)\">Edit</span>\n              <!-- <router-link :to=\"{ path: '/services/' + item.id + '/edit' }\" class=\"btn btn-warning\"> Edit </router-link> -->\n            </td>\n          </tr>\n        </tbody>\n      </table>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ServiceList',\n  data(){\n    return {\n      showPage: 'ServicePage', // Initialize showPage to ServicePage\n      newServiceData: {},\n      services: [],\n    };\n  },\n  props: {\n    new_service: {\n      type: Object,\n      validator: function(value) {\n        console.log('this is from appnavbar to service page, the new service is: ', value);\n        // Return true to disable type checking\n        return true;\n      },\n    },\n  },\n  methods: {\n    async get_services() {\n      try {\n        const response = await this.$apollo.query({\n          query: require('@/graphql/AdminService.gql'),\n        });\n        this.services = response.data.serviceAdmin\n        console.log(response);\n\n        if (this.newServiceData) { this.merge_new_service_to_services(this.services) }\n      } catch (error) {\n        console.log('Error from get_services: ', error);\n      }\n    },\n    merge_new_service_to_services(all_service) {\n      const category = this.newServiceData.service_categories.find(\n        (category) => category.id === this.newServiceData.service_category\n      );\n      let newservice = {\n        description: this.newServiceData.description,\n        id: this.newServiceData.id,\n        image: this.newServiceData.image,\n        name: this.newServiceData.name,\n        serviceCategoryId: {\n          id: this.newServiceData.service_category,\n          name: category.name\n        },\n        timeSlot: [],\n      }\n      all_service.push(newservice)\n    },\n    showEditService(id) {\n      console.log('the service id to edit is: ', id)\n      this.$emit('showEditService', id);\n    },\n    showServiceNew() {\n      this.$emit('showServiceNew'); // Emit a custom event\n    },\n  },\n  mounted(){\n    this.get_services();\n    if (this.newServiceData) { this.merge_new_service_to_services(); }\n    // Assign the prop value to the data property\n    if (this.new_service) this.newServiceData = this.new_service;\n    console.log('this is from servicepage to servicelist, new service data is: ', this.newServiceData);\n  }\n}\n</script>\n\n<style>\n.error, .error:focus, .error input[type=\"radio\"] {\n    border-color: red;\n    color: red;\n}\n.input-errors {\n    color: red;\n}\n.err-card {\n    position: relative;\n}\n.error-msg {\n    position: absolute;\n    font-size: 10px;\n    bottom: -8px;\n    left: 17px;\n}\n</style>"],"mappings":";AA8CA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MAAA;MACAC,cAAA;MACAC,QAAA;IACA;EACA;EACAC,KAAA;IACAC,WAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,SAAA,WAAAA,CAAAC,KAAA;QACAC,OAAA,CAAAC,GAAA,iEAAAF,KAAA;QACA;QACA;MACA;IACA;EACA;EACAG,OAAA;IACA,MAAAC,aAAA;MACA;QACA,MAAAC,QAAA,cAAAC,OAAA,CAAAC,KAAA;UACAA,KAAA,EAAAC,OAAA;QACA;QACA,KAAAd,QAAA,GAAAW,QAAA,CAAAd,IAAA,CAAAkB,YAAA;QACAR,OAAA,CAAAC,GAAA,CAAAG,QAAA;QAEA,SAAAZ,cAAA;UAAA,KAAAiB,6BAAA,MAAAhB,QAAA;QAAA;MACA,SAAAiB,KAAA;QACAV,OAAA,CAAAC,GAAA,8BAAAS,KAAA;MACA;IACA;IACAD,8BAAAE,WAAA;MACA,MAAAC,QAAA,QAAApB,cAAA,CAAAqB,kBAAA,CAAAC,IAAA,CACAF,QAAA,IAAAA,QAAA,CAAAG,EAAA,UAAAvB,cAAA,CAAAwB,gBACA;MACA,IAAAC,UAAA;QACAC,WAAA,OAAA1B,cAAA,CAAA0B,WAAA;QACAH,EAAA,OAAAvB,cAAA,CAAAuB,EAAA;QACAI,KAAA,OAAA3B,cAAA,CAAA2B,KAAA;QACA9B,IAAA,OAAAG,cAAA,CAAAH,IAAA;QACA+B,iBAAA;UACAL,EAAA,OAAAvB,cAAA,CAAAwB,gBAAA;UACA3B,IAAA,EAAAuB,QAAA,CAAAvB;QACA;QACAgC,QAAA;MACA;MACAV,WAAA,CAAAW,IAAA,CAAAL,UAAA;IACA;IACAM,gBAAAR,EAAA;MACAf,OAAA,CAAAC,GAAA,gCAAAc,EAAA;MACA,KAAAS,KAAA,oBAAAT,EAAA;IACA;IACAU,eAAA;MACA,KAAAD,KAAA;IACA;EACA;;EACAE,QAAA;IACA,KAAAvB,YAAA;IACA,SAAAX,cAAA;MAAA,KAAAiB,6BAAA;IAAA;IACA;IACA,SAAAd,WAAA,OAAAH,cAAA,QAAAG,WAAA;IACAK,OAAA,CAAAC,GAAA,wEAAAT,cAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}