{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapState, mapMutations } from 'vuex';\nimport { createProvider, onLogout } from '@/vue-apollo';\nimport logout from '@/graphql/Logout.gql';\nimport store from '@/store';\nexport default {\n  name: 'AppNavbar',\n  data() {\n    return {\n      showPage: ''\n    };\n  },\n  computed: {\n    ...mapState(['isAuthenticated', 'userRole'])\n  },\n  methods: {\n    get_role() {\n      const userRole = localStorage.getItem('userRole');\n      return userRole;\n    },\n    ...mapMutations(['clearAuthentication', 'setAuthenticated']),\n    async logout() {\n      try {\n        await this.$apollo.mutate({\n          mutation: logout\n        });\n        await onLogout(createProvider);\n        this.setAuthenticated(false);\n        this.clearAuthentication();\n        store.commit('clearUserRole');\n        if (this.$route.path !== '/login') this.$router.push('/login');\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    }\n  },\n  mounted() {\n    console.log('the role in navbar is now', this.get_role());\n    console.log('the role is now', this.userRole);\n  }\n};","map":{"version":3,"names":["mapState","mapMutations","createProvider","onLogout","logout","store","name","data","showPage","computed","methods","get_role","userRole","localStorage","getItem","$apollo","mutate","mutation","setAuthenticated","clearAuthentication","commit","$route","path","$router","push","error","console","mounted","log"],"sources":["src/components/AppNavbar.vue"],"sourcesContent":["<template>\n    <nav class=\"navbar navbar-expand-lg bg-body-tertiary\">\n        <div class=\"container-fluid\">\n            <router-link to=\"/\" class=\"navbar-brand\">ServiceBundle</router-link>\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n            <span class=\"navbar-toggler-icon\"></span>\n            </button>\n            <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n            <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n                <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'admin'\">\n                    <span>Bookings</span>\n                    <!-- <router-link class=\"nav-link\" to=\"/booking\">Bookings</router-link> -->\n                    <!-- <router-link to=\"/cinemas\" class=\"nav-link\">Cinemas</router-link> -->\n                    <!-- <a class=\"nav-link\" href=\"#\">Link</a> -->\n                </li>\n                <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'admin'\">\n                    <span>Services</span>\n                    <!-- <router-link class=\"nav-link\" to=\"/services\">Services</router-link> -->\n                <!-- <router-link to=\"/movies\" class=\"nav-link\">Movies</router-link> -->\n                <!-- <a class=\"nav-link\" href=\"#\">Link</a> -->\n                </li>\n                <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'admin'\">\n                    <span>Service Categories</span>\n                    <router-link class=\"nav-link\" to=\"/service_categories\">Service Categories</router-link>\n                <!-- <router-link to=\"/bookings\" class=\"nav-link\">Bookings</router-link> -->\n                <!-- <a class=\"nav-link\" href=\"#\">Link</a> -->\n                </li>\n                <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'customer'\">\n                    <router-link class=\"nav-link\" to=\"/cart\">Cart</router-link>\n                <!-- <router-link to=\"/screenings\" class=\"nav-link\">Screenings</router-link> -->\n                <!-- <a class=\"nav-link\" href=\"#\">Link</a> -->\n                </li>\n                <!-- <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'customer'\"> -->\n                    <!-- <router-link class=\"nav-link\" to=\"/checkout\">Checkout</router-link> -->\n                <!-- <router-link to=\"/screenings\" class=\"nav-link\">Screenings</router-link> -->\n                <!-- <a class=\"nav-link\" href=\"#\">Link</a> -->\n                <!-- </li> -->\n                <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'customer'\">\n                    <a class=\"nav-link\" href=\"/customer/booking\">Bookings</a>\n                <!-- <router-link to=\"/screenings\" class=\"nav-link\">Screenings</router-link> -->\n                <!-- <a class=\"nav-link\" href=\"#\">Link</a> -->\n                </li>\n                <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'manager'\">\n                    <router-link class=\"nav-link\" to=\"/registered\">Registered</router-link>\n                <!-- <router-link to=\"/screenings\" class=\"nav-link\">Screenings</router-link> -->\n                <!-- <a class=\"nav-link\" href=\"#\">Link</a> -->\n                </li>\n                <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'manager'\">\n                    <a href=\"/services\" class=\"nav-link\">Services</a>\n                <!-- <router-link to=\"/screenings\" class=\"nav-link\">Screenings</router-link> -->\n                <!-- <a class=\"nav-link\" href=\"#\">Link</a> -->\n                </li>\n                <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'manager'\">\n                    <router-link class=\"nav-link\" to=\"/service_categories\">Service Categories</router-link>\n                <!-- <router-link to=\"/screenings\" class=\"nav-link\">Screenings</router-link> -->\n                <!-- <a class=\"nav-link\" href=\"#\">Link</a> -->\n                </li>\n                <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'manager'\">\n                    <router-link class=\"nav-link\" to=\"/booking\">Bookings1</router-link>\n                <!-- <router-link to=\"/screenings\" class=\"nav-link\">Screenings</router-link> -->\n                <!-- <a class=\"nav-link\" href=\"#\">Link</a> -->\n                </li>\n                <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'manager'\">\n                    <router-link class=\"nav-link\" to=\"/booking_manager\">Bookings2</router-link>\n                <!-- <router-link to=\"/screenings\" class=\"nav-link\">Screenings</router-link> -->\n                <!-- <a class=\"nav-link\" href=\"#\">Link</a> -->\n                </li>\n                <!-- <li class=\"nav-item dropdown\"> -->\n                <!-- <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                    Dropdown\n                </a>\n                <ul class=\"dropdown-menu\">\n                    <li><a class=\"dropdown-item\" href=\"#\">Action</a></li>\n                    <li><a class=\"dropdown-item\" href=\"#\">Another action</a></li>\n                    <li><hr class=\"dropdown-divider\"></li>\n                    <li><a class=\"dropdown-item\" href=\"#\">Something else here</a></li>\n                </ul> -->\n                <!-- </li> -->\n                <!-- <li class=\"nav-item d-flex\"> -->\n                <!-- <a class=\"nav-link disabled \" aria-disabled=\"true\">Disabled</a> -->\n                <!-- </li> -->\n            </ul>\n            <ul class=\"navbar-nav\" v-if=\"!isAuthenticated\">\n                <li class=\"nav-item\"><router-link class=\"nav-link\" to=\"/login\">Log in</router-link></li>\n                <li class=\"nav-item\"><router-link class=\"nav-link\" to=\"/signup\">Sign up</router-link></li>\n            </ul>\n            <ul class=\"navbar-nav\" v-else>\n                <li class=\"nav-item\"><span @click=\"logout\" class=\"nav-link logout\" to=\"logout\">Log out</span></li>\n            </ul>\n            </div>\n        </div>\n    </nav>\n</template>\n\n<script>\nimport { mapState, mapMutations } from 'vuex';\nimport { createProvider, onLogout } from '@/vue-apollo';\nimport logout from '@/graphql/Logout.gql';\nimport store from '@/store';\n\nexport default {\n    name: 'AppNavbar',\n    data(){\n        return {\n            showPage: ''\n        }\n    },\n    computed: {\n        ...mapState(['isAuthenticated', 'userRole']),\n    },\n    methods: {\n        get_role(){\n            const userRole = localStorage.getItem('userRole');\n            return userRole;\n        },\n        ...mapMutations(['clearAuthentication', 'setAuthenticated']),\n        async logout() {\n            try {\n                await this.$apollo.mutate({\n                    mutation: logout,\n                });\n                await onLogout(createProvider);\n                this.setAuthenticated(false);\n                this.clearAuthentication();\n                store.commit('clearUserRole');\n\n                if (this.$route.path !== '/login') this.$router.push('/login');\n            } catch (error) {\n                console.error('Error logging out:', error);\n            }\n        },\n    },\n    mounted(){\n        console.log('the role in navbar is now', this.get_role())\n        console.log('the role is now', this.userRole)\n    }\n}\n</script>\n\n<style>\n.logout {\n    cursor: pointer;\n}\n</style>"],"mappings":";AA+FA,SAAAA,QAAA,EAAAC,YAAA;AACA,SAAAC,cAAA,EAAAC,QAAA;AACA,OAAAC,MAAA;AACA,OAAAC,KAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAT,QAAA;EACA;EACAU,OAAA;IACAC,SAAA;MACA,MAAAC,QAAA,GAAAC,YAAA,CAAAC,OAAA;MACA,OAAAF,QAAA;IACA;IACA,GAAAX,YAAA;IACA,MAAAG,OAAA;MACA;QACA,WAAAW,OAAA,CAAAC,MAAA;UACAC,QAAA,EAAAb;QACA;QACA,MAAAD,QAAA,CAAAD,cAAA;QACA,KAAAgB,gBAAA;QACA,KAAAC,mBAAA;QACAd,KAAA,CAAAe,MAAA;QAEA,SAAAC,MAAA,CAAAC,IAAA,oBAAAC,OAAA,CAAAC,IAAA;MACA,SAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,uBAAAA,KAAA;MACA;IACA;EACA;EACAE,QAAA;IACAD,OAAA,CAAAE,GAAA,mCAAAjB,QAAA;IACAe,OAAA,CAAAE,GAAA,yBAAAhB,QAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}