{"remainingRequest":"/home/bonifacio/code/service_bundle_frontend/node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!/home/bonifacio/code/service_bundle_frontend/src/views/ServiceNew.vue?vue&type=style&index=0&id=36f3d6e5&lang=css&","dependencies":[{"path":"/home/bonifacio/code/service_bundle_frontend/src/views/ServiceNew.vue","mtime":1695241256792},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/css-loader/dist/cjs.js","mtime":1692833962858},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js","mtime":1692833962314},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/postcss-loader/dist/cjs.js","mtime":1692833963133},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1692838039149},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js","mtime":1692833961693}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5jZW50ZXJlZC1mb3JtIHsKICB3aWR0aDogMjMwcHg7CiAgbWFyZ2luOiAwIGF1dG87Cn0KLmNsb3VkaW5hcnktYnV0dG9uIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7CiAgICBjb2xvcjogd2hpdGU7CiAgICBwYWRkaW5nOiAxMHB4IDIwcHg7CiAgICBib3JkZXI6IG5vbmU7CiAgICBjdXJzb3I6IHBvaW50ZXI7Cn0KLmNsb3VkaW5hcnktYnV0dG9uOmhvdmVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDU2YjM7Cn0KLyogU3R5bGUgdGhlIHVwbG9hZGVkIGltYWdlICovCi51cGxvYWRlZC1pbWFnZSB7CiAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IGF1dG87CiAgICBtYXJnaW4tdG9wOiAxMHB4OwogICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsKICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMSk7Cn0K"},{"version":3,"sources":["ServiceNew.vue"],"names":[],"mappings":";AAoKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ServiceNew.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"container\">\n    <h1>New Service</h1>\n    <form @submit.prevent=\"submitForm\" class=\"centered-form\">\n      <div class=\"input-field-signin\">\n        <div :class=\"{ error: v$.services.name.$errors.length }\">\n          <label class=\"form-label\">Service Name\n            <input v-model=\"services.name\" class=\"form-control form-control-l\" :class=\"{ error: v$.services.name.$errors.length }\">\n            <div class=\"input-errors\" v-for=\"error of v$.services.name.$errors\" :key=\"error.$uid\">\n              <div class=\"error-msg\">{{ error.$message }}</div>\n            </div>\n          </label>\n        </div>\n      </div>\n      <div class=\"input-field-signin\">Service Category\n        <div :class=\"{ error: v$.services.service_category.$errors.length }\">\n          <select v-model=\"services.service_category\" class=\"form-control form-control-l\" :class=\"{ error: v$.services.service_category.$errors.length }\">\n            <option v-for=\"category in this.services.service_categories\" :key=\"category.id\" :value=\"category.id\">\n              {{ category.name }}\n            </option>\n          </select>\n        </div>\n      </div>\n      <div class=\"input-field-signin\">\n        <div :class=\"{ error: v$.services.description.$errors.length }\">\n          <label class=\"form-label\">Description\n            <textarea v-model=\"services.description\" class=\"form-control form-control-l\" :class=\"{ error: v$.services.description.$errors.length }\"></textarea>\n            <div class=\"input-errors\" v-for=\"error of v$.services.description.$errors\" :key=\"error.$uid\">\n              <div class=\"error-msg\">{{ error.$message }}</div>\n            </div>\n          </label>\n        </div>\n      </div>\n      <div class=\"input-field-signin\">\n        <div :class=\"{ error: v$.services.price.$errors.length }\">\n          <label class=\"form-label\">Price\n            <input id=\"price\" v-model=\"services.price\" class=\"form-control form-control-l\" :class=\"{ error: v$.services.price.$errors.length }\">\n            <div class=\"input-errors\" v-for=\"error of v$.services.price.$errors\" :key=\"error.$uid\">\n              <div class=\"error-msg\">{{ error.$message }}</div>\n            </div>\n          </label>\n        </div>\n      </div>\n      <div class=\"input-field-signin\">\n        <div class=\"row input-field-signup mt-3\">\n          <button id=\"upload_widget\" @click.prevent=\"\" class=\"cloudinary-button\">Upload files</button>\n        </div>\n        <div id=\"image-preview\" class=\"mt-3\"></div>\n        <button type=\"submit\" class=\"btn btn-primary btn-lg input-field-signin\">Create</button>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { required, integer } from '@vuelidate/validators'\nimport { useVuelidate } from '@vuelidate/core';\nexport default {\n  setup () { return { v$: useVuelidate() } },\n  data () {\n    return {\n      services: {\n        service_category: '',\n        name: '',\n        price: '',\n        description: '',\n        service_categories: [],\n\n      },\n    }\n  },\n  validations () {\n    return {\n      services: {\n        name: { required },\n        service_category: { required  },\n        price: {required, integer },\n        description: {required},\n      },\n      image: '',\n    }\n  },\n  methods: {\n    upload(){\n        console.log('upload')\n        var myWidget = window.cloudinary.createUploadWidget({\n            cloudName: 'dovxq5gn9', \n            processQueue: false,\n            uploadPreset: 'uhjevesg'}, (error, result) => { \n                if (!error && result && result.event === \"success\") { \n                console.log('Done! Here is the image info: ', result.info); \n                    const imageUrl = result.info.secure_url;\n                    this.image = imageUrl;\n                    this.displayImage(imageUrl);\n                }\n            }\n        )\n        document.getElementById(\"upload_widget\").addEventListener(\"click\", function(){\n            myWidget.open();\n        }, false);  \n    }, \n    // Function to display the uploaded image\n    displayImage(imageUrl) {\n        const imagePreviewDiv = document.getElementById('image-preview');\n        const image = document.createElement('img');\n        image.src = imageUrl;\n        image.classList.add('uploaded-image'); // Add CSS class for styling\n        imagePreviewDiv.innerHTML = ''; // Clear any existing content\n        imagePreviewDiv.appendChild(image);\n    },\n    async show_categories() {\n      try {\n        const response = await this.$apollo.query({\n          query: require('@/graphql/Category.gql'),\n        });\n        console.log('the service category is here', response)\n         this.services.service_categories = response.data.categories;\n      } catch (error) {\n          console.error('Error logging out:', error);\n      }\n    },\n    async submitForm() {\n      this.v$.$touch();\n      if(!this.v$.$touch()) {\n        console.log()\n        try {\n        const response = await this.$apollo.mutate({\n          mutation: require('@/graphql/ServiceCreate.gql'),\n          variables: {\n            serviceCategoryId: this.services.service_category,\n            name: this.services.name,\n            description: this.services.description,\n            price: parseInt(this.services.price),\n            image: this.image\n          },\n        });\n        let data = this.services;\n        data['image'] = this.image;\n        data['id'] = response.data.createService.service.id;\n        console.log('the data of new services is: ', data);\n        console.log('reply from service is: ', response)\n        if(response) { alert(\"SUCCESS, new service has been recorded\") }\n        this.$emit('newServiceAdded', data);\n        this.time_slot_one = null;\n        } catch (error) { console.error(\"Graphql Error:\", error); }\n      }\n    },\n    reloadPage() {\n      // Reload the current page\n      window.location.reload();\n    },\n  },\n  components: {\n\n  },\n  mounted() {\n    this.show_categories()\n    this.upload()\n  },\n\n}\n</script>\n\n<style>\n.centered-form {\n  width: 230px;\n  margin: 0 auto;\n}\n.cloudinary-button {\n    background-color: #007bff;\n    color: white;\n    padding: 10px 20px;\n    border: none;\n    cursor: pointer;\n}\n.cloudinary-button:hover {\n    background-color: #0056b3;\n}\n/* Style the uploaded image */\n.uploaded-image {\n    max-width: 100%;\n    height: auto;\n    margin-top: 10px;\n    border: 1px solid #ccc;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n</style>"]}]}