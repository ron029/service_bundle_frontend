{"remainingRequest":"/home/bonifacio/code/service_bundle_frontend/node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!/home/bonifacio/code/service_bundle_frontend/src/components/ServiceListCustomer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/bonifacio/code/service_bundle_frontend/src/components/ServiceListCustomer.vue","mtime":1697850877698},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/babel-loader/lib/index.js","mtime":1692833949708},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1692838039149},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js","mtime":1692833961693}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHJlcXVpcmVkLCBoZWxwZXJzIH0gZnJvbSAnQHZ1ZWxpZGF0ZS92YWxpZGF0b3JzJzsKaW1wb3J0IHsgdXNlVnVlbGlkYXRlIH0gZnJvbSAnQHZ1ZWxpZGF0ZS9jb3JlJwppbXBvcnQgTW9kYWxUZXN0IGZyb20gJ0AvY29tcG9uZW50cy9Nb2RhbFRlc3QudnVlJzsKaW1wb3J0IERhdGVwaWNrZXIgZnJvbSAndnVlanMtZGF0ZXBpY2tlcic7CmltcG9ydCBWdWUyVGltZXBpY2tlciBmcm9tICd2dWUyLXRpbWVwaWNrZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1NlcnZpY2VMaXN0Q3VzdG9tZXInLAogIHNldHVwICgpIHsgcmV0dXJuIHsgdiQ6IHVzZVZ1ZWxpZGF0ZSgpIH0gfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VydmljZV9ieV9jYXRlZ29yeTogW10sCiAgICAgIG1vZGFsSWQ6ICdjdXN0b21Nb2RhbCcsCiAgICAgIGF2YWlsYWJsZV90aW1lc2xvdDogW10sCiAgICAgIGR1cmF0aW9uOiAwLAogICAgICBkYXRlOiAnJywKICAgICAgb3Blbl90aW1lOiBmYWxzZSwKICAgICAgbWluVGltZTogMCwKICAgICAgbWF4VGltZTogMCwKICAgICAgdGltZTogJycsCiAgICAgIGNvbnZlcnRlZFRpbWU6ICcnLAogICAgICBzZXJ2aWNlX2lkOiAnJywKICAgICAgc2VydmljZTogW10sCiAgICAgIHNsb3Q6IDAsCiAgICAgIGVycl9tZXNzYWdlOiAnJywKICAgICAgZXJyX25vdGlmOiBmYWxzZSwKICAgICAgZGF0ZV9jaGVja2VkOiBmYWxzZSwKICAgICAgY2FsZW5kYXI6IHRydWUsCiAgICAgIHNob3dDYWxlbmRhckluZGV4OiAwLAogICAgICBkaXNwbGF5U2VydmljZTogJycsCiAgICB9CiAgfSwKICB2YWxpZGF0aW9ucygpIHsKICAgIGNvbnN0IG1pbl90aW1lID0gdmFsdWUgPT4gewogICAgICBjb25zdCBzZWxlY3RlZFRpbWUgPSBuZXcgRGF0ZShgMTk3MC0wMS0wMVQke3RoaXMuY29udmVydFRvMjRIb3VyRm9ybWF0KHZhbHVlKX1gKTsKICAgICAgY29uc29sZS5sb2coJ21pbl90aW1lIHZhbDogJywgdmFsdWUsIHRoaXMubWluVGltZSkKICAgICAgY29uc3QgbWludGltZSA9IG5ldyBEYXRlKGAxOTcwLTAxLTAxVCR7dGhpcy5jb252ZXJ0VG8yNEhvdXJGb3JtYXQodGhpcy5taW5UaW1lKX1gKTsKICAgICAgY29uc29sZS5sb2coJ21pbl90aW1lIHJlc3VsdDogJywgc2VsZWN0ZWRUaW1lID49IG1pbnRpbWUpCiAgICAgIHJldHVybiBzZWxlY3RlZFRpbWUgPj0gbWludGltZTsKICAgIH07CiAgICBjb25zdCBtYXhfdGltZSA9IHZhbHVlID0+IHsKICAgICAgY29uc3Qgc2VsZWN0ZWRUaW1lID0gbmV3IERhdGUoYDE5NzAtMDEtMDFUJHt0aGlzLmNvbnZlcnRUbzI0SG91ckZvcm1hdCh2YWx1ZSl9YCk7CiAgICAgIGNvbnNvbGUubG9nKCdtYXhfdGltZSB2YWw6ICcsIHZhbHVlLCB0aGlzLm1heFRpbWUpCiAgICAgIGNvbnN0IG1heHRpbWUgPSBuZXcgRGF0ZShgMTk3MC0wMS0wMVQke3RoaXMuY29udmVydFRvMjRIb3VyRm9ybWF0KHRoaXMubWF4VGltZSl9YCk7CiAgICAgIGNvbnNvbGUubG9nKCdtYXhfdGltZSByZXN1bHQ6ICcsIHNlbGVjdGVkVGltZSA8PSBtYXh0aW1lKQogICAgICByZXR1cm4gc2VsZWN0ZWRUaW1lIDw9IG1heHRpbWU7CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgdGltZTogewogICAgICAgIHJlcXVpcmVkLAogICAgICAgIC8vIHZhbGlkVGltZSh2YWx1ZSkgewogICAgICAgIC8vICAgY29uc3QgdGltZVBhdHRlcm4gPSAvXihbMDFdXGR8MlswLTNdKTooWzAtNV1cZCkkLzsKICAgICAgICAvLyAgIHJldHVybiB0aW1lUGF0dGVybi50ZXN0KHZhbHVlKTsKICAgICAgICAvLyB9LAogICAgICAgIG1pbl90aW1lOiBoZWxwZXJzLndpdGhNZXNzYWdlKCdUaGUgbWluIHRpbWUgbXVzdCBiZSAnICsgdGhpcy5taW5UaW1lLCBtaW5fdGltZSkgLCAgICAgCiAgICAgICAgbWF4X3RpbWU6IGhlbHBlcnMud2l0aE1lc3NhZ2UoJ1RoZSBtYXggdGltZSBtdXN0IGJlICcgKyB0aGlzLm1heFRpbWUsIG1heF90aW1lKSAsICAgICAKICAgICAgfSwKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIERhdGVwaWNrZXIsCiAgICBNb2RhbFRlc3QsCiAgICBWdWUyVGltZXBpY2tlciwKICB9LAogIG1ldGhvZHM6IHsKICAgIHNob3dTZXJ2aWNlKGl0ZW0pIHsKICAgICAgdGhpcy5kaXNwbGF5U2VydmljZSA9IGl0ZW0ubmFtZQogICAgICBoaXN0b3J5LnB1c2hTdGF0ZSgKICAgICAgICB7fSwKICAgICAgICBudWxsLAogICAgICAgIHRoaXMuJHJvdXRlLnBhdGggKyAnL3NlcnZpY2VzLycgKyBlbmNvZGVVUklDb21wb25lbnQoaXRlbS5pZCkKICAgICAgKQogICAgfSwKICAgIHNob3dDYWxlbmRhcihpbmRleCkgewogICAgICB0aGlzLmNhbGVuZGFyID0gdHJ1ZTsKICAgICAgdGhpcy5zaG93Q2FsZW5kYXJJbmRleCA9IGluZGV4OwogICAgICBjb25zb2xlLmxvZygnc2hvd0NhbGVuZGFyJywgaW5kZXgpOwogICAgfSwKICAgIGhpZGVDYWxlbmRhcigpIHsKICAgICAgdGhpcy5jYWxlbmRhciA9IGZhbHNlOwogICAgICBjb25zb2xlLmxvZygnaGlkZSBjYWxlbmRhcicpCiAgICB9LAogICAgaXNUaW1lSW5Gb3JtYXQoKSB7CiAgICAgIGNvbnN0IHRpbWVQYXR0ZXJuID0gL14oMFsxLTldfDFbMC0yXSk6WzAtNV1bMC05XTpbMC01XVswLTldIChBTXxQTSkkLzsKICAgICAgcmV0dXJuIHRpbWVQYXR0ZXJuLnRlc3QodGhpcy50aW1lKTsKICAgIH0sCiAgICBhc3luYyBjcmVhdGVfY2FydF9pdGVtKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGRhdGUgPSB0aGlzLmRhdGU7CiAgICAgICAgY29uc3Qgc2VydmljZV9pZCA9IHRoaXMuc2VydmljZS5pZDsKICAgICAgICBjb25zdCB0aW1lID0gdGhpcy50aW1lOwogICAgICAgIGNvbnNvbGUubG9nKCdzZXJ2aWNlaWQgaXMgJywgc2VydmljZV9pZCkKICAgICAgICBjb25zb2xlLmxvZygnZGF0ZSAnLCBkYXRlKTsKICAgICAgICBjb25zb2xlLmxvZygndGltZSAnLCB0aW1lKQoKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246IHJlcXVpcmUoJ0AvZ3JhcGhxbC9DYXJ0SXRlbUNyZWF0ZS5ncWwnKSwKICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICBzZXJ2aWNlSWQ6IHNlcnZpY2VfaWQsCiAgICAgICAgICAgIGRhdGU6IGRhdGUsCiAgICAgICAgICAgIHRpbWU6IHRpbWUsCiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCdyZXNwb25zZSBmcm9tIHNlcnZlciBjcmVhdGUgY2FydCBpdGVtJyxyZXNwb25zZSk7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY3JlYXRlQ2FydEl0ZW0uZXJyb3JzLmxlbmd0aCA8IDEpIHsKICAgICAgICAgIGFsZXJ0KCdTVUNDRVNTICEnKQogICAgICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goJy9jYXJ0JykKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihyZXNwb25zZS5kYXRhLmNyZWF0ZUNhcnRJdGVtLmVycm9yc1swXSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGNyZWF0ZV9jYXJ0X2l0ZW06JywgZXJyb3IpOwogICAgICAgIC8vIEhhbmRsZSB0aGUgZXJyb3IgaGVyZSwgZS5nLiwgc2hvdyBhbiBlcnJvciBtZXNzYWdlIHRvIHRoZSB1c2VyLgogICAgICB9CiAgICB9LAogICAgaGFuZGxlRXJyb3IoZXJyTXNnKSB7CiAgICAgIHRoaXMuZXJyX21lc3NhZ2UgPSBlcnJNc2c7CiAgICAgIHRoaXMuZXJyX25vdGlmID0gdHJ1ZTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmVycl9ub3RpZiA9IGZhbHNlLCAxMDAwMCk7CiAgICB9LAogICAgb25UaW1lU2VsZWN0ZWQoKSB7CiAgICAgIHRoaXMudGltZSA9IHRoaXMuY29udmVydFRvMTJIb3VyRm9ybWF0KHRoaXMudGltZSk7CiAgICB9LAogICAgY2hhbmdlVGltZSgpIHsgdGhpcy50aW1lID0gJycgfSwKICAgIGNvbnZlcnRUbzI0SG91ckZvcm1hdCh0aW1lMTIpIHsKICAgICAgLy8gU3BsaXQgdGhlIGlucHV0IHRpbWUgaW50byBob3VycywgbWludXRlcywgYW5kIEFNL1BNIHBhcnRzCiAgICAgIGNvbnN0IFt0aW1lUGFydCwgYW1wbV0gPSB0aW1lMTIuc3BsaXQoJyAnKTsKICAgICAgY29uc3QgW2hvdXJzLCBtaW51dGVzLCBzZWNvbmRzXSA9IHRpbWVQYXJ0LnNwbGl0KCc6Jyk7CgogICAgICAvLyBQYXJzZSB0aGUgaG91cnMgYXMgYW4gaW50ZWdlcgogICAgICBsZXQgY29udmVydGVkSG91cnMgPSBwYXJzZUludChob3VycywgMTApOwoKICAgICAgLy8gQWRqdXN0IHRoZSBob3VycyBiYXNlZCBvbiBBTSBvciBQTQogICAgICBpZiAoYW1wbS50b1VwcGVyQ2FzZSgpID09PSAnUE0nICYmIGNvbnZlcnRlZEhvdXJzICE9PSAxMikgewogICAgICAgIGNvbnZlcnRlZEhvdXJzICs9IDEyOwogICAgICB9IGVsc2UgaWYgKGFtcG0udG9VcHBlckNhc2UoKSA9PT0gJ0FNJyAmJiBjb252ZXJ0ZWRIb3VycyA9PT0gMTIpIHsKICAgICAgICBjb252ZXJ0ZWRIb3VycyA9IDA7CiAgICAgIH0KICAgICAgLy8gQ3JlYXRlIHRoZSAyNC1ob3VyIGZvcm1hdCB0aW1lIHN0cmluZwogICAgICBjb25zdCBjb252ZXJ0ZWRUaW1lID0gYCR7U3RyaW5nKGNvbnZlcnRlZEhvdXJzKS5wYWRTdGFydCgyLCAnMCcpfToke21pbnV0ZXN9OiR7c2Vjb25kc31gOwoKICAgICAgcmV0dXJuIGNvbnZlcnRlZFRpbWU7CiAgICB9LAogICAgY29udmVydFRvMTJIb3VyRm9ybWF0KHRpbWUyNCkgewogICAgICBjb25zdCBbaG91cnMsIG1pbnV0ZXNdID0gdGltZTI0LnNwbGl0KCI6Iik7CiAgICAgIGxldCBhbXBtID0gIkFNIjsKICAgICAgbGV0IGNvbnZlcnRlZEhvdXJzID0gcGFyc2VJbnQoaG91cnMsIDEwKTsKICAgICAgaWYgKGNvbnZlcnRlZEhvdXJzID49IDEyKSB7CiAgICAgICAgYW1wbSA9ICJQTSI7CiAgICAgICAgaWYgKGNvbnZlcnRlZEhvdXJzID4gMTIpIHsKICAgICAgICAgIGNvbnZlcnRlZEhvdXJzIC09IDEyOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChjb252ZXJ0ZWRIb3VycyA9PT0gMCkgewogICAgICAgIGNvbnZlcnRlZEhvdXJzID0gMTI7IC8vIE1pZG5pZ2h0IGluIDEyLWhvdXIgZm9ybWF0IGlzIDEyOjAwIEFNCiAgICAgIH0KICAgICAgY29uc3QgbmV3X3RpbWUgPSBgJHtTdHJpbmcoY29udmVydGVkSG91cnMpLnBhZFN0YXJ0KDIsICIwIil9OiR7bWludXRlc306MDAgJHthbXBtfWA7CiAgICAgIHJldHVybiBuZXdfdGltZTsKICAgIH0sCiAgICBnZXRDdXJyZW50SG91cigpIHsKICAgICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpOwogICAgICBjb25zdCBjdXJyZW50SG91ciA9IGN1cnJlbnREYXRlLmdldEhvdXJzKCk7CgogICAgICByZXR1cm4gcGFyc2VJbnQoY3VycmVudEhvdXIpOwogICAgfSwKICAgIHN0YXJ0SG91cigpewogICAgICBpZiAodGhpcy5kYXRlID09IHRoaXMuZGF0ZVRvZGF5KCkpIHsKICAgICAgICBjb25zdCBob3VyID0gdGhpcy5nZXRDdXJyZW50SG91cigpOwogICAgICAgIGlmIChob3VyID49IHBhcnNlSW50KHRoaXMubWluVGltZS5zcGxpdCgiOiIpWzBdLCAxMCkpIHJldHVybiBob3VyICsgMTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5taW5UaW1lLnNwbGl0KCI6IilbMF0sIDEwKTsKICAgICAgfQogICAgfSwKICAgIGVuZEhvdXIoKXsKICAgICAgcmV0dXJuIHBhcnNlSW50KHRoaXMubWF4VGltZS5zcGxpdCgiOiIpWzBdLCAxMCk7CiAgICB9LAogICAgYXN5bmMgc3VibWl0Rm9ybSgpIHsKICAgICAgdGhpcy5taW5UaW1lID0gdGhpcy5jb252ZXJ0VG8xMkhvdXJGb3JtYXQodGhpcy5taW5UaW1lKTsKICAgICAgdGhpcy5tYXhUaW1lID0gdGhpcy5jb252ZXJ0VG8xMkhvdXJGb3JtYXQodGhpcy5tYXhUaW1lKTsKICAgICAgdGhpcy52JC50aW1lLiR0b3VjaCgpOwogICAgICBpZiAodGhpcy52JC4kZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InKTsKICAgICAgICBjb25zb2xlLmxvZygnZXJyb3IgdGltZTogJywgdGhpcy50aW1lKTsKICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Jtc2c6ICcsIHRoaXMudiQuJGVycm9ycyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVfY2FydF9pdGVtKCk7CiAgICAgIH0KICAgICAgdGhpcy5taW5UaW1lID0gdGhpcy5jb252ZXJ0VG8yNEhvdXJGb3JtYXQodGhpcy5taW5UaW1lKTsKICAgICAgdGhpcy5tYXhUaW1lID0gdGhpcy5jb252ZXJ0VG8yNEhvdXJGb3JtYXQodGhpcy5tYXhUaW1lKTsKICAgICAgY29uc3QgdGltZTI0ID0gdGhpcy50aW1lLnRyaW0oKTsKICAgICAgaWYgKHRpbWUyNC5tYXRjaCgvXlxkezJ9OlxkezJ9JC8pKSB7CiAgICAgICAgdGhpcy5jb252ZXJ0ZWRUaW1lID0gdGhpcy5jb252ZXJ0VG8xMkhvdXJGb3JtYXQodGltZTI0KTsKICAgICAgfQogICAgICBjb25zb2xlLmxvZygnVVBEQVRFRCBUSU1FOiAnLHRoaXMuY29udmVydGVkVGltZSk7CiAgICB9LAogICAgaGFuZGxlRGF0ZVNlbGVjdGVkKHBhcmFtcywgaXRlbSkgewogICAgICBsZXQgcmFuZ2UgPSBpdGVtLnRpbWVTbG90W3RoaXMuZmluZERhdGVSYW5nZUluZGV4KGl0ZW0udGltZVNsb3QsIHBhcmFtcyldOwogICAgICAgIC8vIGNvbnNvbGUubG9nKCd0aW1lc2xvdCBpbmZvIGlzOiAnLCByYW5nZSk7CiAgICAgIHRoaXMubWluVGltZSA9IHJhbmdlLnN0YXJ0VGltZTsKICAgICAgdGhpcy5tYXhUaW1lID0gcmFuZ2UuZW5kVGltZTsKICAgICAgdGhpcy5kdXJhdGlvbiA9IHJhbmdlLmR1cmF0aW9uOwogICAgICBjb25zb2xlLmxvZygncmFuZ2U6ICcscmFuZ2UpOwogICAgICBpZiAocmFuZ2UuZHVyYXRpb24gIT09IG51bGwpIHsKICAgICAgICB0aGlzLm9wZW5fdGltZSA9IGZhbHNlOwogICAgICAgIHRoaXMudGltZSA9ICcnOwogICAgICAgIHRoaXMuYXZhaWxhYmxlX3RpbWVzbG90ID0gdGhpcy5jcmVhdGVBdmFpbGFibGVUaW1lU2xvdChyYW5nZS5zdGFydFRpbWUsIHJhbmdlLmVuZFRpbWUsIHJhbmdlLmR1cmF0aW9uLCByYW5nZS5pbnRlcnZhbCwgcGFyYW1zLCBpdGVtLmNhcnRJdGVtKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMub3Blbl90aW1lID0gdHJ1ZTsKICAgICAgfQogICAgICAvLyBUaGlzIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCB3aGVuIGEgZGF0ZSBpcyBzZWxlY3RlZAogICAgICB0aGlzLmRhdGUgPSBwYXJhbXM7CiAgICAgIHRoaXMuc2VydmljZSA9IGl0ZW07CiAgICAgIGNvbnNvbGUubG9nKCdTZWxlY3RlZCBkYXRlOicsIHBhcmFtcywgaXRlbSk7CiAgICB9LAogICAgZmluZERhdGVSYW5nZUluZGV4KGRhdGVSYW5nZXMsIHRhcmdldERhdGUpIHsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRhcmdldERhdGUpOyAvLyBDb252ZXJ0IHRhcmdldERhdGUgdG8gYSBEYXRlIG9iamVjdAogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGVSYW5nZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB7IHN0YXJ0RGF0ZSwgZW5kRGF0ZSB9ID0gZGF0ZVJhbmdlc1tpXTsKCiAgICAgICAgaWYgKGRhdGUgPj0gbmV3IERhdGUoc3RhcnREYXRlKSAmJiBkYXRlIDw9IG5ldyBEYXRlKGVuZERhdGUpKSB7CiAgICAgICAgICByZXR1cm4gaTsgLy8gUmV0dXJuIHRoZSBpbmRleCBpZiB0aGUgZGF0ZSBpcyB3aXRoaW4gdGhlIHJhbmdlCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiAtMTsgLy8gUmV0dXJuIC0xIGlmIHRoZSBkYXRlIGlzIG5vdCBmb3VuZCBpbiBhbnkgcmFuZ2UKICAgIH0sCiAgICBkYXRlVG9kYXkoKSB7CiAgICAgIC8vIENyZWF0ZSBhIERhdGUgb2JqZWN0IHdpdGggdGhlIGRlc2lyZWQgZGF0ZSAoZS5nLiwgdGhlIGN1cnJlbnQgZGF0ZSkKICAgICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpOwoKICAgICAgLy8gR2V0IHRoZSBkYXksIG1vbnRoLCBhbmQgeWVhciBjb21wb25lbnRzCiAgICAgIGNvbnN0IGRheSA9IGN1cnJlbnREYXRlLmdldERhdGUoKTsgLy8gMS0zMQogICAgICBjb25zdCBtb250aCA9IGN1cnJlbnREYXRlLmdldE1vbnRoKCkgKyAxOyAvLyAwLTExIChKYW51YXJ5IGlzIDAsIHNvIGFkZCAxKQogICAgICBjb25zdCB5ZWFyID0gY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTsgLy8gNC1kaWdpdCB5ZWFyCiAgICAgIGNvbnN0IGZvcm1hdHRlZERheSA9IFN0cmluZyhkYXkpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgIGNvbnN0IGZvcm1hdHRlZE1vbnRoID0gU3RyaW5nKG1vbnRoKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICByZXR1cm4gYCR7eWVhcn0tJHtmb3JtYXR0ZWRNb250aH0tJHtmb3JtYXR0ZWREYXl9YDsKICAgIH0sCiAgICBmb3JtYXRfZGF0ZShwYXJhbXMpIHsKICAgICAgcmV0dXJuIHBhcmFtcy5kYXRlCiAgICB9LAogICAgY3JlYXRlQXZhaWxhYmxlVGltZVNsb3Qoc3RhcnRfdGltZV9zdHIsIGVuZF90aW1lX3N0ciwgZHVyYXRpb24sIGludGVydmFsLCBkYXRlX3NlbGVjdGVkLCBpdGVtKSB7CiAgICAgIGNvbnN0IGRhdGVfc2VsZWN0ZWRfZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRMb25nRGF0ZShkYXRlX3NlbGVjdGVkKTsKICAgICAgY29uc3QgaG91ciA9IHRoaXMuZ2V0Q3VycmVudEhvdXIoKTsKICAgICAgbGV0IGVkaXRlZF9zdGFydF90aW1lID0gMDsKICAgICAgaWYgKHRoaXMuZGF0ZVRvZGF5KCkgPT0gZGF0ZV9zZWxlY3RlZF9mb3JtYXR0ZWQpIHsKICAgICAgICBjb25zdCB0aW1lQ29tcG9uZW50cyA9IHN0YXJ0X3RpbWVfc3RyLnNwbGl0KCI6Iik7CiAgICAgICAgLy8gRXh0cmFjdCB0aGUgaG91ciBjb21wb25lbnQgKHRoZSBmaXJzdCBlbGVtZW50IGFmdGVyIHNwbGl0dGluZykKICAgICAgICBjb25zdCBzZWxlY3RlZEhvdXIgPSBwYXJzZUludCh0aW1lQ29tcG9uZW50c1swXSwgMTApOwogICAgICAgIGlmIChob3VyID49IHNlbGVjdGVkSG91cikgewogICAgICAgICAgY29uc29sZS5sb2coaG91ciA+PSBzdGFydF90aW1lX3N0ciwgJ0hPVVInKQogICAgICAgICAgZWRpdGVkX3N0YXJ0X3RpbWUgPSBgJHtob3VyICsgMX06MDA6MDBgOwogICAgICAgIH0KICAgICAgfQogICAgICBjb25zb2xlLmxvZygnZWRpdGVkX3N0YXJ0X3RpbWUnLGVkaXRlZF9zdGFydF90aW1lKQogICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGVUb2RheSgpID09IGRhdGVfc2VsZWN0ZWRfZm9ybWF0dGVkLHRoaXMuZGF0ZVRvZGF5KCksZGF0ZV9zZWxlY3RlZF9mb3JtYXR0ZWQpCiAgICAgIGlmIChkdXJhdGlvbiA9PSBudWxsKSBkdXJhdGlvbiA9IDA7CiAgICAgIGNvbnN0IGF2YWlsYWJsZVRpbWVTbG90cyA9IFtdOwogICAgICBjb25zdCBzdGFydFRpbWUgPSBlZGl0ZWRfc3RhcnRfdGltZSA9PSAwID8gdGhpcy5wYXJzZVRpbWUoc3RhcnRfdGltZV9zdHIpIDogdGhpcy5wYXJzZVRpbWUoZWRpdGVkX3N0YXJ0X3RpbWUpOwogICAgICBjb25zb2xlLmxvZygnc3RhcnRUaW1lOiAnLCBzdGFydFRpbWUsICd0aGlzLnBhcnNlVGltZShzdGFydF90aW1lX3N0cik6ICcsIHRoaXMucGFyc2VUaW1lKHN0YXJ0X3RpbWVfc3RyKSkKICAgICAgY29uc3QgZW5kVGltZSA9IHRoaXMucGFyc2VUaW1lKGVuZF90aW1lX3N0cik7CgogICAgICBsZXQgY3VycmVudFRpbWUgPSBuZXcgRGF0ZShzdGFydFRpbWUpOwoKICAgICAgd2hpbGUgKGN1cnJlbnRUaW1lIDw9IGVuZFRpbWUpIHsKICAgICAgICBhdmFpbGFibGVUaW1lU2xvdHMucHVzaCh7dmFsdWU6IHRoaXMuZm9ybWF0VGltZShjdXJyZW50VGltZSksIGxhYmVsOiB0aGlzLmZvcm1hdFRpbWUoY3VycmVudFRpbWUpfSk7CiAgICAgICAgY3VycmVudFRpbWUgPSB0aGlzLmFkZE1pbnV0ZXMoY3VycmVudFRpbWUsIGR1cmF0aW9uKTsgLy8gSW5jcmVtZW50IGJ5IGR1cmF0aW9uLCBub3QgaW50ZXJ2YWwKICAgICAgICBjdXJyZW50VGltZSA9IHRoaXMuYWRkTWludXRlcyhjdXJyZW50VGltZSwgaW50ZXJ2YWwpOyAvLyBBZGQgdGhlIHJlbWFpbmluZyBpbnRlcnZhbAogICAgICB9CiAgICAgIAogICAgICBjb25zdCBkYXRlT2JqZWN0ID0gbmV3IERhdGUoZGF0ZV9zZWxlY3RlZCk7CiAgICAgIGxldCBuZXdfdGltZXNsb3QgPSBbXTsKICAgICAgLy8gRm9ybWF0IGl0IGFzIGEgZGF0ZSBzdHJpbmcKICAgICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IGRhdGVPYmplY3QudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICBmb3IgKGxldCBpPTA7IGk8aXRlbS5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChpdGVtW2ldLmRhdGUgPT0gZm9ybWF0dGVkRGF0ZSkgewogICAgICAgICAgY29uc3QgZGF0ZU9iamVjdCA9IG5ldyBEYXRlKGl0ZW1baV0udGltZSk7CgogICAgICAgICAgLy8gRm9ybWF0IGl0IGFzIGEgdGltZSBzdHJpbmcKICAgICAgICAgIC8vIENyZWF0ZSBhbiBJbnRsLkRhdGVUaW1lRm9ybWF0IG9iamVjdCB3aXRoIHRoZSBkZXNpcmVkIHRpbWUgem9uZQogICAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2VuLVVTJywgewogICAgICAgICAgICBob3VyOiAnbnVtZXJpYycsCiAgICAgICAgICAgIG1pbnV0ZTogJ251bWVyaWMnLAogICAgICAgICAgICBzZWNvbmQ6ICdudW1lcmljJywKICAgICAgICAgICAgdGltZVpvbmU6ICdVVEMnIC8vIFNldCB0aGUgZGVzaXJlZCB0aW1lIHpvbmUKICAgICAgICAgIH0pOwoKICAgICAgICAgIC8vIEZvcm1hdCB0aGUgZGF0ZSBvYmplY3QKICAgICAgICAgIGNvbnN0IHRpbWVTdHJpbmcgPSBmb3JtYXR0ZXIuZm9ybWF0KGRhdGVPYmplY3QpOwogICAgICAgICAgbmV3X3RpbWVzbG90ID0gYXZhaWxhYmxlVGltZVNsb3RzLmZpbHRlcihpdGVtID0+IGl0ZW0udmFsdWUgIT09IHRpbWVTdHJpbmcpOwogICAgICAgIH0KICAgICAgfQogICAgICBjb25zb2xlLmxvZygnYXZhaWxhYmxlIHRpbWVzbG90OiAnLCBhdmFpbGFibGVUaW1lU2xvdHMpOyAgICAgIAogICAgICBjb25zb2xlLmxvZygnbmV3X3RpbWVzbG90JyxuZXdfdGltZXNsb3QpCiAgICAgIHJldHVybiBuZXdfdGltZXNsb3QubGVuZ3RoID4gMCA/IG5ld190aW1lc2xvdCA6IGF2YWlsYWJsZVRpbWVTbG90czsKICAgIH0sCiAgICBwYXJzZVRpbWUodGltZVN0cikgewogICAgICBjb25zdCBbaG91cnMsIG1pbnV0ZXNdID0gdGltZVN0ci5zcGxpdCgnOicpLm1hcChOdW1iZXIpOwogICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgZGF0ZS5zZXRIb3Vycyhob3VycywgbWludXRlcywgMCwgMCk7CiAgICAgIHJldHVybiBkYXRlOwogICAgfSwKICAgIGZvcm1hdFRpbWUodGltZSkgewogICAgICByZXR1cm4gdGltZS50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLVVTJywgeyBob3VyMTI6IHRydWUgfSk7CiAgICB9LAogICAgYWRkTWludXRlcyh0aW1lLCBtaW51dGVzKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZSh0aW1lLmdldFRpbWUoKSArIG1pbnV0ZXMgKiA2MDAwMCk7CiAgICB9LAogICAgaGFuZGxlU2Nyb2xsKGV2ZW50KSB7CiAgICAgIGNvbnN0IGVsZW1lbnQgPSBldmVudC50YXJnZXQ7CiAgICAgIGNvbnN0IHNjcm9sbFNwZWVkID0gMTAwOyAvLyBBZGp1c3QgdGhpcyB2YWx1ZSB0byBjb250cm9sIHNjcm9sbGluZyBzcGVlZAoKICAgICAgaWYgKGV2ZW50LmRlbHRhWSAhPT0gMCkgewogICAgICAgIC8vIFByZXZlbnQgdmVydGljYWwgc2Nyb2xsaW5nCiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBob3Jpem9udGFsIHNjcm9sbCBhbW91bnQgYmFzZWQgb24gc2Nyb2xsIHNwZWVkIGFuZCBzY3JvbGwgZGlyZWN0aW9uCiAgICAgICAgY29uc3Qgc2Nyb2xsQW1vdW50ID0gZXZlbnQuZGVsdGFZID4gMCA/IHNjcm9sbFNwZWVkIDogLXNjcm9sbFNwZWVkOwoKICAgICAgICAvLyBTY3JvbGwgaG9yaXpvbnRhbGx5CiAgICAgICAgZWxlbWVudC5zY3JvbGxMZWZ0ICs9IHNjcm9sbEFtb3VudDsKICAgICAgfQogICAgfSwKICAgIG9wZW5Nb2RhbCgpIHsKICAgICAgLy8gVXNlIEphdmFTY3JpcHQgdG8gb3BlbiB0aGUgbW9kYWwKICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLm1vZGFsSWQpOwogICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICBtb2RhbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7CgogICAgICBjb25zdCBtb2RhbEJhY2tkcm9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIG1vZGFsQmFja2Ryb3AuY2xhc3NMaXN0LmFkZCgnbW9kYWwtYmFja2Ryb3AnLCAnZmFkZScsICdzaG93Jyk7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWxCYWNrZHJvcCk7CiAgICB9LAogICAgY2xvc2VNb2RhbCgpIHsKICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLm1vZGFsSWQpOwogICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7CiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIG1vZGFsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpOwoKICAgICAgY29uc3QgbW9kYWxCYWNrZHJvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1iYWNrZHJvcCcpOwogICAgICBtb2RhbEJhY2tkcm9wLnJlbW92ZSgpOwogICAgfSwKICAgIGdlbmVyYXRlX3NlcnZpY2VfbGluayhzZXJ2aWNlX2lkKSB7CiAgICAgIHJldHVybiBgL3NlcnZpY2VfY2F0ZWdvcmllcy8ke3RoaXMuJHJvdXRlLnBhcmFtcy5jYXRlZ29yeUlkfS9zZXJ2aWNlcy8ke3NlcnZpY2VfaWR9YDsKICAgIH0sCiAgICBmb3JtYXRUb1BIUChudW1iZXIpIHsKICAgICAgLy8gQ29udmVydCB0aGUgbnVtYmVyIHRvIGEgc3RyaW5nIHdpdGggdHdvIGRlY2ltYWwgcGxhY2VzCiAgICAgIGNvbnN0IGZvcm1hdHRlZE51bWJlciA9IE51bWJlcihudW1iZXIpLnRvRml4ZWQoMik7CgogICAgICAvLyBBZGQgIlBIUCAiIHRvIHRoZSBmb3JtYXR0ZWQgbnVtYmVyIGFuZCB1c2UgY29tbWFzIGFzIGEgdGhvdXNhbmRzIHNlcGFyYXRvcgogICAgICBjb25zdCByZXN1bHQgPSBgUEhQICR7Zm9ybWF0dGVkTnVtYmVyLnJlcGxhY2UoL1xCKD89KFxkezN9KSsoPyFcZCkpL2csICcsICcpfWA7CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIHRpbWVzdGFtcFRvZGF0ZSh0aW1lc3RhbXApIHsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCk7CiAgICAgIC8vIEV4dHJhY3QgdGhlIGNvbXBvbmVudHMgKG1vbnRoLCBkYXksIHllYXIpCiAgICAgIGNvbnN0IG1vbnRoID0gKGRhdGUuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsgLy8gQWRkIDEgYmVjYXVzZSBtb250aHMgYXJlIHplcm8taW5kZXhlZAogICAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CgogICAgICAvLyBGb3JtYXQgdGhlIGRhdGUgYXMgTU0tREQtWVlZWQogICAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDsKICAgIH0sIAogICAgZ2V0RGlzYWJsZWREYXRlcyhkYXRlcykgewogICAgICBsZXQgZW5hYmxlZERhdGVzID0gW107CiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTsgLy8gR2V0IHRvZGF5J3MgZGF0ZSBhcyBhIERhdGUgb2JqZWN0CgogICAgICBmb3IgKGNvbnN0IGRhdGUgb2YgZGF0ZXMpIHsKICAgICAgICBjb25zdCBmcm9tID0gbmV3IERhdGUoZGF0ZS5zdGFydERhdGUpOyAvLyBDb252ZXJ0IHRvIERhdGUgb2JqZWN0CiAgICAgICAgY29uc3QgdG8gPSBuZXcgRGF0ZShkYXRlLmVuZERhdGUpOyAvLyBDb252ZXJ0IHRvIERhdGUgb2JqZWN0CgogICAgICAgIC8vIENyZWF0ZSBhbiBhcnJheSBvZiBkYXRlcyB3aXRoaW4gdGhlICdmcm9tJyBhbmQgJ3RvJyByYW5nZQogICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoZnJvbSk7CiAgICAgICAgd2hpbGUgKGN1cnJlbnREYXRlIDw9IHRvKSB7CiAgICAgICAgICBlbmFibGVkRGF0ZXMucHVzaChjdXJyZW50RGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0pOwogICAgICAgICAgY3VycmVudERhdGUuc2V0RGF0ZShjdXJyZW50RGF0ZS5nZXREYXRlKCkgKyAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IGRpc2FibGVfZGF0ZV9ieV9zbG90ID0gdGhpcy5kaXNhYmxlX2RhdGVfYnlfc2xvdF9mdW5jKCk7CgogICAgICByZXR1cm4gewogICAgICAgIGN1c3RvbVByZWRpY3RvcjogZGF0ZSA9PiB7CiAgICAgICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07IC8vIENvbnZlcnQgZGF0ZSB0byBhIHN0cmluZwogICAgICAgICAgLy8gRGlzYWJsZSBwYXN0IGRheXMKICAgICAgICAgIGlmIChkYXRlIDwgdG9kYXkpIHJldHVybiB0cnVlOwogICAgICAgICAgaWYgKHRoaXMuZGF0ZV9jaGVja2VkID09IGZhbHNlKSB7CiAgICAgICAgICAgIGlmIChkaXNhYmxlX2RhdGVfYnlfc2xvdC5pbmNsdWRlcyhmb3JtYXR0ZWREYXRlKSkgewogICAgICAgICAgICAgIHRoaXMuZGF0ZV9jaGVja2VkID09IHRydWU7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvLyBFbmFibGUgdG9kYXkncyBkYXRlIGFuZCBkYXRlcyB3aXRoaW4gdGhlIHNwZWNpZmllZCBkYXRlIHJhbmdlCiAgICAgICAgICByZXR1cm4gIWVuYWJsZWREYXRlcy5pbmNsdWRlcyhmb3JtYXR0ZWREYXRlKTsKICAgICAgICB9LAogICAgICB9OwogICAgfSwKICAgIGRpc2FibGVfZGF0ZV9ieV9zbG90X2Z1bmMoKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdESVNBQkxFIERBVEUgQlkgU0xPVCBGVU5DICcpCiAgICAgIGNvbnN0IHNlcnZpY2VfY2F0ZWdvcnkgPSB0aGlzLnNlcnZpY2VfYnlfY2F0ZWdvcnk7CiAgICAgIGxldCBkaXNhYmxlX2RhdGVfYnlfc2xvdCA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXJ2aWNlX2NhdGVnb3J5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzZXJ2aWNlX2NhdGVnb3J5W2ldLmNhcnRJdGVtVGFsbHkubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIC8vIFVzZSBmaW5kRGF0ZVJhbmdlSW5kZXggdG8gY2hlY2sgaWYgdGhlIGRhdGUgaXMgaW4gdGhlIHJhbmdlCiAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmZpbmREYXRlUmFuZ2VJbmRleChzZXJ2aWNlX2NhdGVnb3J5W2ldLnRpbWVTbG90LCBzZXJ2aWNlX2NhdGVnb3J5W2ldLmNhcnRJdGVtVGFsbHlbal0uZGF0ZSk7CiAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0aGUgZGF0ZTogJywgc2VydmljZV9jYXRlZ29yeVtpXS5jYXJ0SXRlbVRhbGx5W2pdLmRhdGUsICcgZm91bmQgaW4gJywgc2VydmljZV9jYXRlZ29yeVtpXS50aW1lU2xvdFtpbmRleF0uc3RhcnREYXRlLHNlcnZpY2VfY2F0ZWdvcnlbaV0udGltZVNsb3RbaW5kZXhdLmVuZERhdGUpCiAgICAgICAgICAgIGxldCBjYXBhY2l0eSA9IHNlcnZpY2VfY2F0ZWdvcnlbaV0udGltZVNsb3RbaW5kZXhdLmNhcGFjaXR5OwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2FwYWNpdHkgPj0gc2VydmljZV9jYXRlZ29yeVtpXS5jYXJ0SXRlbVRhbGx5W2pdLmNvdW50JyxjYXBhY2l0eSA+PSBzZXJ2aWNlX2NhdGVnb3J5W2ldLmNhcnRJdGVtVGFsbHlbal0uY291bnQsY2FwYWNpdHksc2VydmljZV9jYXRlZ29yeVtpXS5jYXJ0SXRlbVRhbGx5W2pdLmNvdW50KQogICAgICAgICAgICBpZiAoc2VydmljZV9jYXRlZ29yeVtpXS5jYXJ0SXRlbVRhbGx5W2pdLmNvdW50ID49IGNhcGFjaXR5KSBkaXNhYmxlX2RhdGVfYnlfc2xvdC5wdXNoKHNlcnZpY2VfY2F0ZWdvcnlbaV0uY2FydEl0ZW1UYWxseVtqXS5kYXRlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2coJ2Rpc2FibGVfZGF0ZV9ieV9zbG90OiAnLGRpc2FibGVfZGF0ZV9ieV9zbG90KQogICAgICByZXR1cm4gZGlzYWJsZV9kYXRlX2J5X3Nsb3Q7CiAgICB9LAogICAgZm9ybWF0RGF0ZShkYXRlVG9QYXJzZSkgewogICAgICBjb25zdCBkYXRlQ29tcG9uZW50cyA9IGRhdGVUb1BhcnNlLnNwbGl0KCctJyk7CiAgICAgIGNvbnN0IHllYXIgPSBwYXJzZUludChkYXRlQ29tcG9uZW50c1swXSk7CiAgICAgIGNvbnN0IG1vbnRoID0gcGFyc2VJbnQoZGF0ZUNvbXBvbmVudHNbMV0pIC0gMTsKICAgICAgY29uc3QgZGF5ID0gcGFyc2VJbnQoZGF0ZUNvbXBvbmVudHNbMl0pOwogICAgICBjb25zdCBqc0RhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5ICsgMSk7CiAgICAgIHJldHVybiBqc0RhdGU7CiAgICB9LAogICAgZm9ybWF0TG9uZ0RhdGUoZGF0ZVN0cmluZykgewogICAgICBjb25zdCBkYXRlT2JqZWN0ID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7CgogICAgICAvLyBHZXQgdGhlIHllYXIsIG1vbnRoLCBhbmQgZGF5IGNvbXBvbmVudHMKICAgICAgY29uc3QgeWVhciA9IGRhdGVPYmplY3QuZ2V0RnVsbFllYXIoKTsKICAgICAgY29uc3QgbW9udGggPSAoZGF0ZU9iamVjdC5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAiMCIpOyAvLyBBZGRpbmcgMSBiZWNhdXNlIG1vbnRocyBhcmUgMC1iYXNlZAogICAgICBjb25zdCBkYXkgPSBkYXRlT2JqZWN0LmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICIwIik7CgogICAgICAvLyBDcmVhdGUgdGhlICJZWVlZLU1NLUREIiBmb3JtYXR0ZWQgZGF0ZSBzdHJpbmcKICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWA7CiAgICB9LAogICAgYXN5bmMgZ2V0X3NlcnZpY2VfYnlfY2F0ZWdvcnkoKSB7CiAgICAgIGNvbnNvbGUubG9nKCdzZXJ2aWNlIGNhdGVnb3J5IGlkIGlzIG5vdycsIHRoaXMuc2VydmljZUNhdGVnb3J5SWQpCiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRhcG9sbG8ucXVlcnkoewogICAgICAgICAgcXVlcnk6IHJlcXVpcmUoJ0AvZ3JhcGhxbC9TZXJ2aWNlQnlDYXRlZ29yeS5ncWwnKSwKICAgICAgICAgIHZhcmlhYmxlczogeyBpZDogcGFyc2VJbnQodGhpcy4kcm91dGUucGFyYW1zLmNhdGVnb3J5SWQpfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2VydmljZV9ieV9jYXRlZ29yeSA9IHJlc3BvbnNlLmRhdGEuc2VydmljZUJ5Q2F0ZWdvcnk7CiAgICAgICAgY29uc29sZS5sb2coJ2xpc3Qgb2Ygc2VydmljZSBieSBjYXRlZ29yeScsdGhpcy5zZXJ2aWNlX2J5X2NhdGVnb3J5KTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBsaWtlOicsIGVycm9yKTsKICAgICAgfQogICAgfSwKICAgIGdldFNlcnZpY2VDYXRlZ29yeVVSTChpdGVtLCBpdGUpIHsKICAgICAgcmV0dXJuIGAvc2VydmljZV9jYXRlZ29yaWVzLyR7dGhpcy4kcm91dGUucGFyYW1zLmNhdGVnb3J5SWR9L3NlcnZpY2VzLyR7aXRlbS5pZH0vdGltZV9zbG90cy8ke2l0ZS5pZH1gOwogICAgfSwKICAgIGxvZ0N1cnJlbnRUaW1lKCkgewogICAgICBjb25zdCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCk7CiAgICAgIGNvbnNvbGUubG9nKGBDdXJyZW50IHRpbWUgaXM6ICR7Y3VycmVudFRpbWV9YCk7CiAgICB9LAogICAgdGltZXNsb3RfaW5mb19ldmVudCgpIHsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkgewogICAgICBjb25zdCBvZmZjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub2ZmY2FudmFzX3RpbWVzbG90X2luZm8nKTsKICAgICAgY29uc3QgdG9nZ2xlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZ2dsZUJ1dHRvbicpOwoKICAgICAgdG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgb2ZmY2FudmFzLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpOwogICAgICB9KTsKfSk7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5sb2dDdXJyZW50VGltZSgpOwogICAgdGhpcy5nZXRfc2VydmljZV9ieV9jYXRlZ29yeSgpOwogICAgdGhpcy50aW1lc2xvdF9pbmZvX2V2ZW50KCk7CiAgfSAKfQo="},{"version":3,"sources":["ServiceListCustomer.vue"],"names":[],"mappings":";AAiIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ServiceListCustomer.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container\">\n    <!-- <div class=\"tooltip_custom\">Hover over me\n      <span class=\"tooltiptext_custom\">Tooltip text</span>\n    </div> -->\n    <!-- <h1>Services</h1> -->\n    <!-- <button @click=\"openModal\">Open Modal</button>\n    <button id=\"toggleButton\">Toggle Offcanvas</button> -->\n    <!-- Use the Modal component -->\n    <ModalTest :modalId=\"modalId\">\n      <!-- Customize the content using slots -->\n      <template v-slot:header>Custom Modal Header</template>\n      <template v-slot:body>Custom Modal Body</template>\n      <template v-slot:footer>\n        <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeModal\">Close</button>\n        <button type=\"button\" class=\"btn btn-primary\">Save changes</button>\n      </template>\n    </ModalTest>\n    <div v-if=\"err_notif\" class=\"alert alert-danger alert-dismissible fade show\" role=\"alert\">\n      {{ err_message }} <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\" aria-label=\"Close\"></button>\n    </div>\n    <div class=\"row service_list_customer\">\n      <div class=\"col-md-6 service_list_customer_services\">\n        <div v-for=\"(item,index) in service_by_category\" :key=\"index\" class=\"\">\n          <div class=\"card service_box\">\n            <div class=\"row card-body service_item\" @click=\"showService(item)\">\n              <!-- <a class=\"service_link\" :href=\"generate_service_link(item.id)\"> -->\n              <h5>{{ item.name }}</h5>\n              <div class=\"col-md-4\">\n                <img v-if=\"calendar\" class=\"service_image\" :src=\"item.image\">\n                <img v-else class=\"service_image_whole\" :src=\"item.image\">\n                <!-- <p class=\"service_details\" v-if=\"!calendar\">{{ item.description }}</p> -->\n                <p class=\"service_details\" v-if=\"!calendar\">{{ formatToPHP(item.price) }}</p>\n              </div>\n              <!-- </a> -->\n              <div class=\"col-md-8\" v-if=\"calendar\">\n                <!-- :style=\"showTimeslotIndex === index ? 'display: block;' : 'display: none;'\" -->\n                <datepicker\n                  class=\"time\"\n                  :use-utc=\"true\"\n                  :disabled-dates=\"getDisabledDates(item.timeSlot)\"\n                  :day-cell-content=\"params => format_date(params)\"\n                  :inline=\"true\"\n                  @selected=\"params => handleDateSelected(params, item)\"\n                ></datepicker>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-6 hidden-sm hidden-xs service_list_customer_timeslot\">\n        <div class=\"offcanvas_timeslot_info\">\n          <h1 v-if=\"displayService != ''\">{{ displayService }}</h1>\n          <form @submit.prevent=\"submitForm\">\n            <div v-if=\"open_time == false\">\n              <p>Duration: {{ duration }}</p>\n              <p>Available Slot: {{ slot }}</p>  \n              <div v-if=\"time == '' && available_timeslot.length > 0\">\n                <p>Available timeslot:</p>\n                <div class=\"scrollable-container\">\n                  <div class=\"scrollable-list\">\n                    <div v-for=\"(timeOption, index) in available_timeslot\" :key=\"index\">\n                      <label class=\"radio-label\">\n                        <input\n                          type=\"radio\"\n                          :value=\"timeOption.value\"\n                          v-model=\"time\"\n                          name=\"timeOption\"\n                          class=\"radio-input\"\n                        />\n                        {{ timeOption.label }}\n                      </label>\n                    </div>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                    <p>test paragraph</p>\n                  </div>\n                </div>\n              </div>\n              <div v-else-if=\"time == '' && available_timeslot.length <= 0\">\n                <p v-if=\"maxTime != ''\">No open time slots on this day.</p>\n                <p v-else>Select a date for your appointment.</p>\n              </div>\n              <div v-else>\n                <p @click.prevent=\"changeTime\">Selected Time: {{ time }}</p>\n              </div>\n            </div>\n            <div v-else>\n              <vue2-timepicker \n                v-model=\"time\"\n                :hour-range=\"[[startHour(),endHour()]]\"\n                lazy\n                hide-clear-button\n                @change=\"onTimeSelected()\"\n              />\n              <p v-if=\"time != ''\">Selected Time: {{ time }}</p>\n            </div>\n            <input v-if=\"time != ''\" type=\"submit\" value=\"submit\">\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { required, helpers } from '@vuelidate/validators';\nimport { useVuelidate } from '@vuelidate/core'\nimport ModalTest from '@/components/ModalTest.vue';\nimport Datepicker from 'vuejs-datepicker';\nimport Vue2Timepicker from 'vue2-timepicker';\nexport default {\n  name: 'ServiceListCustomer',\n  setup () { return { v$: useVuelidate() } },\n  data() {\n    return {\n      service_by_category: [],\n      modalId: 'customModal',\n      available_timeslot: [],\n      duration: 0,\n      date: '',\n      open_time: false,\n      minTime: 0,\n      maxTime: 0,\n      time: '',\n      convertedTime: '',\n      service_id: '',\n      service: [],\n      slot: 0,\n      err_message: '',\n      err_notif: false,\n      date_checked: false,\n      calendar: true,\n      showCalendarIndex: 0,\n      displayService: '',\n    }\n  },\n  validations() {\n    const min_time = value => {\n      const selectedTime = new Date(`1970-01-01T${this.convertTo24HourFormat(value)}`);\n      console.log('min_time val: ', value, this.minTime)\n      const mintime = new Date(`1970-01-01T${this.convertTo24HourFormat(this.minTime)}`);\n      console.log('min_time result: ', selectedTime >= mintime)\n      return selectedTime >= mintime;\n    };\n    const max_time = value => {\n      const selectedTime = new Date(`1970-01-01T${this.convertTo24HourFormat(value)}`);\n      console.log('max_time val: ', value, this.maxTime)\n      const maxtime = new Date(`1970-01-01T${this.convertTo24HourFormat(this.maxTime)}`);\n      console.log('max_time result: ', selectedTime <= maxtime)\n      return selectedTime <= maxtime;\n    };\n    return {\n      time: {\n        required,\n        // validTime(value) {\n        //   const timePattern = /^([01]\\d|2[0-3]):([0-5]\\d)$/;\n        //   return timePattern.test(value);\n        // },\n        min_time: helpers.withMessage('The min time must be ' + this.minTime, min_time) ,     \n        max_time: helpers.withMessage('The max time must be ' + this.maxTime, max_time) ,     \n      },\n    }\n  },\n  components: {\n    Datepicker,\n    ModalTest,\n    Vue2Timepicker,\n  },\n  methods: {\n    showService(item) {\n      this.displayService = item.name\n      history.pushState(\n        {},\n        null,\n        this.$route.path + '/services/' + encodeURIComponent(item.id)\n      )\n    },\n    showCalendar(index) {\n      this.calendar = true;\n      this.showCalendarIndex = index;\n      console.log('showCalendar', index);\n    },\n    hideCalendar() {\n      this.calendar = false;\n      console.log('hide calendar')\n    },\n    isTimeInFormat() {\n      const timePattern = /^(0[1-9]|1[0-2]):[0-5][0-9]:[0-5][0-9] (AM|PM)$/;\n      return timePattern.test(this.time);\n    },\n    async create_cart_item() {\n      try {\n        const date = this.date;\n        const service_id = this.service.id;\n        const time = this.time;\n        console.log('serviceid is ', service_id)\n        console.log('date ', date);\n        console.log('time ', time)\n\n        const response = await this.$apollo.mutate({\n          mutation: require('@/graphql/CartItemCreate.gql'),\n          variables: {\n            serviceId: service_id,\n            date: date,\n            time: time,\n          },\n        });\n        console.log('response from server create cart item',response);\n        if (response.data.createCartItem.errors.length < 1) {\n          alert('SUCCESS !')\n          // this.$router.push('/cart')\n        } else {\n          this.handleError(response.data.createCartItem.errors[0]);\n        }\n      } catch (error) {\n        console.error('Error in create_cart_item:', error);\n        // Handle the error here, e.g., show an error message to the user.\n      }\n    },\n    handleError(errMsg) {\n      this.err_message = errMsg;\n      this.err_notif = true;\n      setTimeout(() => this.err_notif = false, 10000);\n    },\n    onTimeSelected() {\n      this.time = this.convertTo12HourFormat(this.time);\n    },\n    changeTime() { this.time = '' },\n    convertTo24HourFormat(time12) {\n      // Split the input time into hours, minutes, and AM/PM parts\n      const [timePart, ampm] = time12.split(' ');\n      const [hours, minutes, seconds] = timePart.split(':');\n\n      // Parse the hours as an integer\n      let convertedHours = parseInt(hours, 10);\n\n      // Adjust the hours based on AM or PM\n      if (ampm.toUpperCase() === 'PM' && convertedHours !== 12) {\n        convertedHours += 12;\n      } else if (ampm.toUpperCase() === 'AM' && convertedHours === 12) {\n        convertedHours = 0;\n      }\n      // Create the 24-hour format time string\n      const convertedTime = `${String(convertedHours).padStart(2, '0')}:${minutes}:${seconds}`;\n\n      return convertedTime;\n    },\n    convertTo12HourFormat(time24) {\n      const [hours, minutes] = time24.split(\":\");\n      let ampm = \"AM\";\n      let convertedHours = parseInt(hours, 10);\n      if (convertedHours >= 12) {\n        ampm = \"PM\";\n        if (convertedHours > 12) {\n          convertedHours -= 12;\n        }\n      } else if (convertedHours === 0) {\n        convertedHours = 12; // Midnight in 12-hour format is 12:00 AM\n      }\n      const new_time = `${String(convertedHours).padStart(2, \"0\")}:${minutes}:00 ${ampm}`;\n      return new_time;\n    },\n    getCurrentHour() {\n      const currentDate = new Date();\n      const currentHour = currentDate.getHours();\n\n      return parseInt(currentHour);\n    },\n    startHour(){\n      if (this.date == this.dateToday()) {\n        const hour = this.getCurrentHour();\n        if (hour >= parseInt(this.minTime.split(\":\")[0], 10)) return hour + 1;\n      } else {\n        return parseInt(this.minTime.split(\":\")[0], 10);\n      }\n    },\n    endHour(){\n      return parseInt(this.maxTime.split(\":\")[0], 10);\n    },\n    async submitForm() {\n      this.minTime = this.convertTo12HourFormat(this.minTime);\n      this.maxTime = this.convertTo12HourFormat(this.maxTime);\n      this.v$.time.$touch();\n      if (this.v$.$error) {\n        console.log('error');\n        console.log('error time: ', this.time);\n        console.log('errormsg: ', this.v$.$errors);\n      } else {\n        await this.create_cart_item();\n      }\n      this.minTime = this.convertTo24HourFormat(this.minTime);\n      this.maxTime = this.convertTo24HourFormat(this.maxTime);\n      const time24 = this.time.trim();\n      if (time24.match(/^\\d{2}:\\d{2}$/)) {\n        this.convertedTime = this.convertTo12HourFormat(time24);\n      }\n      console.log('UPDATED TIME: ',this.convertedTime);\n    },\n    handleDateSelected(params, item) {\n      let range = item.timeSlot[this.findDateRangeIndex(item.timeSlot, params)];\n        // console.log('timeslot info is: ', range);\n      this.minTime = range.startTime;\n      this.maxTime = range.endTime;\n      this.duration = range.duration;\n      console.log('range: ',range);\n      if (range.duration !== null) {\n        this.open_time = false;\n        this.time = '';\n        this.available_timeslot = this.createAvailableTimeSlot(range.startTime, range.endTime, range.duration, range.interval, params, item.cartItem)\n      } else {\n        this.open_time = true;\n      }\n      // This method will be called when a date is selected\n      this.date = params;\n      this.service = item;\n      console.log('Selected date:', params, item);\n    },\n    findDateRangeIndex(dateRanges, targetDate) {\n      const date = new Date(targetDate); // Convert targetDate to a Date object\n      for (let i = 0; i < dateRanges.length; i++) {\n        const { startDate, endDate } = dateRanges[i];\n\n        if (date >= new Date(startDate) && date <= new Date(endDate)) {\n          return i; // Return the index if the date is within the range\n        }\n      }\n      return -1; // Return -1 if the date is not found in any range\n    },\n    dateToday() {\n      // Create a Date object with the desired date (e.g., the current date)\n      const currentDate = new Date();\n\n      // Get the day, month, and year components\n      const day = currentDate.getDate(); // 1-31\n      const month = currentDate.getMonth() + 1; // 0-11 (January is 0, so add 1)\n      const year = currentDate.getFullYear(); // 4-digit year\n      const formattedDay = String(day).padStart(2, '0');\n      const formattedMonth = String(month).padStart(2, '0');\n      return `${year}-${formattedMonth}-${formattedDay}`;\n    },\n    format_date(params) {\n      return params.date\n    },\n    createAvailableTimeSlot(start_time_str, end_time_str, duration, interval, date_selected, item) {\n      const date_selected_formatted = this.formatLongDate(date_selected);\n      const hour = this.getCurrentHour();\n      let edited_start_time = 0;\n      if (this.dateToday() == date_selected_formatted) {\n        const timeComponents = start_time_str.split(\":\");\n        // Extract the hour component (the first element after splitting)\n        const selectedHour = parseInt(timeComponents[0], 10);\n        if (hour >= selectedHour) {\n          console.log(hour >= start_time_str, 'HOUR')\n          edited_start_time = `${hour + 1}:00:00`;\n        }\n      }\n      console.log('edited_start_time',edited_start_time)\n      console.log(this.dateToday() == date_selected_formatted,this.dateToday(),date_selected_formatted)\n      if (duration == null) duration = 0;\n      const availableTimeSlots = [];\n      const startTime = edited_start_time == 0 ? this.parseTime(start_time_str) : this.parseTime(edited_start_time);\n      console.log('startTime: ', startTime, 'this.parseTime(start_time_str): ', this.parseTime(start_time_str))\n      const endTime = this.parseTime(end_time_str);\n\n      let currentTime = new Date(startTime);\n\n      while (currentTime <= endTime) {\n        availableTimeSlots.push({value: this.formatTime(currentTime), label: this.formatTime(currentTime)});\n        currentTime = this.addMinutes(currentTime, duration); // Increment by duration, not interval\n        currentTime = this.addMinutes(currentTime, interval); // Add the remaining interval\n      }\n      \n      const dateObject = new Date(date_selected);\n      let new_timeslot = [];\n      // Format it as a date string\n      const formattedDate = dateObject.toISOString().split('T')[0];\n      for (let i=0; i<item.length; i++) {\n        if (item[i].date == formattedDate) {\n          const dateObject = new Date(item[i].time);\n\n          // Format it as a time string\n          // Create an Intl.DateTimeFormat object with the desired time zone\n          const formatter = new Intl.DateTimeFormat('en-US', {\n            hour: 'numeric',\n            minute: 'numeric',\n            second: 'numeric',\n            timeZone: 'UTC' // Set the desired time zone\n          });\n\n          // Format the date object\n          const timeString = formatter.format(dateObject);\n          new_timeslot = availableTimeSlots.filter(item => item.value !== timeString);\n        }\n      }\n      console.log('available timeslot: ', availableTimeSlots);      \n      console.log('new_timeslot',new_timeslot)\n      return new_timeslot.length > 0 ? new_timeslot : availableTimeSlots;\n    },\n    parseTime(timeStr) {\n      const [hours, minutes] = timeStr.split(':').map(Number);\n      const date = new Date();\n      date.setHours(hours, minutes, 0, 0);\n      return date;\n    },\n    formatTime(time) {\n      return time.toLocaleTimeString('en-US', { hour12: true });\n    },\n    addMinutes(time, minutes) {\n      return new Date(time.getTime() + minutes * 60000);\n    },\n    handleScroll(event) {\n      const element = event.target;\n      const scrollSpeed = 100; // Adjust this value to control scrolling speed\n\n      if (event.deltaY !== 0) {\n        // Prevent vertical scrolling\n        event.preventDefault();\n\n        // Calculate the horizontal scroll amount based on scroll speed and scroll direction\n        const scrollAmount = event.deltaY > 0 ? scrollSpeed : -scrollSpeed;\n\n        // Scroll horizontally\n        element.scrollLeft += scrollAmount;\n      }\n    },\n    openModal() {\n      // Use JavaScript to open the modal\n      const modal = document.getElementById(this.modalId);\n      modal.classList.add('show');\n      modal.style.display = 'block';\n      modal.setAttribute('aria-hidden', 'false');\n\n      const modalBackdrop = document.createElement('div');\n      modalBackdrop.classList.add('modal-backdrop', 'fade', 'show');\n      document.body.appendChild(modalBackdrop);\n    },\n    closeModal() {\n      const modal = document.getElementById(this.modalId);\n      modal.classList.remove('show');\n      modal.style.display = 'none';\n      modal.setAttribute('aria-hidden', 'true');\n\n      const modalBackdrop = document.querySelector('.modal-backdrop');\n      modalBackdrop.remove();\n    },\n    generate_service_link(service_id) {\n      return `/service_categories/${this.$route.params.categoryId}/services/${service_id}`;\n    },\n    formatToPHP(number) {\n      // Convert the number to a string with two decimal places\n      const formattedNumber = Number(number).toFixed(2);\n\n      // Add \"PHP \" to the formatted number and use commas as a thousands separator\n      const result = `PHP ${formattedNumber.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ', ')}`;\n\n      return result;\n    },\n    timestampTodate(timestamp) {\n      const date = new Date(timestamp);\n      // Extract the components (month, day, year)\n      const month = (date.getMonth() + 1).toString().padStart(2, '0'); // Add 1 because months are zero-indexed\n      const day = date.getDate().toString().padStart(2, '0');\n      const year = date.getFullYear();\n\n      // Format the date as MM-DD-YYYY\n      return `${year}-${month}-${day}`;\n    }, \n    getDisabledDates(dates) {\n      let enabledDates = [];\n      const today = new Date(); // Get today's date as a Date object\n\n      for (const date of dates) {\n        const from = new Date(date.startDate); // Convert to Date object\n        const to = new Date(date.endDate); // Convert to Date object\n\n        // Create an array of dates within the 'from' and 'to' range\n        const currentDate = new Date(from);\n        while (currentDate <= to) {\n          enabledDates.push(currentDate.toISOString().split('T')[0]);\n          currentDate.setDate(currentDate.getDate() + 1);\n        }\n      }\n\n      const disable_date_by_slot = this.disable_date_by_slot_func();\n\n      return {\n        customPredictor: date => {\n          const formattedDate = date.toISOString().split('T')[0]; // Convert date to a string\n          // Disable past days\n          if (date < today) return true;\n          if (this.date_checked == false) {\n            if (disable_date_by_slot.includes(formattedDate)) {\n              this.date_checked == true;\n              return true;\n            }\n          }\n\n          // Enable today's date and dates within the specified date range\n          return !enabledDates.includes(formattedDate);\n        },\n      };\n    },\n    disable_date_by_slot_func() {\n      // console.log('DISABLE DATE BY SLOT FUNC ')\n      const service_category = this.service_by_category;\n      let disable_date_by_slot = [];\n\n      for (let i = 0; i < service_category.length; i++) {\n        for (let j = 0; j < service_category[i].cartItemTally.length; j++) {\n          // Use findDateRangeIndex to check if the date is in the range\n          let index = this.findDateRangeIndex(service_category[i].timeSlot, service_category[i].cartItemTally[j].date);\n          if (index !== -1) {\n            // console.log('the date: ', service_category[i].cartItemTally[j].date, ' found in ', service_category[i].timeSlot[index].startDate,service_category[i].timeSlot[index].endDate)\n            let capacity = service_category[i].timeSlot[index].capacity;\n            // console.log('capacity >= service_category[i].cartItemTally[j].count',capacity >= service_category[i].cartItemTally[j].count,capacity,service_category[i].cartItemTally[j].count)\n            if (service_category[i].cartItemTally[j].count >= capacity) disable_date_by_slot.push(service_category[i].cartItemTally[j].date);\n          }\n        }\n      }\n      // console.log('disable_date_by_slot: ',disable_date_by_slot)\n      return disable_date_by_slot;\n    },\n    formatDate(dateToParse) {\n      const dateComponents = dateToParse.split('-');\n      const year = parseInt(dateComponents[0]);\n      const month = parseInt(dateComponents[1]) - 1;\n      const day = parseInt(dateComponents[2]);\n      const jsDate = new Date(year, month, day + 1);\n      return jsDate;\n    },\n    formatLongDate(dateString) {\n      const dateObject = new Date(dateString);\n\n      // Get the year, month, and day components\n      const year = dateObject.getFullYear();\n      const month = (dateObject.getMonth() + 1).toString().padStart(2, \"0\"); // Adding 1 because months are 0-based\n      const day = dateObject.getDate().toString().padStart(2, \"0\");\n\n      // Create the \"YYYY-MM-DD\" formatted date string\n      return `${year}-${month}-${day}`;\n    },\n    async get_service_by_category() {\n      console.log('service category id is now', this.serviceCategoryId)\n      try {\n        const response = await this.$apollo.query({\n          query: require('@/graphql/ServiceByCategory.gql'),\n          variables: { id: parseInt(this.$route.params.categoryId)}\n        });\n        this.service_by_category = response.data.serviceByCategory;\n        console.log('list of service by category',this.service_by_category);\n      } catch (error) {\n        console.error('Error creating like:', error);\n      }\n    },\n    getServiceCategoryURL(item, ite) {\n      return `/service_categories/${this.$route.params.categoryId}/services/${item.id}/time_slots/${ite.id}`;\n    },\n    logCurrentTime() {\n      const currentTime = new Date().toLocaleTimeString();\n      console.log(`Current time is: ${currentTime}`);\n    },\n    timeslot_info_event() {\n      document.addEventListener('DOMContentLoaded', function() {\n      const offcanvas = document.querySelector('.offcanvas_timeslot_info');\n      const toggleButton = document.getElementById('toggleButton');\n\n      toggleButton.addEventListener('click', function() {\n        offcanvas.classList.toggle('active');\n      });\n});\n    }\n  },\n  mounted() {\n    this.logCurrentTime();\n    this.get_service_by_category();\n    this.timeslot_info_event();\n  } \n}\n</script>\n\n<style>\n.date_link {\n  text-decoration: none;\n}\n\n.date_num {\n  /* background-color: red; */\n  padding: 5px;\n}\n\nh5 {\n  font-family: Verdana, Geneva, Tahoma, sans-serif;\n  font-weight: bolder;\n  position: relative;\n  /* margin-bottom: 230px; */\n  /* margin-top: 220px; */\n  z-index: 2;\n  /* background-color: rgba(255, 255, 255, 0.5);  */\n}\n\n.service_list_customer {\n  /* border: 1px solid gray; */\n}\n\n.service_list_customer_timeslot {\n  position: sticky;\n  top: 0; /* Stick to the top of the parent container */ /* Occupy the full viewport height */\n  height: 100vh;\n}\n\n\n\n.test_customer_service {\n  display: inline-block;\n  white-space: nowrap !important;\n  margin-right: 40px;\n}\n\n/* Add your CSS styles for .service_list_customer_services here */\n.service_list_customer_services {\n  padding-bottom: 17px; /* Adjust for scrollbar height */\n  max-width: 100%; /* Ensure it takes up the available width */\n  height: 100%; /* Optionally, set a fixed height or use flexbox for layout */\n}\n\n.service_link {\n  text-decoration: none;\n  color:rgb(14, 12, 12);\n}\n\n.service_box, .service_item {\n  margin: 20px 0 0 auto;\n  width: 100%;\n}\n\n.service_item p {\n  font-weight: bold;\n  white-space: wrap;\n}\n\n.service_details {\n  z-index: 2;\n}\n\n.service_image {\n  opacity: .65;\n  z-index: 1;\n  border-radius: 5px 5px 0 0;\n  max-width: 100%; /* Ensure the image scales down proportionally */\n  height: 50%;    /* Maintain the aspect ratio */\n  width: 100%;    /* Set a maximum width if needed */\n  max-height: 300px;\n}\n\n.service_image_whole {\n  height: 200px;\n  top: 0;\n  opacity: .65;\n  z-index: 1;\n  border-radius: 5px 5px 0 0;\n  max-width: 100%; /* Ensure the image scales down proportionally */    /* Maintain the aspect ratio */\n  width: 100%;    /* Set a maximum width if needed */\n}\n\n.scrollable-list {\n  max-height: 100%; /* Allow the list to take the full height of the container */\n  overflow-y: auto;\n  border: 1px solid #ccc; /* Optional: Add a border for styling */\n  padding: 10px; /* Optional: Add padding for spacing */\n}\n\n.scrollable-container {\n  /* Hide any overflow outside of the container */\n  max-height: 100%;\n  overflow: hidden;\n}\n\n.offcanvas_timeslot_info {\n  max-height: 100%; /* Allow the container to take the full height of the parent */\n  margin-top: 20px;\n  /* width: 250px; */\n  width: 100%;\n  background-color: #fff;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\n  transition: left 0.3s;\n  z-index: 1;\n  overflow-y: auto;\n}\n\n.offcanvas_timeslot_info.active {\n  left: 0; /* Slide in from left */\n}\n\n/* Style for the radio label */\n.radio-label {\n  position: relative;\n  padding-left: 30px; /* Adjust the padding to your preference */\n  padding-bottom: 10px; /* Add margin between options */\n  cursor: pointer;\n}\n\n/* Style for the radio input (hide the default radio button) */\n.radio-input {\n  opacity: 0;\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n/* Style for the border when the radio input is checked */\n.radio-label::before {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 0;\n  transform: translateY(-50%);\n  width: 20px; /* Adjust the border width */\n  height: 20px; /* Adjust the border height */\n  border: 2px solid transparent; /* Define the border color and thickness */\n  border-radius: 50%; /* Create a circle border */\n  background-color: transparent; /* Remove background color */\n}\n\n/* Style for the border when the radio input is checked */\n.radio-input:checked + .radio-label::before {\n  border-color: #007bff; /* Define the border color when checked */\n}\n\n/* Increase font size by 5px on hover */\n.radio-label:hover {\n  font-size: calc(1em + 5px); /* Increase font size by 5px */\n}\n\n.tooltip_custom {\n  position: relative;\n}\n\n.tooltiptext_custom {\n  visibility: hidden;\n  width: 120px;\n  background-color: black;\n  color: #fff;\n  text-align: center;\n  border-radius: 6px;\n  padding: 5px 0;\n\n  /* Position the tooltip */\n  position: absolute;\n  z-index: 1;\n}\n\n.tooltip_custom:hover .tooltiptext_custom {\n  visibility: visible;\n}\n</style>\n"]}]}