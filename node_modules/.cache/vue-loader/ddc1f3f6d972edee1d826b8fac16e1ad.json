{"remainingRequest":"/home/bonifacio/code/service_bundle_frontend/node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!/home/bonifacio/code/service_bundle_frontend/src/components/ServiceListCustomer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/bonifacio/code/service_bundle_frontend/src/components/ServiceListCustomer.vue","mtime":1695241256792},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/babel-loader/lib/index.js","mtime":1692833949708},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1692838039149},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js","mtime":1692833961693}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBEYXRlcGlja2VyIGZyb20gJ3Z1ZWpzLWRhdGVwaWNrZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1NlcnZpY2VMaXN0Q3VzdG9tZXInLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZXJ2aWNlX2J5X2NhdGVnb3J5OiBbXSwKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsgRGF0ZXBpY2tlciwgfSwKICBtZXRob2RzOiB7IAogICAgZ2VuZXJhdGVfc2VydmljZV9saW5rKHNlcnZpY2VfaWQpIHsKICAgICAgcmV0dXJuIGAvc2VydmljZV9jYXRlZ29yaWVzLyR7dGhpcy4kcm91dGUucGFyYW1zLmNhdGVnb3J5SWR9L3NlcnZpY2VzLyR7c2VydmljZV9pZH1gOwogICAgfSwKICAgIGZvcm1hdFRvUEhQKG51bWJlcikgewogICAgICAvLyBDb252ZXJ0IHRoZSBudW1iZXIgdG8gYSBzdHJpbmcgd2l0aCB0d28gZGVjaW1hbCBwbGFjZXMKICAgICAgY29uc3QgZm9ybWF0dGVkTnVtYmVyID0gTnVtYmVyKG51bWJlcikudG9GaXhlZCgyKTsKCiAgICAgIC8vIEFkZCAiUEhQICIgdG8gdGhlIGZvcm1hdHRlZCBudW1iZXIgYW5kIHVzZSBjb21tYXMgYXMgYSB0aG91c2FuZHMgc2VwYXJhdG9yCiAgICAgIGNvbnN0IHJlc3VsdCA9IGBQSFAgJHtmb3JtYXR0ZWROdW1iZXIucmVwbGFjZSgvXEIoPz0oXGR7M30pKyg/IVxkKSkvZywgJywgJyl9YDsKCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogICAgdGltZXN0YW1wVG9kYXRlKHRpbWVzdGFtcCkgewogICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGltZXN0YW1wKTsKCiAgICAgIC8vIEV4dHJhY3QgdGhlIGNvbXBvbmVudHMgKG1vbnRoLCBkYXksIHllYXIpCiAgICAgIGNvbnN0IG1vbnRoID0gKGRhdGUuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsgLy8gQWRkIDEgYmVjYXVzZSBtb250aHMgYXJlIHplcm8taW5kZXhlZAogICAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CgogICAgICAvLyBGb3JtYXQgdGhlIGRhdGUgYXMgTU0tREQtWVlZWQogICAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDsKICAgIH0sCiAgICBmaW5kRGF0ZVJhbmdlSW5kZXgoZGF0ZVJhbmdlcywgdGFyZ2V0RGF0ZSkgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGVSYW5nZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB7IHN0YXJ0RGF0ZSwgZW5kRGF0ZSB9ID0gZGF0ZVJhbmdlc1tpXTsKICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGFyZ2V0RGF0ZSk7CgogICAgICAgIGlmIChkYXRlID49IG5ldyBEYXRlKHN0YXJ0RGF0ZSkgJiYgZGF0ZSA8PSBuZXcgRGF0ZShlbmREYXRlKSkgewogICAgICAgICAgcmV0dXJuIGk7IC8vIFJldHVybiB0aGUgaW5kZXggaWYgdGhlIGRhdGUgaXMgd2l0aGluIHRoZSByYW5nZQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gLTE7IC8vIFJldHVybiAtMSBpZiB0aGUgZGF0ZSBpcyBub3QgZm91bmQgaW4gYW55IHJhbmdlCiAgICB9LAogICAgZm9ybWF0X2RhdGUocGFyYW1zLCBpdGVtKSB7CiAgICAgIGlmIChwYXJhbXMuaXNEaXNhYmxlZCA9PSBmYWxzZSkgewogICAgICAgIGNvbnNvbGUubG9nKCdpdGVtIHZhcjogJywgaXRlbS50aW1lU2xvdCwgcGFyYW1zKQogICAgICAgIGNvbnNvbGUubG9nKCd0aGUgdGltZSBpczogJywgdGhpcy50aW1lc3RhbXBUb2RhdGUocGFyYW1zLnRpbWVzdGFtcCkpOwogICAgICAgIGxldCByYW5nZSA9IGl0ZW0udGltZVNsb3RbdGhpcy5maW5kRGF0ZVJhbmdlSW5kZXgoaXRlbS50aW1lU2xvdCwgdGhpcy50aW1lc3RhbXBUb2RhdGUocGFyYW1zLnRpbWVzdGFtcCkpXTsKICAgICAgICBjb25zb2xlLmxvZygndGltZXNsb3QgaW5mbyBpczogJywgcmFuZ2UpOwogICAgICAgIHJldHVybiBgPHNwYW4gY2xhc3M9ImRhdGVfbnVtIiBvbmNsaWNrPSJ3aW5kb3cubG9jYXRpb24uaHJlZj0nL3NlcnZpY2VfY2F0ZWdvcmllcy8ke3RoaXMuJHJvdXRlLnBhcmFtcy5jYXRlZ29yeUlkfS9zZXJ2aWNlcy8ke2l0ZW0uaWR9L3RpbWVfc2xvdHMvJHtyYW5nZS5pZH0/ZGF0ZT0ke3RoaXMudGltZXN0YW1wVG9kYXRlKHBhcmFtcy50aW1lc3RhbXApfSciPiR7cGFyYW1zLmRhdGV9PC9zcGFuPmA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHBhcmFtcy5kYXRlCiAgICAgIH0KICAgIH0sCiAgICBnZXREaXNhYmxlZERhdGVzKGRhdGVzKSB7CiAgICAgIGxldCBlbmFibGVkRGF0ZXMgPSBbXTsKCiAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiBkYXRlcykgewogICAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZvcm1hdERhdGUoZGF0ZS5zdGFydERhdGUpOwogICAgICAgIGNvbnN0IHRvID0gdGhpcy5mb3JtYXREYXRlKGRhdGUuZW5kRGF0ZSk7CgogICAgICAgIC8vIENyZWF0ZSBhbiBhcnJheSBvZiBkYXRlcyBiZXR3ZWVuICdmcm9tJyBhbmQgJ3RvJwogICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoZnJvbSk7CiAgICAgICAgd2hpbGUgKGN1cnJlbnREYXRlIDw9IG5ldyBEYXRlKHRvKSkgewogICAgICAgICAgZW5hYmxlZERhdGVzLnB1c2goY3VycmVudERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdKTsKICAgICAgICAgIGN1cnJlbnREYXRlLnNldERhdGUoY3VycmVudERhdGUuZ2V0RGF0ZSgpICsgMSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGN1c3RvbVByZWRpY3RvcjogZGF0ZSA9PiB7CiAgICAgICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gYCR7ZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF19YDsKICAgICAgICAgIHJldHVybiAhZW5hYmxlZERhdGVzLmluY2x1ZGVzKGZvcm1hdHRlZERhdGUpOwogICAgICAgIH0sCiAgICAgIH07CiAgICB9LAogICAgZm9ybWF0RGF0ZShkYXRlVG9QYXJzZSkgewogICAgICBjb25zdCBkYXRlQ29tcG9uZW50cyA9IGRhdGVUb1BhcnNlLnNwbGl0KCctJyk7CiAgICAgIGNvbnN0IHllYXIgPSBwYXJzZUludChkYXRlQ29tcG9uZW50c1swXSk7CiAgICAgIGNvbnN0IG1vbnRoID0gcGFyc2VJbnQoZGF0ZUNvbXBvbmVudHNbMV0pIC0gMTsKICAgICAgY29uc3QgZGF5ID0gcGFyc2VJbnQoZGF0ZUNvbXBvbmVudHNbMl0pOwogICAgICBjb25zdCBqc0RhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTsKICAgICAgcmV0dXJuIGpzRGF0ZTsKICAgIH0sCiAgICBhc3luYyBnZXRfc2VydmljZV9ieV9jYXRlZ29yeSgpIHsKICAgICAgY29uc29sZS5sb2coJ3NlcnZpY2UgY2F0ZWdvcnkgaWQgaXMgbm93JywgdGhpcy5zZXJ2aWNlQ2F0ZWdvcnlJZCkKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGFwb2xsby5xdWVyeSh7CiAgICAgICAgICBxdWVyeTogcmVxdWlyZSgnQC9ncmFwaHFsL1NlcnZpY2VCeUNhdGVnb3J5LmdxbCcpLAogICAgICAgICAgdmFyaWFibGVzOiB7IGlkOiBwYXJzZUludCh0aGlzLiRyb3V0ZS5wYXJhbXMuY2F0ZWdvcnlJZCl9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zZXJ2aWNlX2J5X2NhdGVnb3J5ID0gcmVzcG9uc2UuZGF0YS5zZXJ2aWNlQnlDYXRlZ29yeTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlcnZpY2VfYnlfY2F0ZWdvcnkpOwogICAgICB9IGNhdGNoIChlcnJvcikgeyAKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGxpa2U6JywgZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgZ2V0U2VydmljZUNhdGVnb3J5VVJMKGl0ZW0sIGl0ZSkgewogICAgICByZXR1cm4gYC9zZXJ2aWNlX2NhdGVnb3JpZXMvJHt0aGlzLiRyb3V0ZS5wYXJhbXMuY2F0ZWdvcnlJZH0vc2VydmljZXMvJHtpdGVtLmlkfS90aW1lX3Nsb3RzLyR7aXRlLmlkfWA7CiAgICB9ICAgIAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0X3NlcnZpY2VfYnlfY2F0ZWdvcnkoKQogIH0gCn0K"},{"version":3,"sources":["ServiceListCustomer.vue"],"names":[],"mappings":";AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ServiceListCustomer.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container\">\n    <h1>Services</h1>\n    <div class=\"row\">\n      <div v-for=\"(item, index) in service_by_category\" :key=\"index\" class=\"col-md-4 mb-3\">\n        <div class=\"card\">\n          <div class=\"card-body service_item\">\n            <a class=\"service_link\" :href=\"generate_service_link(item.id)\">\n              <h5>{{ item.name }}</h5>\n              <img class=\"service_image\" :src=\"item.image\" width=\"250px\" height=\"250px\">\n              <p class=\"service_details\">{{ item.description }}</p>\n              <p class=\"service_details\">{{ formatToPHP(item.price) }}</p>\n            </a>\n            <table class=\"table service_details\">\n              <thead>\n                <tr>\n                  <th>Schedule</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr>\n                  <div class=\"time\">\n                    <datepicker\n                    :disabled-dates=\"getDisabledDates(item.timeSlot)\"\n                    :day-cell-content=\"params => format_date(params, item)\"\n                    :inline=\"true\">\n                    </datepicker>\n                  </div>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Datepicker from 'vuejs-datepicker';\nexport default {\n  name: 'ServiceListCustomer',\n  data() {\n    return {\n      service_by_category: [],\n    }\n  },\n  components: { Datepicker, },\n  methods: { \n    generate_service_link(service_id) {\n      return `/service_categories/${this.$route.params.categoryId}/services/${service_id}`;\n    },\n    formatToPHP(number) {\n      // Convert the number to a string with two decimal places\n      const formattedNumber = Number(number).toFixed(2);\n\n      // Add \"PHP \" to the formatted number and use commas as a thousands separator\n      const result = `PHP ${formattedNumber.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ', ')}`;\n\n      return result;\n    },\n    timestampTodate(timestamp) {\n      const date = new Date(timestamp);\n\n      // Extract the components (month, day, year)\n      const month = (date.getMonth() + 1).toString().padStart(2, '0'); // Add 1 because months are zero-indexed\n      const day = date.getDate().toString().padStart(2, '0');\n      const year = date.getFullYear();\n\n      // Format the date as MM-DD-YYYY\n      return `${year}-${month}-${day}`;\n    },\n    findDateRangeIndex(dateRanges, targetDate) {\n      for (let i = 0; i < dateRanges.length; i++) {\n        const { startDate, endDate } = dateRanges[i];\n        const date = new Date(targetDate);\n\n        if (date >= new Date(startDate) && date <= new Date(endDate)) {\n          return i; // Return the index if the date is within the range\n        }\n      }\n      return -1; // Return -1 if the date is not found in any range\n    },\n    format_date(params, item) {\n      if (params.isDisabled == false) {\n        console.log('item var: ', item.timeSlot, params)\n        console.log('the time is: ', this.timestampTodate(params.timestamp));\n        let range = item.timeSlot[this.findDateRangeIndex(item.timeSlot, this.timestampTodate(params.timestamp))];\n        console.log('timeslot info is: ', range);\n        return `<span class=\"date_num\" onclick=\"window.location.href='/service_categories/${this.$route.params.categoryId}/services/${item.id}/time_slots/${range.id}?date=${this.timestampTodate(params.timestamp)}'\">${params.date}</span>`;\n      } else {\n        return params.date\n      }\n    },\n    getDisabledDates(dates) {\n      let enabledDates = [];\n\n      for (const date of dates) {\n        const from = this.formatDate(date.startDate);\n        const to = this.formatDate(date.endDate);\n\n        // Create an array of dates between 'from' and 'to'\n        const currentDate = new Date(from);\n        while (currentDate <= new Date(to)) {\n          enabledDates.push(currentDate.toISOString().split('T')[0]);\n          currentDate.setDate(currentDate.getDate() + 1);\n        }\n      }\n\n      return {\n        customPredictor: date => {\n          const formattedDate = `${date.toISOString().split('T')[0]}`;\n          return !enabledDates.includes(formattedDate);\n        },\n      };\n    },\n    formatDate(dateToParse) {\n      const dateComponents = dateToParse.split('-');\n      const year = parseInt(dateComponents[0]);\n      const month = parseInt(dateComponents[1]) - 1;\n      const day = parseInt(dateComponents[2]);\n      const jsDate = new Date(year, month, day);\n      return jsDate;\n    },\n    async get_service_by_category() {\n      console.log('service category id is now', this.serviceCategoryId)\n      try {\n        const response = await this.$apollo.query({\n          query: require('@/graphql/ServiceByCategory.gql'),\n          variables: { id: parseInt(this.$route.params.categoryId)}\n        });\n        this.service_by_category = response.data.serviceByCategory;\n        console.log(this.service_by_category);\n      } catch (error) { \n          console.error('Error creating like:', error);\n      }\n    },\n    getServiceCategoryURL(item, ite) {\n      return `/service_categories/${this.$route.params.categoryId}/services/${item.id}/time_slots/${ite.id}`;\n    }    \n  },\n  mounted() {\n    this.get_service_by_category()\n  } \n}\n</script>\n\n<style>\n.date_link {\n  text-decoration: none;\n}\n\n.date_num {\n  /* background-color: red; */\n  padding: 6px;\n}\n\nh5 {\n  font-family: Verdana, Geneva, Tahoma, sans-serif;\n  font-weight: bolder;\n  position: relative;\n  margin-bottom: 230px;\n  z-index: 2;\n  background-color: rgba(255, 255, 255, 0.7);\n}\n\n.service_link{\n  text-decoration: none;\n  color: black;\n}\n\n.service_item {\n  position: relative;\n  z-index: 0;\n}\n\n.service_item p {\n  font-weight: bold;\n}\n\n.service_details {\n  position: relative;\n  z-index: 2;\n}\n\n.service_image {\n  top: 10px;\n  position: absolute;\n  left: 50%; /* Move the element halfway across the viewport horizontally */\n  transform: translateX(-50%); /* Center the element */\n  z-index: 1;\n}\n</style>\n"]}]}