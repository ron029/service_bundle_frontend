{"remainingRequest":"/home/bonifacio/code/service_bundle_frontend/node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!/home/bonifacio/code/service_bundle_frontend/src/components/AppNavbar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/bonifacio/code/service_bundle_frontend/src/components/AppNavbar.vue","mtime":1698213723669},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/babel-loader/lib/index.js","mtime":1692833949708},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1692838039149},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js","mtime":1692833961693}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBCb29raW5nUGFnZSBmcm9tICdAL3ZpZXdzL0Jvb2tpbmdQYWdlLnZ1ZSc7CmltcG9ydCBTZXJ2aWNlUGFnZSBmcm9tICdAL3ZpZXdzL1NlcnZpY2VQYWdlLnZ1ZSc7CmltcG9ydCBTZXJ2aWNlQ2F0ZWdvcnlQYWdlIGZyb20gJ0Avdmlld3MvU2VydmljZUNhdGVnb3J5UGFnZS52dWUnOwppbXBvcnQgU2VydmljZU5ldyBmcm9tICdAL3ZpZXdzL1NlcnZpY2VOZXcudnVlJzsKaW1wb3J0IFNlcnZpY2VFZGl0IGZyb20gJ0Avdmlld3MvU2VydmljZUVkaXQudnVlJzsKaW1wb3J0IFJlZ2lzdGVyZWRQYWdlIGZyb20gJ0AvY29tcG9uZW50cy9SZWdpc3RlcmVkUGFnZS52dWUnOwoKaW1wb3J0IHsgbWFwU3RhdGUsIG1hcE11dGF0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBjcmVhdGVQcm92aWRlciwgb25Mb2dvdXQgfSBmcm9tICdAL3Z1ZS1hcG9sbG8nOwppbXBvcnQgbG9nb3V0IGZyb20gJ0AvZ3JhcGhxbC9Mb2dvdXQuZ3FsJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0FwcE5hdmJhcicsCiAgICBkYXRhKCl7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgY3VycmVudFBhZ2U6ICdib29raW5ncycsIC8vIEluaXRpYWwgcGFnZQogICAgICAgICAgICBzaG93TmV3OiBmYWxzZSwKICAgICAgICAgICAgc2hvd2VkaXQ6IGZhbHNlLAogICAgICAgICAgICBzZXJ2aWNlSWQ6IDEsCiAgICAgICAgICAgIGluZGV4VG9FZGl0OiAwLAogICAgICAgICAgICBuZXdTZXJ2aWNlOiBbXSwKICAgICAgICAgICAgdXBkYXRlU2VydmljZURldGFpbHM6IHt9LAogICAgICAgICAgICB1cGRhdGVTZXJ2aWNlVGltZVNsb3REYXRhOiB7fSwKICAgICAgICB9CiAgICB9LAogICAgY29tcG9uZW50czogewogICAgICAgIFNlcnZpY2VQYWdlLAogICAgICAgIEJvb2tpbmdQYWdlLAogICAgICAgIFNlcnZpY2VDYXRlZ29yeVBhZ2UsCiAgICAgICAgU2VydmljZU5ldywKICAgICAgICBTZXJ2aWNlRWRpdCwKICAgICAgICBSZWdpc3RlcmVkUGFnZQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLi4ubWFwU3RhdGUoWydpc0F1dGhlbnRpY2F0ZWQnLCAndXNlclJvbGUnXSksCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIHVwZGF0ZVNlcnZpY2VUaW1lU2xvdChkYXRhKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJBcHBOYXZiYXI6IHJlY2VpdmVkICd1cGRhdGVUaW1lU2xvdCcgZW1pdCBmcm9tICdTZXJ2aWNlRWRpdCcsIGRhdGE6ICIsIGRhdGEpOwogICAgICAgICAgICB0aGlzLnVwZGF0ZVNlcnZpY2VUaW1lU2xvdERhdGEgPSBkYXRhCiAgICAgICAgfSwKICAgICAgICB1cGRhdGVTZXJ2aWNlKGRhdGEpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ2FwcG5hdmJhcjogdXBkYXRlIHNlcnZpY2UgZGV0YWlsczogJywgZGF0YSk7CiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VydmljZURldGFpbHMgPSBkYXRhOwogICAgICAgIH0sCiAgICAgICAgZ2V0TGF0ZXN0U2VydmljZShkYXRhKSB7CiAgICAgICAgICAgIHRoaXMubmV3U2VydmljZSA9IGRhdGE7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGZyb20gYXBwbmF2YmFyLCB0aGUgbmV3IHNlcnZpY2UgaXM6ICcsIHRoaXMubmV3U2VydmljZSk7CiAgICAgICAgfSwKICAgICAgICBjdXJyZW50U2hvd1BhZ2UocGFnZSkgewogICAgICAgICAgICB0aGlzLnNob3dOZXcgPSBmYWxzZTsKICAgICAgICAgICAgLy8gdGhpcy5zaG93RWRpdCA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZQogICAgICAgIH0sCiAgICAgICAgc2hvd1NlcnZpY2VFZGl0KHBhcmFtcykgewogICAgICAgICAgICB0aGlzLnNlcnZpY2VJZCA9IHBhcnNlSW50KHBhcmFtcy5pZCk7CiAgICAgICAgICAgIC8vIHRoaXMuc2hvd0VkaXQgPSB0cnVlOwogICAgICAgICAgICB0aGlzLmluZGV4VG9FZGl0ID0gcGFyYW1zLmluZGV4OwogICAgICAgICAgICB0aGlzLnNob3dOZXcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9ICcnOwogICAgICAgICAgICBjb25zb2xlLmxvZygnYXBwbmF2YmFyOiB0aGlzIGlzIGFwcCBuYXYsIHRoZSBzZXJ2aWNlIGlkIHRvIGVkaXQgaXM6ICcsIHBhcmFtcy5pZCwgJyB3aXRoIGluZGV4OiAnLCBwYXJhbXMuaW5kZXgpCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHR5cGVvZiB0aGlzLnNlcnZpY2VJZCkKICAgICAgICB9LAogICAgICAgIHNob3dTZXJ2aWNlTmV3UGFnZSgpIHsKICAgICAgICAgICAgdGhpcy5zaG93TmV3ID0gdHJ1ZTsgCiAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAnJzsKICAgICAgICAgICAgLy8gdGhpcy5zaG93RWRpdCA9IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgZ2V0X3JvbGUoKSB7CiAgICAgICAgICAgIGNvbnN0IHVzZXJSb2xlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJSb2xlJyk7CiAgICAgICAgICAgIHJldHVybiB1c2VyUm9sZTsKICAgICAgICB9LAogICAgICAgIC4uLm1hcE11dGF0aW9ucyhbJ2NsZWFyQXV0aGVudGljYXRpb24nLCAnc2V0QXV0aGVudGljYXRlZCddKSwKICAgICAgICBhc3luYyBsb2dvdXQoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICAgICAgICAgICAgICBtdXRhdGlvbjogbG9nb3V0LAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBhd2FpdCBvbkxvZ291dChjcmVhdGVQcm92aWRlcik7CiAgICAgICAgICAgICAgICB0aGlzLnNldEF1dGhlbnRpY2F0ZWQoZmFsc2UpOwogICAgICAgICAgICAgICAgdGhpcy5jbGVhckF1dGhlbnRpY2F0aW9uKCk7CiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVVzZXJSb2xlKG51bGwpOwogICAgICAgICAgICAgICAgLy8gc3RvcmUuY29tbWl0KCdjbGVhclVzZXJSb2xlJyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncm9sZSBhZnRlciBsb2dvdXQgaXMgJywgdGhpcy5nZXRfcm9sZSgpKTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXRoICE9PSAnL2xvZ2luJykgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9nZ2luZyBvdXQ6JywgZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB1cGRhdGVVc2VyUm9sZShyb2xlKSB7CiAgICAgICAgICAgIC8vIENhbGwgdGhlIG11dGF0aW9uICdzZXRVc2VyUm9sZScgd2l0aCBhIHBheWxvYWQgKHVzZXJSb2xlKQogICAgICAgICAgICBzdG9yZS5jb21taXQoJ3NldFVzZXJSb2xlJywgcm9sZSk7IC8vIFJlcGxhY2UgJ2FkbWluJyB3aXRoIHlvdXIgYWN0dWFsIHVzZXIgcm9sZSBkYXRhCiAgICAgICAgfSwKICAgIH0sCiAgICBtb3VudGVkKCl7CiAgICAgICAgY29uc29sZS5sb2coIlBsZWFzZSBub3RlIHRoYXQgdGhlcmUgaXMgYSBzZXJ2ZXIgYm9vdC11cCB0aW1lIG9mIDMgLSA1IG1pbnV0ZXMuIik7CiAgICAgICAgY29uc29sZS5sb2coIkFkZGl0aW9uYWxseSwgdGhlIHNlcnZlciBpcyBzZXQgdG8gYXV0b21hdGljYWxseSBzaHV0IGRvd24gZXZlcnkgMTAgbWludXRlcyBpZiB0aGVyZSBpcyBubyBhY3Rpdml0eS4iKTsKICAgICAgICBjb25zb2xlLmxvZygiVGhlc2UgcG9saWNpZXMgYXJlIGluIGVmZmVjdCBmb3IgdGhlIGZyZWUgdGllciBvZiBvdXIgd2ViIGhvc3Rpbmcgc2VydmljZSwgd2hpY2ggeW91IGNhbiBmaW5kIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgYXQgaHR0cHM6Ly9yZW5kZXIuY29tLy4gIik7CiAgICAgICAgY29uc29sZS5sb2coIldlIGFwcHJlY2lhdGUgeW91ciBwYXRpZW5jZSBhcyB3ZSB3b3JrIHRvIHByb3ZpZGUgeW91IHdpdGggdGhlIGJlc3Qgc2VydmljZS4iKTsKICAgICAgICAvLyBjb25zb2xlLmxvZygndGhlIHJvbGUgaW4gbmF2YmFyIGlzIG5vdycsIHRoaXMuZ2V0X3JvbGUoKSkKICAgICAgICAvLyBjb25zb2xlLmxvZygndGhlIHJvbGUgaXMgbm93JywgdGhpcy51c2VyUm9sZSkKICAgIH0KfQo="},{"version":3,"sources":["AppNavbar.vue"],"names":[],"mappings":";AAmFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AppNavbar.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n        <nav class=\"navbar navbar-expand-lg bg-body-tertiary\">\n            <div class=\"container-fluid\">\n                <router-link to=\"/merchant\" v-if=\"isAuthenticated && this.get_role() == 'admin'\" class=\"navbar-brand\">ServiceBundle</router-link>\n                <router-link to=\"/\" v-else class=\"navbar-brand\">ServiceBundle</router-link>\n                <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                <span class=\"navbar-toggler-icon\"></span>\n                </button>\n                <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n                <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'admin' || this.get_role() == 'manager'\">\n                        <span class=\"nav-link\" @click=\"currentShowPage('bookings')\">Bookings</span>\n                    </li>\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'admin' || this.get_role() == 'manager'\">\n                        <span class=\"nav-link\" @click=\"currentShowPage('services')\">Services</span>\n                    </li>\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'admin' || this.get_role() == 'manager'\">\n                        <span class=\"nav-link\" @click=\"currentShowPage('serviceCategories')\">Service Categories</span>\n                    </li>\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'manager'\">\n                        <span class=\"nav-link\" @click=\"currentShowPage('registered')\">Registered</span>\n                        <!-- <router-link class=\"nav-link\" to=\"/registered\">Registered</router-link> -->\n                    </li>\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'customer'\">\n                        <router-link class=\"nav-link\" to=\"/cart\">Cart</router-link>\n                    </li>\n                    <li class=\"nav-item\" v-if=\"isAuthenticated && this.get_role() == 'customer'\">\n                        <a class=\"nav-link\" href=\"/customer/booking\">Bookings</a>\n                    </li>\n                    <!-- <li class=\"nav-item dropdown\"> -->\n                        <!-- <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\"> Dropdown </a>\n                        <ul class=\"dropdown-menu\">\n                            <li><a class=\"dropdown-item\" href=\"#\">Action</a></li>\n                            <li><a class=\"dropdown-item\" href=\"#\">Another action</a></li>\n                            <li><hr class=\"dropdown-divider\"></li>\n                            <li><a class=\"dropdown-item\" href=\"#\">Something else here</a></li>\n                        </ul> -->\n                    <!-- </li> -->\n                        <!-- <li class=\"nav-item d-flex\"> -->\n                        <!-- <a class=\"nav-link disabled \" aria-disabled=\"true\">Disabled</a> -->\n                    <!-- </li> -->\n                </ul>\n                <ul class=\"navbar-nav\" v-if=\"!isAuthenticated\">\n                    <li class=\"nav-item\"><router-link class=\"nav-link\" to=\"/login\">Log in</router-link></li>\n                    <li class=\"nav-item\"><router-link class=\"nav-link\" to=\"/signup\">Sign up</router-link></li>\n                </ul>\n                <ul class=\"navbar-nav\" v-else>\n                    <li class=\"nav-item\"><span @click=\"logout\" class=\"nav-link logout\" to=\"logout\">Log out</span></li>\n                </ul>\n                </div>\n            </div>\n        </nav>\n        <div v-if=\"this.get_role()=='admin' || this.get_role()=='manager'\">\n            <ServicePage\n            v-if=\"currentPage === 'services'\"\n            v-on:showServiceNew=\"showServiceNewPage()\"\n            v-on:showEditPage=\"showServiceEdit($event)\"\n            :new_service_data=\"newService\"\n            :update_service_data=\"updateServiceDetails\"\n            :update_service_time_slot_data=\"updateServiceTimeSlotData\"\n            />\n            <BookingPage v-else-if=\"currentPage === 'bookings'\" />\n            <ServiceCategoryPage v-else-if=\"currentPage === 'serviceCategories'\" />\n            <ServiceNew \n            v-else-if=\"showNew\"\n            v-on:newServiceAdded=\"getLatestService($event)\"\n            />\n            <RegisteredPage \n            v-else-if=\"currentPage === 'registered' && this.get_role()=='manager'\"\n            />\n            <ServiceEdit \n            v-else\n            :id_to_edit=\"serviceId\"\n            :index_to_edit=\"indexToEdit\"\n            v-on:updateServicePage=\"updateService($event)\"\n            v-on:updateTimeSlot=\"updateServiceTimeSlot($event)\"\n            />\n        </div>\n    </div>\n</template>\n\n<script>\nimport BookingPage from '@/views/BookingPage.vue';\nimport ServicePage from '@/views/ServicePage.vue';\nimport ServiceCategoryPage from '@/views/ServiceCategoryPage.vue';\nimport ServiceNew from '@/views/ServiceNew.vue';\nimport ServiceEdit from '@/views/ServiceEdit.vue';\nimport RegisteredPage from '@/components/RegisteredPage.vue';\n\nimport { mapState, mapMutations } from 'vuex';\nimport { createProvider, onLogout } from '@/vue-apollo';\nimport logout from '@/graphql/Logout.gql';\nimport store from '@/store';\n\nexport default {\n    name: 'AppNavbar',\n    data(){\n        return {\n            currentPage: 'bookings', // Initial page\n            showNew: false,\n            showedit: false,\n            serviceId: 1,\n            indexToEdit: 0,\n            newService: [],\n            updateServiceDetails: {},\n            updateServiceTimeSlotData: {},\n        }\n    },\n    components: {\n        ServicePage,\n        BookingPage,\n        ServiceCategoryPage,\n        ServiceNew,\n        ServiceEdit,\n        RegisteredPage\n    },\n    computed: {\n        ...mapState(['isAuthenticated', 'userRole']),\n    },\n    methods: {\n        updateServiceTimeSlot(data) {\n            console.log(\"AppNavbar: received 'updateTimeSlot' emit from 'ServiceEdit', data: \", data);\n            this.updateServiceTimeSlotData = data\n        },\n        updateService(data) {\n            console.log('appnavbar: update service details: ', data);\n            this.updateServiceDetails = data;\n        },\n        getLatestService(data) {\n            this.newService = data;\n            console.log('this is from appnavbar, the new service is: ', this.newService);\n        },\n        currentShowPage(page) {\n            this.showNew = false;\n            // this.showEdit = false;\n            this.currentPage = page\n        },\n        showServiceEdit(params) {\n            this.serviceId = parseInt(params.id);\n            // this.showEdit = true;\n            this.indexToEdit = params.index;\n            this.showNew = false;\n            this.currentPage = '';\n            console.log('appnavbar: this is app nav, the service id to edit is: ', params.id, ' with index: ', params.index)\n            console.log(typeof this.serviceId)\n        },\n        showServiceNewPage() {\n            this.showNew = true; \n            this.currentPage = '';\n            // this.showEdit = false;\n        },\n        get_role() {\n            const userRole = localStorage.getItem('userRole');\n            return userRole;\n        },\n        ...mapMutations(['clearAuthentication', 'setAuthenticated']),\n        async logout() {\n            try {\n                await this.$apollo.mutate({\n                    mutation: logout,\n                });\n                await onLogout(createProvider);\n                this.setAuthenticated(false);\n                this.clearAuthentication();\n                this.updateUserRole(null);\n                // store.commit('clearUserRole');\n                console.log('role after logout is ', this.get_role());\n                if (this.$route.path !== '/login') this.$router.push('/login');\n            } catch (error) {\n                console.error('Error logging out:', error);\n            }\n        },\n        updateUserRole(role) {\n            // Call the mutation 'setUserRole' with a payload (userRole)\n            store.commit('setUserRole', role); // Replace 'admin' with your actual user role data\n        },\n    },\n    mounted(){\n        console.log(\"Please note that there is a server boot-up time of 3 - 5 minutes.\");\n        console.log(\"Additionally, the server is set to automatically shut down every 10 minutes if there is no activity.\");\n        console.log(\"These policies are in effect for the free tier of our web hosting service, which you can find more information about at https://render.com/. \");\n        console.log(\"We appreciate your patience as we work to provide you with the best service.\");\n        // console.log('the role in navbar is now', this.get_role())\n        // console.log('the role is now', this.userRole)\n    }\n}\n</script>\n\n<style>\n.logout {\n    cursor: pointer;\n}\n\n\n</style>"]}]}