{"remainingRequest":"/home/bonifacio/code/service_bundle_frontend/node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!/home/bonifacio/code/service_bundle_frontend/src/components/SignupForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/bonifacio/code/service_bundle_frontend/src/components/SignupForm.vue","mtime":1694224834203},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/babel-loader/lib/index.js","mtime":1692833949708},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1692838039149},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js","mtime":1692833961693}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHVzZVZ1ZWxpZGF0ZSB9IGZyb20gJ0B2dWVsaWRhdGUvY29yZSc7CmltcG9ydCBTaWduSW5Vc2VyIGZyb20gJ0AvZ3JhcGhxbC9Mb2dpbi5ncWwnOwppbXBvcnQgeyByZXF1aXJlZCwgZW1haWwsIGhlbHBlcnMsIG51bWVyaWMsIG1pbkxlbmd0aCwgbWF4TGVuZ3RoLCBzYW1lQXMgfSBmcm9tICdAdnVlbGlkYXRlL3ZhbGlkYXRvcnMnOwppbXBvcnQgeyBvbkxvZ2luLCBjcmVhdGVQcm92aWRlciB9IGZyb20gJ0AvdnVlLWFwb2xsby5qcyc7CmltcG9ydCB7IG1hcFN0YXRlLCBtYXBNdXRhdGlvbnMgfSBmcm9tICd2dWV4JzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdMb2dpbkZvcm0nLAogICAgc2V0dXAgKCkgeyByZXR1cm4geyB2JDogdXNlVnVlbGlkYXRlKCkgfSB9LAogICAgZGF0YSAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZmlyc3RfbmFtZTogbnVsbCwKICAgICAgICAgICAgbGFzdF9uYW1lOiBudWxsLAogICAgICAgICAgICBtb2JpbGVfbnVtYmVyOiBudWxsLAogICAgICAgICAgICBlbWFpbDogbnVsbCwKICAgICAgICAgICAgcGFzc3dvcmQ6IG51bGwsCiAgICAgICAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvbjogbnVsbCwKICAgICAgICB9CiAgICB9LAogICAgdmFsaWRhdGlvbnMgKCkgewogICAgICAgIGNvbnN0IGFscGhhYmV0aWNXaXRoU3BhY2VzID0gdmFsdWUgPT4gL15bYS16QS1aXHNdKiQvLnRlc3QodmFsdWUpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGZpcnN0X25hbWU6IHsKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBoZWxwZXJzLndpdGhNZXNzYWdlKCdGaXJzdCBOYW1lIGlzIHJlcXVpcmVkLicsIHJlcXVpcmVkKSwKICAgICAgICAgICAgICAgIGFscGhhYmV0aWNXaXRoU3BhY2VzOiBoZWxwZXJzLndpdGhNZXNzYWdlKCdGaXJzdCBOYW1lIGNhbiBvbmx5IGNvbnRhaW4gbGV0dGVycyBhbmQgc3BhY2VzLicsIGFscGhhYmV0aWNXaXRoU3BhY2VzKSwKICAgICAgICAgICAgfSwgCiAgICAgICAgICAgIGxhc3RfbmFtZTogewogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGhlbHBlcnMud2l0aE1lc3NhZ2UoJ0xhc3QgTmFtZSBpcyByZXF1aXJlZC4nLCByZXF1aXJlZCksCiAgICAgICAgICAgICAgICBhbHBoYWJldGljV2l0aFNwYWNlczogaGVscGVycy53aXRoTWVzc2FnZSgnTGFzdCBOYW1lIGNhbiBvbmx5IGNvbnRhaW4gbGV0dGVycyBhbmQgc3BhY2VzLicsIGFscGhhYmV0aWNXaXRoU3BhY2VzKSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbW9iaWxlX251bWJlcjogeyByZXF1aXJlZDogaGVscGVycy53aXRoTWVzc2FnZSgnTW9iaWxlIE51bWJlciBpcyByZXF1aXJlZC4nLCByZXF1aXJlZCksIG51bWVyaWMgfSwKICAgICAgICAgICAgZW1haWw6IHsKICAgICAgICAgICAgICAgIHJlcXVpcmVkLAogICAgICAgICAgICAgICAgZW1haWwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGFzc3dvcmQ6IHsgcmVxdWlyZWQ6IGhlbHBlcnMud2l0aE1lc3NhZ2UoJ1Bhc3N3b3JkIGlzIHJlcXVpcmVkLicsIHJlcXVpcmVkKSwgbWluTGVuZ3RoOiBtaW5MZW5ndGgoOCksIG1heExlbmd0aDogbWF4TGVuZ3RoKDIwKSB9LAogICAgICAgICAgICBwYXNzd29yZF9jb25maXJtYXRpb246IHsgc2FtZUFzOiBzYW1lQXModGhpcy5wYXNzd29yZCkgfQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLi4ubWFwTXV0YXRpb25zKFsnc2V0QXV0aGVudGljYXRlZCddKSwKICAgICAgICB0b2dnbGVBdXRoZW50aWNhdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5zZXRBdXRoZW50aWNhdGVkKCF0aGlzLmlzQXV0aGVudGljYXRlZCk7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBzdWJtaXRGb3JtKCkgewogICAgICAgICAgICBpZiAoIXRoaXMudiQuJHRvdWNoKCkpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb246IHJlcXVpcmUoJ0AvZ3JhcGhxbC9TaWdudXAuZ3FsJyksCiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInNpZ251cElucHV0IjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJyb2xlIjowLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJmaXJzdE5hbWUiOiB0aGlzLmZpcnN0X25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImxhc3ROYW1lIjogdGhpcy5sYXN0X25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1vYmlsZU51bWJlciI6IHRoaXMubW9iaWxlX251bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXV0aFByb3ZpZGVyIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY3JlZGVudGlhbHMiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZW1haWwiOiB0aGlzLmVtYWlsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInBhc3N3b3JkIjogdGhpcy5wYXNzd29yZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwYXNzd29yZENvbmZpcm1hdGlvbiI6IHRoaXMucGFzc3dvcmRfY29uZmlybWF0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jcmVhdGVVc2VyLmVycm9ycyA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5jcmVhdGVVc2VyLmVycm9ycyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9naW4gPSBhd2FpdCB0aGlzLmZvcmNlTG9naW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvZ2luICYmIHRoaXMuJHJvdXRlLnBhdGggIT09ICcvJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlcicpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJDbGllbnQgRXJyb3I6IiwgZXJyb3IpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBmb3JjZUxvZ2luKCkgewogICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgICAgICAgICAgbXV0YXRpb246IFNpZ25JblVzZXIsCiAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogewogICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCwKICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCByZXNwb25zZS5kYXRhLmxvZ2luLnRva2VuCiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7IEF1dGhvcml6YXRpb246IHRva2VuIH07CiAgICAgICAgICAgIHRoaXMudG9nZ2xlQXV0aGVudGljYXRpb24oKTsKICAgICAgICAgICAgYXdhaXQgb25Mb2dpbihjcmVhdGVQcm92aWRlcih7fSwgaGVhZGVycyksIHRva2VuKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEubG9naW4gPT09IG51bGwgPyBmYWxzZSA6IHRydWU7CiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLi4ubWFwU3RhdGUoWydpc0F1dGhlbnRpY2F0ZWQnXSksCiAgICB9LAp9Cg=="},{"version":3,"sources":["SignupForm.vue"],"names":[],"mappings":";AA+GA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SignupForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n        <div class=\"container h-custom\">\n            <div class=\"row d-flex justify-content-center align-items-center h-100\">\n                <div class=\"col-md-8 col-lg-6 col-xl-4 offset-xl-1\">\n                    <div class=\"d-flex flex-row align-items-center justify-content-center justify-content-lg-start\">\n                        <p class=\"login_text lead fw-normal mb-0 me-3\"></p>\n                    </div>\n                    <form @submit.prevent=\"submitForm\">\n                        <!-- First name -->\n                        <div class=\"row input-field-signup mt-3\">\n                            <div class=\"col-sm-6 col-form-label\">\n                                <div :class=\"{ error: v$.first_name.$errors.length }\">\n                                    <label class=\"form-label\" for=\"first_name\">First Name</label>\n                                </div>\n                            </div>\n                            <div class=\"col-sm-6 err-card\">\n                                <input v-model=\"first_name\" class=\"form-control form-control-l\" :class=\"{ error: v$.first_name.$errors.length }\" id=\"first_name\">\n                                <div class=\"input-errors\" v-for=\"error of v$.first_name.$errors\" :key=\"error.$uid\" placeholder=\"Enter your first name\" autofocus>\n                                    <div class=\"error-msg\">{{ error.$message }}</div>\n                                </div>\n                            </div>\n                        </div>\n                        <!-- Last name -->\n                        <div class=\"row input-field-signup mt-3\">\n                            <div class=\"col-sm-6 col-form-label\">\n                                <div :class=\"{ error: v$.last_name.$errors.length }\">\n                                    <label class=\"form-label\" for=\"last_name\">Last Name</label>\n                                </div>\n                            </div>\n                            <div class=\"col-sm-6 err-card\">\n                                <input v-model=\"last_name\" class=\"form-control form-control-l\" :class=\"{ error: v$.last_name.$errors.length }\" id=\"last_name\">\n                                <div class=\"input-errors\" v-for=\"error of v$.last_name.$errors\" :key=\"error.$uid\" placeholder=\"Enter your last name\" autofocus>\n                                    <div class=\"error-msg\">{{ error.$message }}</div>\n                                </div>\n                            </div>\n                        </div>\n                        <!-- Email -->\n                        <div class=\"row input-field-signup mt-3\">\n                            <div class=\"col-sm-6 col-form-label\">\n                                <div :class=\"{ error: v$.email.$errors.length }\">\n                                    <label class=\"form-label\" for=\"email\">Email</label>\n                                </div>\n                            </div>\n                            <div class=\"col-sm-6 err-card\">\n                                <input v-model=\"email\" class=\"form-control form-control-l\" :class=\"{ error: v$.email.$errors.length }\" id=\"email\">\n                                <div class=\"input-errors\" v-for=\"error of v$.email.$errors\" :key=\"error.$uid\" placeholder=\"Enter your Email\">\n                                    <div class=\"error-msg\">{{ error.$message }}</div>\n                                </div>\n                            </div>\n                        </div>\n                        <!-- Mobile Number -->\n                        <div class=\"row input-field-signup mt-3\">\n                            <div class=\"col-sm-6 col-form-label\">\n                                <div :class=\"{ error: v$.mobile_number.$errors.length }\">\n                                    <label class=\"form-label\" for=\"mobile_number\">Mobile Number</label>\n                                </div>\n                            </div>\n                            <div class=\"col-sm-6 err-card\">\n                                <input v-model=\"mobile_number\" class=\"form-control form-control-l\" :class=\"{ error: v$.mobile_number.$errors.length }\" id=\"mobile_number\">\n                                <div class=\"input-errors\" v-for=\"error of v$.mobile_number.$errors\" :key=\"error.$uid\" placeholder=\"Enter your mobile number\">\n                                    <div class=\"error-msg\">{{ error.$message }}</div>\n                                </div>\n                            </div>\n                        </div>\n                        <!-- Password -->\n                        <div class=\"row input-field-signup mt-3\">\n                            <div class=\"col-sm-6 col-form-label\">\n                                <div :class=\"{ error: v$.password.$errors.length }\">\n                                    <label class=\"form-label\" for=\"password\">Password</label>\n                                </div>\n                            </div>\n                            <div class=\"col-sm-6 err-card\">\n                                <input v-model=\"password\" class=\"form-control form-control-l\" :class=\"{ error: v$.password.$errors.length }\" id=\"password\" type=\"password\">\n                                <div class=\"input-errors\" v-for=\"error of v$.password.$errors\" :key=\"error.$uid\" placeholder=\"Enter your Password\">\n                                    <div class=\"error-msg\">{{ error.$message }}</div>\n                                </div>\n                            </div>\n                        </div>\n                        <!-- Password Confirmation -->\n                        <div class=\"row input-field-signup mt-3\">\n                            <div class=\"col-sm-6 col-form-label\">\n                                <div :class=\"{ error: v$.password_confirmation.$errors.length }\">\n                                    <label class=\"form-label\" for=\"password_confirmation\">Password Confirmation</label>\n                                </div>\n                            </div>\n                            <div class=\"col-sm-6 err-card\">\n                                <input v-model=\"password_confirmation\" class=\"form-control form-control-l\" :class=\"{ error: v$.password_confirmation.$errors.length }\" id=\"password_confirmation\" type=\"password\">\n                                <div class=\"input-errors\" v-for=\"error of v$.password_confirmation.$errors\" :key=\"error.$uid\" placeholder=\"Enter your Password Confirmation\">\n                                    <div class=\"error-msg\">{{ error.$message }}</div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"text-right mt-4\">\n                            <button type=\"submit\" class=\"btn btn-primary btn-lg input-field-signup\" style=\"padding-left: 2.5rem; padding-right: 2.5rem;\">Sign up</button>\n                            <p class=\" input-field-signup\">Already have an account?\n                                <!-- <%= link_to 'Login', login_path, class: 'link-primary'%> -->\n                                <a href=\"#\">Login</a>\n                            </p>\n                        </div>\n                    </form>\n                </div>\n                <div class=\"col-md-9 col-lg-6 col-xl-5\">\n                    <img src=\"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp\" class=\"img-fluid\" alt=\"Login to MovieMagic\">\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { useVuelidate } from '@vuelidate/core';\nimport SignInUser from '@/graphql/Login.gql';\nimport { required, email, helpers, numeric, minLength, maxLength, sameAs } from '@vuelidate/validators';\nimport { onLogin, createProvider } from '@/vue-apollo.js';\nimport { mapState, mapMutations } from 'vuex';\n\nexport default {\n    name: 'LoginForm',\n    setup () { return { v$: useVuelidate() } },\n    data () {\n        return {\n            first_name: null,\n            last_name: null,\n            mobile_number: null,\n            email: null,\n            password: null,\n            password_confirmation: null,\n        }\n    },\n    validations () {\n        const alphabeticWithSpaces = value => /^[a-zA-Z\\s]*$/.test(value);\n        return {\n            first_name: {\n                required: helpers.withMessage('First Name is required.', required),\n                alphabeticWithSpaces: helpers.withMessage('First Name can only contain letters and spaces.', alphabeticWithSpaces),\n            }, \n            last_name: {\n                required: helpers.withMessage('Last Name is required.', required),\n                alphabeticWithSpaces: helpers.withMessage('Last Name can only contain letters and spaces.', alphabeticWithSpaces),\n            },\n            mobile_number: { required: helpers.withMessage('Mobile Number is required.', required), numeric },\n            email: {\n                required,\n                email\n            },\n            password: { required: helpers.withMessage('Password is required.', required), minLength: minLength(8), maxLength: maxLength(20) },\n            password_confirmation: { sameAs: sameAs(this.password) }\n        }\n    },\n    methods: {\n        ...mapMutations(['setAuthenticated']),\n        toggleAuthentication() {\n            this.setAuthenticated(!this.isAuthenticated);\n        },\n        async submitForm() {\n            if (!this.v$.$touch()) {\n                try {\n                    const response = await this.$apollo.mutate({\n                        mutation: require('@/graphql/Signup.gql'),\n                        variables: {\n                            \"signupInput\": {\n                                \"role\":0,\n                                \"firstName\": this.first_name,\n                                \"lastName\": this.last_name,\n                                \"mobileNumber\": this.mobile_number,\n                                \"authProvider\": {\n                                    \"credentials\": {\n                                        \"email\": this.email,\n                                        \"password\": this.password,\n                                        \"passwordConfirmation\": this.password_confirmation\n                                    }\n                                }\n                            }\n                        }\n                    });\n                    if (response.data.createUser.errors > 0) {\n                        console.log(response.data.createUser.errors);\n                    } else {\n                        const login = await this.forceLogin();\n                        if (login && this.$route.path !== '/') {\n                            this.$router.push('/');\n                        } else {\n                            alert('Something went wrong. Please try again later');\n                        }\n                    }\n                } catch (error) {\n                    console.error(\"Client Error:\", error);\n                }\n            }\n        },\n        async forceLogin() {\n            const response = await this.$apollo.mutate({\n                mutation: SignInUser,\n                variables: {\n                    credentials: {\n                        email: this.email,\n                        password: this.password\n                    }\n                },\n            });\n            const token = await response.data.login.token\n            const headers = { Authorization: token };\n            this.toggleAuthentication();\n            await onLogin(createProvider({}, headers), token);\n            return response.data.login === null ? false : true;\n        }\n    },\n    computed: {\n        ...mapState(['isAuthenticated']),\n    },\n}\n</script>\n\n<style>\n.error, .error:focus, .error input[type=\"radio\"] {\n    border-color: red;\n    color: red;\n}\n.input-errors {\n    color: red;\n}\n.err-card {\n    position: relative;\n}\n.error-msg {\n    position: absolute;\n    font-size: 10px;\n    bottom: -8px;\n    left: 17px;\n}\n.register-stepper {\n    display: none;\n}\n</style>"]}]}