{"remainingRequest":"/home/bonifacio/code/service_bundle_frontend/node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!/home/bonifacio/code/service_bundle_frontend/src/components/ServiceList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/bonifacio/code/service_bundle_frontend/src/components/ServiceList.vue","mtime":1694930586854},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/babel-loader/lib/index.js","mtime":1692833949708},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1692838039149},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js","mtime":1692833961693}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBEYXRlcGlja2VyIGZyb20gJ3Z1ZWpzLWRhdGVwaWNrZXInOwppbXBvcnQgVGltZXBpY2tlciBmcm9tICd2dWUyLXRpbWVwaWNrZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1NlcnZpY2VMaXN0JywKICBkYXRhKCl7CiAgICByZXR1cm4gewogICAgICBzaG93UGFnZTogJ1NlcnZpY2VQYWdlJywgLy8gSW5pdGlhbGl6ZSBzaG93UGFnZSB0byBTZXJ2aWNlUGFnZQogICAgICBuZXdTZXJ2aWNlRGF0YToge30sCiAgICAgIHVwZGF0ZVNlcnZpY2VEYXRhOiB7fSwKICAgICAgc2VydmljZXM6IFtdLAogICAgICBkaXNhYmxlZERhdGVzOiB7fSwKICAgICAgc2VsZWN0ZWREYXRlOiBudWxsLAogICAgICBzZWxlY3RlZFN0YXJ0VGltZTogbnVsbCwKICAgICAgc2VsZWN0ZWRFbmRUaW1lOiBudWxsLAogICAgICBzdGF0ZTogewogICAgICAgIGRpc2FibGVkRGF0ZXM6IHsKICAgICAgICAgIGN1c3RvbVByZWRpY3RvcjogdGhpcy5kaXNhYmxlRGF0ZXNPdXRzaWRlUmFuZ2UsCiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgRGF0ZXBpY2tlciwKICAgIFRpbWVwaWNrZXIsCiAgfSwKICBwcm9wczogewogICAgbmV3X3NlcnZpY2U6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgaWYgKHZhbHVlLmlkKSBjb25zb2xlLmxvZygndGhpcyBpcyBmcm9tIHNlcnZpY2VQYWdlIHRvIHNlcnZpY2VMaXN0LCB0aGUgbmV3IHNlcnZpY2UgaXM6ICcsIHZhbHVlKTsKICAgICAgICAvLyBSZXR1cm4gdHJ1ZSB0byBkaXNhYmxlIHR5cGUgY2hlY2tpbmcKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSwKICAgIH0sCiAgICB1cGRhdGVfc2VydmljZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICBpZiAodmFsdWUuc2VydmljZV9kZXRhaWxzKSBjb25zb2xlLmxvZygndGhpcyBpcyBmcm9tIHNlcnZpY2VQYWdlIHRvIHNlcnZpY2VMaXN0LCB0aGUgdXBkYXRlIHNlcnZpY2UgaXM6ICcsIHZhbHVlKTsKICAgICAgICAvLyBSZXR1cm4gdHJ1ZSB0byBkaXNhYmxlIHR5cGUgY2hlY2tpbmcKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSwKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5wb3B1bGF0ZURpc2FibGVkRGF0ZXMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgICAgZGlzYWJsZURhdGVzT3V0c2lkZVJhbmdlKGRhdGUpIHsKICAgICAgIC8vIERlZmluZSBhbiBhcnJheSBvZiBkYXRlIHJhbmdlcyB5b3Ugd2FudCB0byBlbmFibGUKICAgICAgIGNvbnN0IGRhdGVSYW5nZXMgPSBbCiAgICAgICAgewogICAgICAgICAgZnJvbTogbmV3IERhdGUoMjAyMywgOCwgMSksCiAgICAgICAgICB0bzogbmV3IERhdGUoMjAyMywgOCwgMiksCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBmcm9tOiBuZXcgRGF0ZSgyMDIzLCA4LCA0KSwKICAgICAgICAgIHRvOiBuZXcgRGF0ZSgyMDIzLCA4LCA5KSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGZyb206IG5ldyBEYXRlKDIwMjMsIDgsIDExKSwKICAgICAgICAgIHRvOiBuZXcgRGF0ZSgyMDIzLCA4LCAxNiksCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBmcm9tOiBuZXcgRGF0ZSgyMDIzLCA4LCAyNSksCiAgICAgICAgICB0bzogbmV3IERhdGUoMjAyMywgOCwgMzApLAogICAgICAgIH0sCiAgICAgICAgLy8gQWRkIG1vcmUgZGF0ZSByYW5nZXMgYXMgbmVlZGVkCiAgICAgIF07CgogICAgICAvLyBDaGVjayBpZiB0aGUgZGF0ZSBmYWxscyB3aXRoaW4gYW55IG9mIHRoZSBkZWZpbmVkIHJhbmdlcwogICAgICBmb3IgKGNvbnN0IHJhbmdlIG9mIGRhdGVSYW5nZXMpIHsKICAgICAgICBpZiAoZGF0ZSA+PSByYW5nZS5mcm9tICYmIGRhdGUgPD0gcmFuZ2UudG8pIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gRW5hYmxlIGRhdGVzIHdpdGhpbiB0aGUgcmFuZ2UKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIERpc2FibGUgYWxsIG90aGVyIGRhdGVzCiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIGFzeW5jIGdldF9zZXJ2aWNlcygpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGFwb2xsby5xdWVyeSh7CiAgICAgICAgICBxdWVyeTogcmVxdWlyZSgnQC9ncmFwaHFsL0FkbWluU2VydmljZS5ncWwnKSwKICAgICAgICB9KTsKICAgICAgICB0aGlzLnNlcnZpY2VzID0gcmVzcG9uc2UuZGF0YS5zZXJ2aWNlQWRtaW4KICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CgogICAgICAgIGlmICh0aGlzLm5ld1NlcnZpY2VEYXRhLmlkKSB7IHRoaXMubWVyZ2VfbmV3X3NlcnZpY2VfdG9fc2VydmljZXModGhpcy5zZXJ2aWNlcykgfQogICAgICAgIGlmICh0aGlzLnVwZGF0ZVNlcnZpY2VEYXRhLnNlcnZpY2VfZGV0YWlscykgeyB0aGlzLnVwZGF0ZV9zZXJ2aWNlX2xpc3QodGhpcy5zZXJ2aWNlcykgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBmcm9tIGdldF9zZXJ2aWNlczogJywgZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlX3NlcnZpY2VfbGlzdChzZXJ2aWNlKSB7CiAgICAgIGxldCBzZXJ2aWNlX29uZSA9IHNlcnZpY2VbdGhpcy51cGRhdGVTZXJ2aWNlRGF0YS5pbmRleF90b19lZGl0XTsKICAgICAgY29uc29sZS5sb2coJ3NlcnZpY2VsaXN0OiB0aGUgZWRpdGVkIHNlcnZpY2UgaXM6ICcsIHNlcnZpY2Vfb25lKTsKICAgICAgc2VydmljZV9vbmVbJ2ltYWdlJ10gPSB0aGlzLnVwZGF0ZVNlcnZpY2VEYXRhLnNlcnZpY2VfZGV0YWlscy5pbWFnZTsKICAgICAgc2VydmljZV9vbmVbJ25hbWUnXSA9IHRoaXMudXBkYXRlU2VydmljZURhdGEuc2VydmljZV9kZXRhaWxzLm5hbWU7CiAgICAgIHNlcnZpY2Vfb25lWydwcmljZSddID0gdGhpcy51cGRhdGVTZXJ2aWNlRGF0YS5zZXJ2aWNlX2RldGFpbHMucHJpY2U7CiAgICB9LAogICAgbWVyZ2VfbmV3X3NlcnZpY2VfdG9fc2VydmljZXMoYWxsX3NlcnZpY2UpIHsKICAgICAgLy8gY29uc3QgY2F0ZWdvcnkgPSB0aGlzLm5ld1NlcnZpY2VEYXRhLnNlcnZpY2VfY2F0ZWdvcmllcy5maW5kKAogICAgICAvLyAgIChjYXRlZ29yeSkgPT4gY2F0ZWdvcnkuaWQgPT09IHRoaXMubmV3U2VydmljZURhdGEuc2VydmljZV9jYXRlZ29yeQogICAgICAvLyApOwogICAgICBsZXQgbmV3c2VydmljZSA9IHsKICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5uZXdTZXJ2aWNlRGF0YS5kZXNjcmlwdGlvbiwKICAgICAgICBpZDogdGhpcy5uZXdTZXJ2aWNlRGF0YS5pZCwKICAgICAgICBpbWFnZTogdGhpcy5uZXdTZXJ2aWNlRGF0YS5pbWFnZSwKICAgICAgICBuYW1lOiB0aGlzLm5ld1NlcnZpY2VEYXRhLm5hbWUsCiAgICAgICAgc2VydmljZUNhdGVnb3J5SWQ6IHsKICAgICAgICAgIGlkOiB0aGlzLm5ld1NlcnZpY2VEYXRhLnNlcnZpY2VfY2F0ZWdvcnksCiAgICAgICAgICBuYW1lOiB0aGlzLm5ld1NlcnZpY2VEYXRhLnNlcnZpY2VfY2F0ZWdvcmllc1swXS5uYW1lCiAgICAgICAgfSwKICAgICAgICB0aW1lU2xvdDogW10sCiAgICAgIH0KICAgICAgYWxsX3NlcnZpY2UucHVzaChuZXdzZXJ2aWNlKQogICAgfSwKICAgIHNob3dFZGl0U2VydmljZShwYXJhbXMpIHsKICAgICAgY29uc29sZS5sb2coJ3NlcnZpY2VMaXN0OiB0aGUgc2VydmljZSBpZCB0byBlZGl0IGlzOiAnLCBwYXJhbXNbJ2lkJ10pCiAgICAgIHRoaXMuJGVtaXQoJ3Nob3dFZGl0U2VydmljZScsIHBhcmFtcyk7CiAgICB9LAogICAgc2hvd1NlcnZpY2VOZXcoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ3Nob3dTZXJ2aWNlTmV3Jyk7IC8vIEVtaXQgYSBjdXN0b20gZXZlbnQKICAgIH0sCiAgfSwKICBtb3VudGVkKCl7CiAgICB0aGlzLmdldF9zZXJ2aWNlcygpOwogICAgLy8gQXNzaWduIHRoZSBwcm9wIHZhbHVlIHRvIHRoZSBkYXRhIHByb3BlcnR5CiAgICBpZiAodGhpcy5uZXdfc2VydmljZSkgewogICAgICB0aGlzLm5ld1NlcnZpY2VEYXRhID0gdGhpcy5uZXdfc2VydmljZTsKICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgZnJvbSBzZXJ2aWNlcGFnZSB0byBzZXJ2aWNlbGlzdCwgbmV3IHNlcnZpY2UgZGF0YSBpczogJywgdGhpcy5uZXdTZXJ2aWNlRGF0YSk7CiAgICB9IAogICAgaWYgKHRoaXMudXBkYXRlX3NlcnZpY2Uuc2VydmljZV9kZXRhaWxzKSB7CiAgICAgIHRoaXMudXBkYXRlU2VydmljZURhdGEgPSB0aGlzLnVwZGF0ZV9zZXJ2aWNlOwogICAgICBjb25zb2xlLmxvZygndGhpcyBpcyBmcm9tIHNlcnZpY2VwYWdlIHRvIHNlcnZpY2VsaXN0LCB1cGRhdGUgc2VydmljZSBkYXRhIGlzOiAnLCB0aGlzLnVwZGF0ZVNlcnZpY2VEYXRhKTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["ServiceList.vue"],"names":[],"mappings":";AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ServiceList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <h2>Services</h2>\n    <button @click=\"showServiceNew\">Show ServiceNew</button>\n      <table class=\"table\">\n        <thead>\n          <tr>\n            <th>No.</th>\n            <th>Service Name</th>\n            <th>Category Name</th>\n            <th>Price</th>\n            <th>Description</th>\n            <th>Time Slots</th>\n            <th>Image</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(item, index) in services\" :key=\"item.id\">\n            <td>{{ index + 1 }}</td>\n            <td>{{ item.name }}</td>\n            <td>{{ item.serviceCategoryId.name }}</td>\n            <td>PHP {{ item.price.toFixed(2) }}</td>\n            <td>{{ item.description }}</td>\n            <td>\n              <template>\n                <div>\n                  <datepicker v-model=\"selectedDate\" :disabled-dates=\"state.disabledDates\" :inline=\"true\"></datepicker>\n                  <timepicker v-model=\"selectedStartTime\"></timepicker>\n                  <timepicker v-model=\"selectedEndTime\"></timepicker>\n                </div>\n              </template>\n              <!-- <table>\n                <tr>\n                  <th>date</th>\n                  <th>start time</th>\n                  <th>end time</th>\n                </tr>\n                <tr v-for=\"time in item.timeSlot\" :key=\"time.id\">\n                  <td>{{ time.date }}</td>\n                  <td>{{ time.startTime }}</td>\n                  <td>{{ time.endTime }}</td>\n                </tr>\n              </table> -->\n            </td>\n            <td><img :src=\"item.image\" :alt=item.category_name style=\"width: 200px; height: 150px;\"></td>\n            <td>\n              <span class=\"btn btn-warning\" @click=\"showEditService({id: item.id, index: index})\">Edit</span>\n              <!-- <router-link :to=\"{ path: '/services/' + item.id + '/edit' }\" class=\"btn btn-warning\"> Edit </router-link> -->\n            </td>\n          </tr>\n        </tbody>\n      </table>\n  </div>\n</template>\n\n<script>\nimport Datepicker from 'vuejs-datepicker';\nimport Timepicker from 'vue2-timepicker';\nexport default {\n  name: 'ServiceList',\n  data(){\n    return {\n      showPage: 'ServicePage', // Initialize showPage to ServicePage\n      newServiceData: {},\n      updateServiceData: {},\n      services: [],\n      disabledDates: {},\n      selectedDate: null,\n      selectedStartTime: null,\n      selectedEndTime: null,\n      state: {\n        disabledDates: {\n          customPredictor: this.disableDatesOutsideRange,\n        }\n      }\n    };\n  },\n  components: {\n    Datepicker,\n    Timepicker,\n  },\n  props: {\n    new_service: {\n      type: Object,\n      validator: function(value) {\n        if (value.id) console.log('this is from servicePage to serviceList, the new service is: ', value);\n        // Return true to disable type checking\n        return true;\n      },\n    },\n    update_service: {\n      type: Object,\n      validator: function(value) {\n        if (value.service_details) console.log('this is from servicePage to serviceList, the update service is: ', value);\n        // Return true to disable type checking\n        return true;\n      },\n    },\n  },\n  created() {\n    this.populateDisabledDates();\n  },\n  methods: {\n      disableDatesOutsideRange(date) {\n       // Define an array of date ranges you want to enable\n       const dateRanges = [\n        {\n          from: new Date(2023, 8, 1),\n          to: new Date(2023, 8, 2),\n        },\n        {\n          from: new Date(2023, 8, 4),\n          to: new Date(2023, 8, 9),\n        },\n        {\n          from: new Date(2023, 8, 11),\n          to: new Date(2023, 8, 16),\n        },\n        {\n          from: new Date(2023, 8, 25),\n          to: new Date(2023, 8, 30),\n        },\n        // Add more date ranges as needed\n      ];\n\n      // Check if the date falls within any of the defined ranges\n      for (const range of dateRanges) {\n        if (date >= range.from && date <= range.to) {\n          return false; // Enable dates within the range\n        }\n      }\n\n      // Disable all other dates\n      return true;\n    },\n    async get_services() {\n      try {\n        const response = await this.$apollo.query({\n          query: require('@/graphql/AdminService.gql'),\n        });\n        this.services = response.data.serviceAdmin\n        console.log(response);\n\n        if (this.newServiceData.id) { this.merge_new_service_to_services(this.services) }\n        if (this.updateServiceData.service_details) { this.update_service_list(this.services) }\n      } catch (error) {\n        console.log('Error from get_services: ', error);\n      }\n    },\n    update_service_list(service) {\n      let service_one = service[this.updateServiceData.index_to_edit];\n      console.log('servicelist: the edited service is: ', service_one);\n      service_one['image'] = this.updateServiceData.service_details.image;\n      service_one['name'] = this.updateServiceData.service_details.name;\n      service_one['price'] = this.updateServiceData.service_details.price;\n    },\n    merge_new_service_to_services(all_service) {\n      // const category = this.newServiceData.service_categories.find(\n      //   (category) => category.id === this.newServiceData.service_category\n      // );\n      let newservice = {\n        description: this.newServiceData.description,\n        id: this.newServiceData.id,\n        image: this.newServiceData.image,\n        name: this.newServiceData.name,\n        serviceCategoryId: {\n          id: this.newServiceData.service_category,\n          name: this.newServiceData.service_categories[0].name\n        },\n        timeSlot: [],\n      }\n      all_service.push(newservice)\n    },\n    showEditService(params) {\n      console.log('serviceList: the service id to edit is: ', params['id'])\n      this.$emit('showEditService', params);\n    },\n    showServiceNew() {\n      this.$emit('showServiceNew'); // Emit a custom event\n    },\n  },\n  mounted(){\n    this.get_services();\n    // Assign the prop value to the data property\n    if (this.new_service) {\n      this.newServiceData = this.new_service;\n      console.log('this is from servicepage to servicelist, new service data is: ', this.newServiceData);\n    } \n    if (this.update_service.service_details) {\n      this.updateServiceData = this.update_service;\n      console.log('this is from servicepage to servicelist, update service data is: ', this.updateServiceData);\n    }\n  }\n}\n</script>\n\n<style>\n/* @import 'vuejs-datepicker/dist/vuejs-datepicker.css'; */\n@import 'vue2-timepicker/dist/VueTimepicker.css';\n.error, .error:focus, .error input[type=\"radio\"] {\n    border-color: red;\n    color: red;\n}\n.input-errors {\n    color: red;\n}\n.err-card {\n    position: relative;\n}\n.error-msg {\n    position: absolute;\n    font-size: 10px;\n    bottom: -8px;\n    left: 17px;\n}\n</style>"]}]}