{"remainingRequest":"/home/bonifacio/code/service_bundle_frontend/node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!/home/bonifacio/code/service_bundle_frontend/src/views/ServiceNew.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/bonifacio/code/service_bundle_frontend/src/views/ServiceNew.vue","mtime":1697855384580},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/babel-loader/lib/index.js","mtime":1692833949708},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1692838039149},{"path":"/home/bonifacio/code/service_bundle_frontend/node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js","mtime":1692833961693}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBEYXRlcGlja2VyIGZyb20gJ3Z1ZWpzLWRhdGVwaWNrZXInOwppbXBvcnQgeyByZXF1aXJlZCwgaW50ZWdlciwgbWF4TGVuZ3RoIH0gZnJvbSAnQHZ1ZWxpZGF0ZS92YWxpZGF0b3JzJwppbXBvcnQgeyB1c2VWdWVsaWRhdGUgfSBmcm9tICdAdnVlbGlkYXRlL2NvcmUnOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXAgKCkgeyByZXR1cm4geyB2JDogdXNlVnVlbGlkYXRlKCkgfSB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VydmljZXM6IHsKICAgICAgICBzZXJ2aWNlX2NhdGVnb3J5OiAnJywKICAgICAgICBuYW1lOiAnJywKICAgICAgICBwcmljZTogJycsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIHNlcnZpY2VfY2F0ZWdvcmllczogW10sCiAgICAgIH0sCiAgICB9CiAgfSwKICB2YWxpZGF0aW9ucyAoKSB7CiAgICByZXR1cm4gewogICAgICBzZXJ2aWNlczogewogICAgICAgIG5hbWU6IHsgcmVxdWlyZWQsIG1heExlbmd0aDogbWF4TGVuZ3RoKDI1KSB9LAogICAgICAgIHNlcnZpY2VfY2F0ZWdvcnk6IHsgcmVxdWlyZWQgIH0sCiAgICAgICAgcHJpY2U6IHtyZXF1aXJlZCwgaW50ZWdlciB9LAogICAgICAgIGRlc2NyaXB0aW9uOiB7cmVxdWlyZWQsIG1heExlbmd0aDogbWF4TGVuZ3RoKDEwMCksfSwKICAgICAgfSwKICAgICAgaW1hZ2U6ICcnLAogICAgfQogIH0sCiAgY29tcG9uZW50czogeyBEYXRlcGlja2VyLCB9LAogIG1ldGhvZHM6IHsKICAgIGZvcm1hdFRvUEhQKG51bWJlcikgewogICAgICAvLyBDb252ZXJ0IHRoZSBudW1iZXIgdG8gYSBzdHJpbmcgd2l0aCB0d28gZGVjaW1hbCBwbGFjZXMKICAgICAgY29uc3QgZm9ybWF0dGVkTnVtYmVyID0gTnVtYmVyKG51bWJlcikudG9GaXhlZCgyKTsKCiAgICAgIC8vIEFkZCAiUEhQICIgdG8gdGhlIGZvcm1hdHRlZCBudW1iZXIgYW5kIHVzZSBjb21tYXMgYXMgYSB0aG91c2FuZHMgc2VwYXJhdG9yCiAgICAgIGNvbnN0IHJlc3VsdCA9IGBQSFAgJHtmb3JtYXR0ZWROdW1iZXIucmVwbGFjZSgvXEIoPz0oXGR7M30pKyg/IVxkKSkvZywgJywgJyl9YDsKCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogICAgdXBsb2FkKCl7CiAgICAgICAgY29uc29sZS5sb2coJ3VwbG9hZCcpCiAgICAgICAgdmFyIG15V2lkZ2V0ID0gd2luZG93LmNsb3VkaW5hcnkuY3JlYXRlVXBsb2FkV2lkZ2V0KHsKICAgICAgICAgICAgY2xvdWROYW1lOiAnZG92eHE1Z245JywgCiAgICAgICAgICAgIHByb2Nlc3NRdWV1ZTogZmFsc2UsCiAgICAgICAgICAgIHVwbG9hZFByZXNldDogJ3VoamV2ZXNnJ30sIChlcnJvciwgcmVzdWx0KSA9PiB7IAogICAgICAgICAgICAgICAgaWYgKCFlcnJvciAmJiByZXN1bHQgJiYgcmVzdWx0LmV2ZW50ID09PSAic3VjY2VzcyIpIHsgCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRG9uZSEgSGVyZSBpcyB0aGUgaW1hZ2UgaW5mbzogJywgcmVzdWx0LmluZm8pOyAKICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZVVybCA9IHJlc3VsdC5pbmZvLnNlY3VyZV91cmw7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZSA9IGltYWdlVXJsOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheUltYWdlKGltYWdlVXJsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICkKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidXBsb2FkX3dpZGdldCIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24oKXsKICAgICAgICAgICAgbXlXaWRnZXQub3BlbigpOwogICAgICAgIH0sIGZhbHNlKTsKICAgIH0sIAogICAgLy8gRnVuY3Rpb24gdG8gZGlzcGxheSB0aGUgdXBsb2FkZWQgaW1hZ2UKICAgIGRpc3BsYXlJbWFnZShpbWFnZVVybCkgewogICAgICAgIGNvbnN0IGltYWdlUHJldmlld0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZS1wcmV2aWV3Jyk7CiAgICAgICAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgICBpbWFnZS5zcmMgPSBpbWFnZVVybDsKICAgICAgICBpbWFnZS5jbGFzc0xpc3QuYWRkKCd1cGxvYWRlZC1pbWFnZScpOyAvLyBBZGQgQ1NTIGNsYXNzIGZvciBzdHlsaW5nCiAgICAgICAgaW1hZ2VQcmV2aWV3RGl2LmlubmVySFRNTCA9ICcnOyAvLyBDbGVhciBhbnkgZXhpc3RpbmcgY29udGVudAogICAgICAgIGltYWdlUHJldmlld0Rpdi5hcHBlbmRDaGlsZChpbWFnZSk7CgogICAgICAgIGNvbnN0IGltYWdlUHJldmlld0RpdjIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2UtcHJldmlldzInKTsKICAgICAgICBjb25zdCBpbWFnZTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgICBpbWFnZTIuc3JjID0gaW1hZ2VVcmw7CiAgICAgICAgaW1hZ2UyLmNsYXNzTGlzdC5hZGQoJ3NlcnZpY2VfaW1hZ2UnKTsgLy8gQWRkIENTUyBjbGFzcyBmb3Igc3R5bGluZwogICAgICAgIGltYWdlUHJldmlld0RpdjIuaW5uZXJIVE1MID0gJyc7IC8vIENsZWFyIGFueSBleGlzdGluZyBjb250ZW50CiAgICAgICAgaW1hZ2VQcmV2aWV3RGl2Mi5hcHBlbmRDaGlsZChpbWFnZTIpOwogICAgfSwKICAgIGFzeW5jIHNob3dfY2F0ZWdvcmllcygpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGFwb2xsby5xdWVyeSh7CiAgICAgICAgICBxdWVyeTogcmVxdWlyZSgnQC9ncmFwaHFsL0NhdGVnb3J5LmdxbCcpLAogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCd0aGUgc2VydmljZSBjYXRlZ29yeSBpcyBoZXJlJywgcmVzcG9uc2UpCiAgICAgICAgIHRoaXMuc2VydmljZXMuc2VydmljZV9jYXRlZ29yaWVzID0gcmVzcG9uc2UuZGF0YS5jYXRlZ29yaWVzOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9nZ2luZyBvdXQ6JywgZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgc3VibWl0Rm9ybSgpIHsKICAgICAgdGhpcy52JC4kdG91Y2goKTsKICAgICAgaWYoIXRoaXMudiQuJGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coKQogICAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICAgIG11dGF0aW9uOiByZXF1aXJlKCdAL2dyYXBocWwvU2VydmljZUNyZWF0ZS5ncWwnKSwKICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICBzZXJ2aWNlQ2F0ZWdvcnlJZDogdGhpcy5zZXJ2aWNlcy5zZXJ2aWNlX2NhdGVnb3J5LAogICAgICAgICAgICBuYW1lOiB0aGlzLnNlcnZpY2VzLm5hbWUsCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnNlcnZpY2VzLmRlc2NyaXB0aW9uLAogICAgICAgICAgICBwcmljZTogcGFyc2VJbnQodGhpcy5zZXJ2aWNlcy5wcmljZSksCiAgICAgICAgICAgIGltYWdlOiB0aGlzLmltYWdlCiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICAgIGxldCBkYXRhID0gdGhpcy5zZXJ2aWNlczsKICAgICAgICBkYXRhWydpbWFnZSddID0gdGhpcy5pbWFnZTsKICAgICAgICBkYXRhWydpZCddID0gcmVzcG9uc2UuZGF0YS5jcmVhdGVTZXJ2aWNlLnNlcnZpY2UuaWQ7CiAgICAgICAgY29uc29sZS5sb2coJ3RoZSBkYXRhIG9mIG5ldyBzZXJ2aWNlcyBpczogJywgZGF0YSk7CiAgICAgICAgY29uc29sZS5sb2coJ3JlcGx5IGZyb20gc2VydmljZSBpczogJywgcmVzcG9uc2UpCiAgICAgICAgaWYocmVzcG9uc2UpIHsgYWxlcnQoIlNVQ0NFU1MsIG5ldyBzZXJ2aWNlIGhhcyBiZWVuIHJlY29yZGVkIikgfQogICAgICAgIHRoaXMuJGVtaXQoJ25ld1NlcnZpY2VBZGRlZCcsIGRhdGEpOwogICAgICAgIHRoaXMudGltZV9zbG90X29uZSA9IG51bGw7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsgY29uc29sZS5lcnJvcigiR3JhcGhxbCBFcnJvcjoiLCBlcnJvcik7IH0KICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnYkLnNlcnZpY2VzKQogICAgICB9CiAgICB9LAogICAgcmVsb2FkUGFnZSgpIHsKICAgICAgLy8gUmVsb2FkIHRoZSBjdXJyZW50IHBhZ2UKICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLiRyZWZzLnNlcnZpY2VfbmFtZS5mb2N1cygpOwogICAgdGhpcy5zaG93X2NhdGVnb3JpZXMoKTsKICAgIHRoaXMudXBsb2FkKCk7CiAgfSwKfQo="},{"version":3,"sources":["ServiceNew.vue"],"names":[],"mappings":";AAsGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ServiceNew.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"service_category_header\">\n      <h2 class=\"service_category_title\">New <span class=\"service_category_title_name\">Service</span></h2>\n      <span class=\"btn btn-success service_category_add_btn\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-save2-fill\" viewBox=\"0 0 16 16\">\n          <path d=\"M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6c-.314.418-.5.937-.5 1.5v6h-2a.5.5 0 0 0-.354.854l2.5 2.5a.5.5 0 0 0 .708 0l2.5-2.5A.5.5 0 0 0 10.5 7.5h-2v-6z\"/>\n        </svg>\n        Save New Service\n      </span>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <form @submit.prevent=\"submitForm\" class=\"centered-form\">\n          <div class=\"input-field-signin\">\n            <div :class=\"{ error: v$.services.name.$errors.length }\">\n              <label class=\"form-label\">Service Name\n                <input v-model=\"services.name\" class=\"form-control form-control-l\" :class=\"{ error: v$.services.name.$errors.length }\" ref=\"service_name\">\n                <div class=\"input-errors\" v-for=\"error of v$.services.name.$errors\" :key=\"error.$uid\">\n                  <div class=\"error-msg\">{{ error.$message }}</div>\n                </div>\n              </label>\n            </div>\n          </div>\n          <div class=\"input-field-signin\">Service Category\n            <div :class=\"{ error: v$.services.service_category.$errors.length }\">\n              <select v-model=\"services.service_category\" class=\"form-control form-control-l\" :class=\"{ error: v$.services.service_category.$errors.length }\">\n                <option v-for=\"category in this.services.service_categories\" :key=\"category.id\" :value=\"category.id\">\n                  {{ category.name }}\n                </option>\n              </select>\n            </div>\n          </div>\n          <div class=\"input-field-signin\">\n            <div :class=\"{ error: v$.services.description.$errors.length }\">\n              <label class=\"form-label\">Description\n                <textarea v-model=\"services.description\" class=\"form-control form-control-l\" :class=\"{ error: v$.services.description.$errors.length }\"></textarea>\n                <div class=\"input-errors\" v-for=\"error of v$.services.description.$errors\" :key=\"error.$uid\">\n                  <div class=\"error-msg\">{{ error.$message }}</div>\n                </div>\n              </label>\n            </div>\n          </div>\n          <div class=\"input-field-signin\">\n            <div :class=\"{ error: v$.services.price.$errors.length }\">\n              <label class=\"form-label\">Price\n                <div class=\"input-group mb-3\" :class=\"{ error: v$.services.price.$errors.length }\">\n                  <span class=\"input-group-text\">PHP</span>\n                  <input type=\"text\" class=\"form-control form-control-l\" :class=\"{ error: v$.services.price.$errors.length }\" id=\"price\" v-model=\"services.price\" aria-label=\"Amount (to the nearest dollar)\">\n                  <span class=\"input-group-text\">.00</span>\n                </div>\n                <div class=\"input-errors\" v-for=\"error of v$.services.price.$errors\" :key=\"error.$uid\">\n                  <div class=\"error-msg\">{{ error.$message }}</div>\n                </div>\n              </label>\n            </div>\n          </div>\n          <div class=\"input-field-signin\">\n            <div class=\"row input-field-signup mt-3\">\n              <button id=\"upload_widget\" @click.prevent=\"\" class=\"cloudinary-button\">Upload files</button>\n            </div>\n            <div id=\"image-preview\" class=\"mt-3\"></div>\n            <button type=\"submit\" class=\"btn btn-primary btn-lg input-field-signin\">Create</button>\n          </div>\n        </form>\n      </div>\n      <div class=\"col-md-6\">\n        <p>Customer's View</p>\n        <div class=\"card service_new_form\">\n          <div class=\"card-body service_item\">\n            <a class=\"service_link\" href=\"#\" @click.prevent>\n              <h5>{{ services.name }}</h5>\n              <div id=\"image-preview2\" class=\"mt-3\"></div>\n              <p class=\"service_details\">{{ services.description }}</p>\n              <p class=\"service_details\">{{ formatToPHP(services.price) }}</p>\n            </a>\n            <table class=\"table service_details\">\n              <thead>\n                <tr>\n                  <th>Schedule</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr>\n                  <div class=\"time\">\n                    <datepicker \n                    :use-utc=\"true\"\n                    :inline=\"true\"\n                    format=\"MM/DD/yyyy\"\n                    ></datepicker>\n                  </div>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Datepicker from 'vuejs-datepicker';\nimport { required, integer, maxLength } from '@vuelidate/validators'\nimport { useVuelidate } from '@vuelidate/core';\nexport default {\n  setup () { return { v$: useVuelidate() } },\n  data () {\n    return {\n      services: {\n        service_category: '',\n        name: '',\n        price: '',\n        description: '',\n        service_categories: [],\n      },\n    }\n  },\n  validations () {\n    return {\n      services: {\n        name: { required, maxLength: maxLength(25) },\n        service_category: { required  },\n        price: {required, integer },\n        description: {required, maxLength: maxLength(100),},\n      },\n      image: '',\n    }\n  },\n  components: { Datepicker, },\n  methods: {\n    formatToPHP(number) {\n      // Convert the number to a string with two decimal places\n      const formattedNumber = Number(number).toFixed(2);\n\n      // Add \"PHP \" to the formatted number and use commas as a thousands separator\n      const result = `PHP ${formattedNumber.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ', ')}`;\n\n      return result;\n    },\n    upload(){\n        console.log('upload')\n        var myWidget = window.cloudinary.createUploadWidget({\n            cloudName: 'dovxq5gn9', \n            processQueue: false,\n            uploadPreset: 'uhjevesg'}, (error, result) => { \n                if (!error && result && result.event === \"success\") { \n                console.log('Done! Here is the image info: ', result.info); \n                    const imageUrl = result.info.secure_url;\n                    this.image = imageUrl;\n                    this.displayImage(imageUrl);\n                }\n            }\n        )\n        document.getElementById(\"upload_widget\").addEventListener(\"click\", function(){\n            myWidget.open();\n        }, false);\n    }, \n    // Function to display the uploaded image\n    displayImage(imageUrl) {\n        const imagePreviewDiv = document.getElementById('image-preview');\n        const image = document.createElement('img');\n        image.src = imageUrl;\n        image.classList.add('uploaded-image'); // Add CSS class for styling\n        imagePreviewDiv.innerHTML = ''; // Clear any existing content\n        imagePreviewDiv.appendChild(image);\n\n        const imagePreviewDiv2 = document.getElementById('image-preview2');\n        const image2 = document.createElement('img');\n        image2.src = imageUrl;\n        image2.classList.add('service_image'); // Add CSS class for styling\n        imagePreviewDiv2.innerHTML = ''; // Clear any existing content\n        imagePreviewDiv2.appendChild(image2);\n    },\n    async show_categories() {\n      try {\n        const response = await this.$apollo.query({\n          query: require('@/graphql/Category.gql'),\n        });\n        console.log('the service category is here', response)\n         this.services.service_categories = response.data.categories;\n      } catch (error) {\n          console.error('Error logging out:', error);\n      }\n    },\n    async submitForm() {\n      this.v$.$touch();\n      if(!this.v$.$error) {\n        console.log()\n        try {\n        const response = await this.$apollo.mutate({\n          mutation: require('@/graphql/ServiceCreate.gql'),\n          variables: {\n            serviceCategoryId: this.services.service_category,\n            name: this.services.name,\n            description: this.services.description,\n            price: parseInt(this.services.price),\n            image: this.image\n          },\n        });\n        let data = this.services;\n        data['image'] = this.image;\n        data['id'] = response.data.createService.service.id;\n        console.log('the data of new services is: ', data);\n        console.log('reply from service is: ', response)\n        if(response) { alert(\"SUCCESS, new service has been recorded\") }\n        this.$emit('newServiceAdded', data);\n        this.time_slot_one = null;\n        } catch (error) { console.error(\"Graphql Error:\", error); }\n      } else {\n        console.log(this.v$.services)\n      }\n    },\n    reloadPage() {\n      // Reload the current page\n      window.location.reload();\n    },\n  },\n  mounted() {\n    this.$refs.service_name.focus();\n    this.show_categories();\n    this.upload();\n  },\n}\n</script>\n\n<style>\n.service_new_form {\n  width: 390px;\n  margin: 0 auto;\n}\n\n.centered-form {\n  width: 230px;\n  margin: 0 auto;\n}\n\n.cloudinary-button {\n    background-color: #007bff;\n    color: white;\n    padding: 10px 20px;\n    border: none;\n    cursor: pointer;\n}\n\n.cloudinary-button:hover {\n    background-color: #0056b3;\n}\n\n/* Style the uploaded image */\n.uploaded-image {\n    max-width: 100%;\n    height: auto;\n    margin-top: 10px;\n    border: 1px solid #ccc;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n</style>"]}]}